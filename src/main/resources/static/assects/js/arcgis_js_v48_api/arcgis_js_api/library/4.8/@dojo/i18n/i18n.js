//>>built
(function(d){"object"===typeof module&&"object"===typeof module.exports?(d=d(require,exports),void 0!==d&&(module.exports=d)):"function"===typeof define&&define.amd&&define("require exports tslib @dojo/shim/global @dojo/shim/Map @dojo/core/Evented @dojo/core/has @dojo/core/uuid @dojo/core/load/util globalize/dist/globalize/message ./cldr/load ./util/main".split(" "),d)})(function(d,f){function p(a){if(a.id)return a.id;var b=C.default();Object.defineProperty(a,"id",{value:b});return b}function D(a,
b,c){c=l.normalizeLocale(c||m());var g=c+":"+a+":"+b,e=v.get(g);if(e)return e;e=(c!==m()?new n(l.normalizeLocale(c)):n).messageFormatter(a+"/"+b);(a=h.get(a))&&a.get(c)&&v.set(g,e);return e}function E(a,b){return Promise.all(b.map(function(c){return a[c]()})).then(function(a){return a.map(function(a){return F.useDefault(a)})})}function m(){return k||f.systemLocale}function w(a,b){void 0===b&&(b=[]);return l.generateLocales(a).filter(function(a){return-1<b.indexOf(a)})}function r(a,b,c){void 0===c&&
(c="root");var g=h.get(a);g||(g=new t.default,h.set(a,g));g.set(c,b);n.loadMessages((e={},e[c]=(d={},d[a]=b,d),e));var e,d}function x(a,b){var c=a.id,d=void 0===c?p(a):c,c=a.locales;a=a.messages;var e=h.get(d);if(e){if(d=e.get(b))return d}else r(d,a);b=w(b,c&&Object.keys(c));if(!b.length)return a;if(e)return e.get(b[b.length-1])}function y(a,b,c){var d=a.id;a=void 0===d?p(a):d;if(u.isLoaded("supplemental","likelySubtags")&&u.isLoaded("supplemental","plurals-type-cardinal"))return D(a,b,c);var e=(a=
h.get(a))?a.get(c||m())||a.get("root"):null;if(!e)throw Error("The bundle has not been registered.");return function(a){void 0===a&&(a=Object.create(null));return e[b].replace(G,function(b,c){b=a[c];if("undefined"===typeof b)throw Error("Missing property "+c);return b})}}function z(a,b){return q.__awaiter(this,void 0,void 0,function(){var c,d,e,f,h;return q.__generator(this,function(g){switch(g.label){case 0:c=b?l.normalizeLocale(b):m();if(d=x(a,c))return[2,d];e=a.locales;f=w(c,Object.keys(e));return[4,
E(e,f)];case 1:return h=g.sent(),[2,h.reduce(function(b,d){b=q.__assign({},b,d);r(p(a),Object.freeze(b),c);return b},a.messages)]}})})}Object.defineProperty(f,"__esModule",{value:!0});var q=d("tslib"),H=d("@dojo/shim/global"),t=d("@dojo/shim/Map"),I=d("@dojo/core/Evented"),A=d("@dojo/core/has"),C=d("@dojo/core/uuid"),F=d("@dojo/core/load/util"),n=d("globalize/dist/globalize/message"),u=d("./cldr/load"),l=d("./util/main"),G=/\{([a-z0-9_]+)\}/gi,h=new t.default,v=new t.default,B=new I.default,k;f.formatMessage=
function(a,b,c,d){return y(a,b,d)(c)};f.getCachedMessages=x;f.getMessageFormatter=y;Object.defineProperty(z,"locale",{get:m});f.default=z;f.invalidate=function(a){a?a.id&&h.delete(a.id):h.clear()};f.observeLocale=function(a){return B.on("change",function(b){a(b.target)})};f.setLocaleMessages=function(a,b,c){b=q.__assign({},a.messages,b);r(p(a),Object.freeze(b),c)};f.switchLocale=function(a){var b=k;k=a?l.normalizeLocale(a):"";b!==k&&(u.isLoaded("supplemental","likelySubtags")&&(n.load({main:(c={},
c[k]={},c)}),n.locale(k)),B.emit({type:"change",target:k}));var c};f.systemLocale=function(){var a="en";A.default("host-browser")?(a=H.default.navigator,a=a.language||a.userLanguage):A.default("host-node")&&(a=process.env.LANG||a);return l.normalizeLocale(a)}()});