// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ./Graphics3DGraphic ./Graphics3DSymbolLayerFactory ../../support/PromiseLightweight".split(" "),function(u,v,p,q,r,t){return function(l){function g(a,d,c){var b=l.call(this)||this;b.symbol=a;a=a.symbolLayers;c&&(a=c.concat(a));c=a.length;b.childGraphics3DSymbols=Array(a.length);b.childGraphics3DSymbolPromises=Array(a.length);for(var f=d.layerOrder,e=0,g=0,m=!1,n=function(a,b){b&&(this.childGraphics3DSymbols[a]=b,g++);e--;!this.isRejected()&&
m&&1>e&&(0<g?this.resolve():this.reject())},h=0;h<c;h++){var k=a.getItemAt(h);!1!==k.enabled&&(d.layerOrder=f+(1-(1+h)/c),d.layerOrderDelta=1/c,k=r.make(b.symbol,k,d,k._ignoreDrivers))&&(e++,b.childGraphics3DSymbolPromises[h]=k,k.then(n.bind(b,h,k),n.bind(b,h,null)))}d.layerOrder=f;m=!0;!b.isRejected()&&1>e&&b.resolve();return b}p(g,l);g.prototype.createGraphics3DGraphic=function(a,d){for(var c=a.graphic,b=Array(this.childGraphics3DSymbols.length),f=0;f<this.childGraphics3DSymbols.length;f++){var e=
this.childGraphics3DSymbols[f];e&&(b[f]=e.createGraphics3DGraphic(a))}return new q(c,d||this,b,a.layer)};Object.defineProperty(g.prototype,"numberOfVertices",{get:function(){for(var a=0,d=0;d<this.childGraphics3DSymbols.length;++d){var c=this.childGraphics3DSymbols[d];c&&(a+=c.numberOfVertices)}return a},enumerable:!0,configurable:!0});g.prototype.layerPropertyChanged=function(a,d){for(var c=this.childGraphics3DSymbols.length,b=function(b){var c=f.childGraphics3DSymbols[b],e=function(a){return a._graphics[b]};
if(c&&!c.layerPropertyChanged(a,d,e))return{value:!1}},f=this,e=0;e<c;e++){var g=b(e);if("object"===typeof g)return g.value}return!0};g.prototype.applyRendererDiff=function(a,d,c){return this.isResolved()?this.childGraphics3DSymbols.reduce(function(b,f,e){return b&&(!f||f.applyRendererDiff(a,d,c,e))},!0):!1};g.prototype.getFastUpdateStatus=function(){var a=0,d=0,c=0;this.childGraphics3DSymbolPromises.forEach(function(b){b&&!b.isFulfilled()?a++:b&&b.isFastUpdatesEnabled()?c++:b&&d++});return{loading:a,
slow:d,fast:c}};g.prototype.setDrawOrder=function(a,d){for(var c=this.childGraphics3DSymbols.length,b=1/c,f=0;f<c;f++){var e=this.childGraphics3DSymbols[f];e&&e.setDrawOrder(a+(1-(1+f)/c),b,d)}};g.prototype.destroy=function(){this.isFulfilled()||this.reject();for(var a=0;a<this.childGraphics3DSymbolPromises.length;a++)this.childGraphics3DSymbolPromises[a]&&this.childGraphics3DSymbolPromises[a].destroy()};return g}(t.Promise)});