// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(A,e,x,y){function m(b,a,d,c,e){e=b.watch(a,function(a,e,f,z){c&&!c(a)||d.call(b,a,e,f,z)},e);if(Array.isArray(a))for(var g=0;g<a.length;g++){var f=b.get(a[g]);c&&c(f)&&d.call(b,f,f,a,b)}else f=b.get(a),c&&c(f)&&d.call(b,f,f,a,b);return e}function n(b,a,d,c,e){function g(){l&&(l.remove(),l=null)}var f=!1,l,k=new x(g),h=new y;h.cancel=k.cancel;h.isCanceled=k.isCanceled;h.isFulfilled=k.isFulfilled;h.isRejected=k.isRejected;
h.isResolved=k.isResolved;h.then=k.then;h.remove=g;Object.freeze(h);l=m(b,a,function(a,c,e,h){f=!0;g();d&&d.call(b,a,c,e,h);k.resolve({value:a,oldValue:c,propertyName:e,target:h})},c,e);f&&l.remove();return h}function p(b){return!!b}function q(b){return!b}function r(b){return!0===b}function t(b){return!1===b}function u(b){return void 0!==b}function v(b){return void 0===b}function w(b,a,d,c){var e=Array.isArray(a)?a:-1<a.indexOf(",")?a.split(","):[a];a=b.watch(a,d,c);for(c=0;c<e.length;c++){var g=
e[c].trim(),f=b.get(g);d.call(b,f,f,g,b)}return a}Object.defineProperty(e,"__esModule",{value:!0});e.init=w;e.watch=function(b,a,d,c){return b.watch(a,d,c)};e.once=function(b,a,d,c){return n(b,a,d,null,c)};e.when=function(b,a,d,c){return m(b,a,d,p,c)};e.whenOnce=function(b,a,d,c){return n(b,a,d,p,c)};e.whenNot=function(b,a,d,c){return m(b,a,d,q,c)};e.whenNotOnce=function(b,a,d,c){return n(b,a,d,q,c)};e.whenTrue=function(b,a,d,c){return m(b,a,d,r,c)};e.whenTrueOnce=function(b,a,d,c){return n(b,a,d,
r,c)};e.whenFalse=function(b,a,d,c){return m(b,a,d,t,c)};e.whenFalseOnce=function(b,a,d,c){return n(b,a,d,t,c)};e.whenDefined=function(b,a,d,c){return m(b,a,d,u,c)};e.whenDefinedOnce=function(b,a,d,c){return n(b,a,d,u,c)};e.whenUndefined=function(b,a,d,c){return m(b,a,d,v,c)};e.whenUndefinedOnce=function(b,a,d,c){return n(b,a,d,v,c)};e.pausable=function(b,a,d,c){var e=!1,g=b.watch(a,function(a,c,g,h){e||d.call(b,a,c,g,h)},c);return{remove:function(){g.remove()},pause:function(){e=!0},resume:function(){e=
!1}}};e.on=function(b,a,d,c,e,g,f){function l(a){var c=k[a];c&&(g&&g(c.target,a,b,d),c.handle.remove(),delete k[a])}var k={},h=w(b,a,function(a,g,f){l(f);a&&"function"===typeof a.on&&(k[f]={handle:a.on(d,c),target:a},e&&e(a,f,b,d))},f);return{remove:function(){h.remove();for(var a in k)l(a)}}}});