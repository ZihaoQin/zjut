// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang".split(" "),function(p,c,e,l,g,m){function f(a){var b;try{b=a?e.parseScript(a):null}catch(d){b=null}return b}Object.defineProperty(c,"__esModule",{value:!0});var h=/^\$feature\./i,n={vars:{$feature:"any",$view:"any"},spatialReference:null};c.createSyntaxTree=f;c.createFunction=function(a,b){b=b||m.clone(n);a="string"===typeof a?f(a):a;if(!a)return null;var d;try{d=a?e.compileScript(a,b):null}catch(k){d=null}return d};
c.createExecContext=function(a,b){return{vars:{$feature:null==a?new g:g.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};c.createFeature=function(a,b,d){return g.createFromGraphicLikeObject(b,a,d)};c.updateExecContext=function(a,b){a.vars.$feature=b};c.evalSyntaxTree=function(a,b){var d;try{d=e.executeScript(a,b,b.spatialReference)}catch(k){d=null}return d};c.executeFunction=function(a,b){var d;try{d=a?a(b,b.spatialReference):null}catch(k){d=null}return d};c.extractFieldNames=function(a){if(!a)return[];
a="string"===typeof a?f(a):a;if(!a)return[];var b=[];e.extractFieldLiterals(a).forEach(function(a){h.test(a)&&(a=a.replace(h,""),b.push(a))});b.sort();return b.filter(function(a,c){return 0===c||b[c-1]!==a})};c.dependsOnView=function(a){return e.referencesMember(a,"$view")};c.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new l({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}};c.hasGeometryOperations=function(a){return(a="string"===typeof a?
f(a):a)&&e.scriptUsesGeometryEngine(a)};c.enableGeometryOperations=function(){return e.enableGeometrySupport()}});