// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/tsSupport/awaiterHelper":function(){define(["dojo/Deferred","dojo/when"],function(x,e){return function(g,k,m,p){function t(d){try{y(p.next(d))}catch(l){w.reject(l)}}function u(d){try{y(p["throw"](d))}catch(l){w.reject(l)}}function y(d){d.done?e(d.value).then(w.resolve,w.reject):e(d.value).then(t,u)}var w=new x;y((p=p.apply(g,k||[])).next());return w.promise}})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(x,e){function g(g){return function(d){return k([g,
d])}}function k(g){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,t&&(u=g[0]&2?t["return"]:g[0]?t["throw"]||((u=t["return"])&&u.call(t),0):t.next)&&!(u=u.call(t,g[1])).done)return u;if(t=0,u)g=[g[0]&2,u.value];switch(g[0]){case 0:case 1:u=g;break;case 4:return m.label++,{value:g[1],done:!1};case 5:m.label++;t=g[1];g=[0];continue;case 7:g=m.ops.pop();m.trys.pop();continue;default:if(!(u=m.trys,u=0<u.length&&u[u.length-1])&&(6===g[0]||2===g[0])){m=0;continue}if(3===g[0]&&
(!u||g[1]>u[0]&&g[1]<u[3]))m.label=g[1];else if(6===g[0]&&m.label<u[1])m.label=u[1],u=g;else if(u&&m.label<u[2])m.label=u[2],m.ops.push(g);else{u[2]&&m.ops.pop();m.trys.pop();continue}}g=e.call(x,m)}catch(d){g=[6,d],t=0}finally{p=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}var m={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},p,t,u,y;return y={next:g(0),"throw":g(1),"return":g(2)},"function"===typeof Symbol&&(y[Symbol.iterator]=function(){return this}),
y}})},"esri/views/3d/support/meshProcessing":function(){define(["require","exports","../webgl-engine/lib/Util"],function(x,e,g){Object.defineProperty(e,"__esModule",{value:!0});e.computeNeighbors=function(g,e){for(var k=g.length/3,m=new Uint32Array(e+1),p=new Uint32Array(e+1),w=function(a,b){a<b?m[a+1]++:p[b+1]++},d=0;d<k;d++){var l=g[3*d],f=g[3*d+1],r=g[3*d+2];w(l,f);w(f,r);w(r,l)}for(d=f=l=0;d<e;d++)r=m[d+1],w=p[d+1],m[d+1]=l,p[d+1]=f,l+=r,f+=w;for(var v=new Uint32Array(6*k),q=m[e],w=function(a,
b,c){if(a<b){var h=m[a+1]++;v[2*h]=b;v[2*h+1]=c}else h=p[b+1]++,v[2*q+2*h]=a,v[2*q+2*h+1]=c},d=0;d<k;d++)l=g[3*d],f=g[3*d+1],r=g[3*d+2],w(l,f,d),w(f,r,d),w(r,l,d);l=function(a,b){var c=2*a;a=b-a;for(b=1;b<a;b++){var h=v[c+2*b],n=v[c+2*b+1],d=b-1;for(d;0<=d&&v[c+2*d]>h;d--)v[c+2*d+2]=v[c+2*d],v[c+2*d+3]=v[c+2*d+1];v[c+2*d+2]=h;v[c+2*d+3]=n}};for(d=0;d<e;d++)l(m[d],m[d+1]),l(q+p[d],q+p[d+1]);for(var B=new Int32Array(3*k),A=function(a,b){return a===g[3*b]?0:a===g[3*b+1]?1:a===g[3*b+2]?2:-1},k=function(a,
b){a=A(a,b);B[3*b+a]=-1},l=function(a,b,c,d){a=A(a,b);B[3*b+a]=d;c=A(c,d);B[3*d+c]=b},d=0;d<e;d++){for(var f=m[d],r=m[d+1],w=p[d],a=p[d+1];f<r&&w<a;){var b=v[2*f],c=v[2*q+2*w];b===c?(l(d,v[2*f+1],c,v[2*q+2*w+1]),f++,w++):b<c?(k(d,v[2*f+1]),f++):(k(c,v[2*q+2*w+1]),w++)}for(;f<r;)k(d,v[2*f+1]),f++;for(;w<a;)c=v[2*q+2*w],k(c,v[2*q+2*w+1]),w++}return B};var k=null;e.deduplicate=function(e,p,t,u,y){void 0===t&&(t=0);void 0===u&&(u=0);void 0===y&&(y=e.byteLength/(4*p));e=new Uint32Array(e,u,y*p);u=new Uint32Array(y);
var m=Math.floor(1.1*y)+1;if(null==k||k.length<2*m)k=new Uint32Array(g.nextHighestPowerOfTwo(2*m));for(var d=0;d<2*m;d++)k[d]=0;for(var l=0,f=0!==t?Math.ceil(7.84*1.96/(t*t)*t*(1-t)):y,d=0;d<y;d++){if(d===f){var r=1-l/d;if(r+1.96*Math.sqrt(r*(1-r)/d)<t)return null;f*=2}for(var r=d*p,v,q=v=0;q<p;q++)v=e[r+q]+v|0,v=v+(v<<11)+(v>>>2)|0;v>>>=0;for(var q=v%m,B=l;0!==k[2*q+1];){if(k[2*q]===v){var A=k[2*q+1]-1,a=A*p;a:{for(var b=0;b<p;b++)if(e[r+b]!==e[a+b]){a=!1;break a}a=!0}if(a){B=u[A];break}}q++;q>=
m&&(q-=m)}B===l&&(k[2*q]=v,k[2*q+1]=d+1,l++);u[d]=B}if(0!==t&&1-l/y<t)return null;t=new Uint32Array(p*l);for(d=l=0;d<y;d++)if(u[d]===l){m=e;f=d*p;r=t;v=l*p;q=p;for(B=0;B<q;B++)r[v+B]=m[f+B];l++}return{buffer:t.buffer,indices:u,uniqueCount:l}}})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["require","exports","../../support/geometryUtils","./gl-matrix"],function(x,e,g,k){function m(a,b){if(!a)throw a=Error("dummy"),a.stack&&console.log(a.stack),new X(b);}function p(a,b,c){return a<b?b:
a>c?c:a}function t(a){return a/180*Math.PI}function u(a){return 180*a/Math.PI}function y(a,b,c){k.mat4d.multiply(b,a,q);k.mat4d.inverse(q);for(a=0;8>a;++a)k.mat4d.multiplyVec4(q,B[a],A),k.vec3d.set3(A[0]/A[3],A[1]/A[3],A[2]/A[3],c[a])}function w(a,b){g.plane.fromPoints(a[4],a[0],a[3],b[0]);g.plane.fromPoints(a[1],a[5],a[6],b[1]);g.plane.fromPoints(a[4],a[5],a[1],b[2]);g.plane.fromPoints(a[3],a[2],a[6],b[3]);g.plane.fromPoints(a[0],a[1],a[2],b[4]);g.plane.fromPoints(a[5],a[4],a[7],b[5])}function d(a,
b,c,h){var n=6378137/Math.sqrt(1-e.ECCENTRICITY_SQUARED*Math.pow(Math.sin(a),2)),d=Math.cos(a);h[0]=(n+c)*Math.cos(b)*d;h[1]=(n*(1-e.ECCENTRICITY_SQUARED)+c)*Math.sin(a);h[2]=-(n+c)*Math.sin(b)*d}function l(a){for(var b in a)return b}function f(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]}function r(a,b){void 0===b&&(b=0);for(var c=0,h=0;4>h;h++)c+=a[b+h]*Z[h];return c}function v(a){return a-Math.floor(a)}Object.defineProperty(e,"__esModule",{value:!0});var q=k.mat4d.create(),B=[k.vec4d.createFrom(-1,-1,
-1,1),k.vec4d.createFrom(1,-1,-1,1),k.vec4d.createFrom(1,1,-1,1),k.vec4d.createFrom(-1,1,-1,1),k.vec4d.createFrom(-1,-1,1,1),k.vec4d.createFrom(1,-1,1,1),k.vec4d.createFrom(1,1,1,1),k.vec4d.createFrom(-1,1,1,1)],A=k.vec4d.create(),a=[k.vec3d.create(),k.vec3d.create(),k.vec3d.create(),k.vec3d.create(),k.vec3d.create(),k.vec3d.create(),k.vec3d.create(),k.vec3d.create()],b=k.vec3d.create(),c=k.vec3d.create(),h=k.vec3d.create(),n=k.vec3d.create(),z=k.vec3d.create(),H=k.vec3d.create(),L=k.vec3d.create(),
N=k.vec3d.create(),Q=k.vec3d.create(),P=k.vec3d.create(),O=k.vec3d.create(),R=k.vec3d.create(),V=k.vec3d.create(),aa=k.vec3d.createFrom(0,0,0),X=function(){function a(a){this.message=a}a.prototype.toString=function(){return"AssertException: "+this.message};return a}();e.AssertException=X;e.EARTH_RADIUS=6378137;e.METER2FEET=3.28084;e.ECCENTRICITY_SQUARED=.0066943799901414;e.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",
COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};e.assert=m;e.verify=function(a,b){a||(console.log("Verify failed: "+b),console.log(Error("dummy").stack))};e.isPowerOfTwo=function(a){return 0===(a&a-1)};e.lerp=function(a,b,c){return a+(b-a)*c};e.clamp=p;e.encodeInt16=function(a){return p(Math.round(32767*a),-32767,32767)};e.encodeNormal=function(a,b){var c=Math.abs(a[0]),h=Math.abs(a[1]),n=1/(c+h+Math.abs(a[2])),c=c*n,h=h*n,n=Math.min(a[2]*n,0);
b[0]=W(a[0])*(c-n);b[1]=W(a[1])*(h-n)};var W="function"===typeof Math.sign?Math.sign:function(a){return+(0<a)-+(0>a)||0};e.fallbackIfUndefined=function(a,b){return void 0===a?b:a};e.hex2rgb=function(a){a=Math.floor(a);return[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255]};e.rgb2hex=function(a){var b=p(Math.round(255*a[0]),0,255),c=p(Math.round(255*a[1]),0,255);a=p(Math.round(255*a[2]),0,255);return"0x"+((b<<16)+(c<<8)+a).toString(16)};e.dec2hex=function(a){a=a.toString(16);return"00000000".substr(0,
8-a.length)+a};e.deg2rad=t;e.rad2deg=u;e.azimuthElevationAngle2Direction=function(a,b){a=1.5*Math.PI-a;b=.5*Math.PI-b;return[Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b)]};e.raySphere=function(a,c,h,n,d){h=h||aa;var f=k.vec3d.subtract(a,h,b);h=k.vec3d.dot(c,c);var z=2*k.vec3d.dot(c,f);n=k.vec3d.dot(f,f)-n*n;n=z*z-4*h*n;if(0>n)return!1;f=Math.sqrt(n);n=(-z-f)/(2*h);h=(-z+f)/(2*h);if(0>n||h<n&&0<h)n=h;return 0<n?(d&&k.vec3d.add(a,k.vec3d.scale(c,n,V),d),!0):!1};e.rayTriangle3D=function(a,
b,c,h,n,d,f,z,l){void 0===l&&(l=k.vec3d.create());var H=h[f]-c[d],g=h[f+1]-c[d+1],r=h[f+2]-c[d+2];h=n[z]-c[d];f=n[z+1]-c[d+1];n=n[z+2]-c[d+2];var e=b[1]*n-f*b[2],m=b[2]*h-n*b[0],p=b[0]*f-h*b[1];z=H*e+g*m+r*p;if(-1E-5<z&&1E-5>z)return!1;z=1/z;var M=a[0]-c[d],L=a[1]-c[d+1];a=a[2]-c[d+2];l[1]=z*(M*e+L*m+a*p);if(0>l[1]||1<l[1])return!1;c=L*r-g*a;a=a*H-r*M;H=M*g-H*L;l[2]=z*(b[0]*c+b[1]*a+b[2]*H);if(0>l[2]||1<l[1]+l[2])return!1;l[0]=z*(h*c+f*a+n*H);return!0};e.rayBoxTest=function(a,b,c,h){var n,d=(c[0]-
a[0])/b[0],f=(h[0]-a[0])/b[0];d>f&&(n=d,d=f,f=n);var z=(c[1]-a[1])/b[1],l=(h[1]-a[1])/b[1];z>l&&(n=z,z=l,l=n);if(d>l||z>f)return!1;z>d&&(d=z);l<f&&(f=l);c=(c[2]-a[2])/b[2];a=(h[2]-a[2])/b[2];c>a&&(n=c,c=a,a=n);if(d>a||c>f)return!1;a<f&&(f=a);return 0>f?!1:!0};e.rayRay2D=function(a,b,c,h,n,d){void 0===d&&(d=k.vec2d.create());var f=(h[n]-c[n])*(b[0]-a[0])-(h[0]-c[0])*(b[n]-a[n]);if(0===f)return!1;c=((h[0]-c[0])*(a[n]-c[n])-(h[n]-c[n])*(a[0]-c[0]))/f;d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[n]+c*(b[n]-a[n]);return!0};
e.matrixToFrustumPoints=y;e.matrixToFrustumPlanes=function(b,c,h,n){void 0===n&&(n=h,h=a);y(b,c,h);w(h,n)};e.frustumPointsToPlanes=w;e.project=function(a,b,c,h,n){n||(n=a);A[0]=a[0];A[1]=a[1];A[2]=a[2];A[3]=1;k.mat4d.multiplyVec4(b,A);2<n.length&&(n[2]=-A[2]);k.mat4d.multiplyVec4(c,A);m(0!==A[3]);n[0]=A[0]/A[3];n[1]=A[1]/A[3];n[2]=A[2]/A[3];n[0]=(.5*n[0]+.5)*h[2]+h[0];n[1]=(.5*n[1]+.5)*h[3]+h[1]};e.geodeticToGeocentricLatidude=function(a){return Math.atan((1-e.ECCENTRICITY_SQUARED)*Math.tan(a))};
e.latLon2positionWGS84Ellipsoid=d;e.pos2latLon=function(a,b){var c=k.vec3d.length(a);b[0]=Math.asin(p(a[1]/c,-1,1));b[1]=(0>a[2]?1:-1)*Math.acos(p(a[0]/(Math.cos(b[0])*c),-1,1));b[0]=u(b[0]);b[1]=u(b[1]);b[2]=c};e.pos2latLonWGS84Ellipsoid=function(a,b){var c=a[0],h=-a[2],n=a[1],d=Math.sqrt(Math.pow(6378137,2)*(1-e.ECCENTRICITY_SQUARED));a=Math.sqrt(Math.pow(c,2)+Math.pow(h,2));var f=Math.atan2(6378137*n,d*a),c=Math.atan2(h,c),h=Math.atan2(n+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(d,2))/Math.pow(d,
2)),2)*d*Math.pow(Math.sin(f),3),a-6378137*e.ECCENTRICITY_SQUARED*Math.pow(Math.cos(f),3));a=a/Math.cos(h)-6378137/Math.sqrt(1-e.ECCENTRICITY_SQUARED*Math.pow(Math.sin(h),2))+e.EARTH_RADIUS;b[0]=h;b[1]=c;b[2]=a};e.computeGlobeTransformation=function(a,b,h){var n=t(a[0]);a=t(a[1]);d(n,a,b,c);k.mat4d.translate(h,c);k.mat4d.rotateY(h,.5*Math.PI+a);k.mat4d.rotateX(h,.5*Math.PI-n);return h};e.readUInt16=function(a,b){return a[b]+(a[b+1]<<8)};e.readUInt32=function(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<
16)+(a[b+3]<<24)};e.setIfDefined=function(a,b,c){void 0!==b[a]&&(c[a]=b[a])};e.array2object=function(a,b){var c={};if(void 0!==b)for(var h=0;h<a.length;h++){var n=a[h];c[b(n)]=n}else for(b=0;b<a.length;b++)n=a[b],c[n]=n;return c};e.object2array=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};e.mergeObjects=function(a,b,c){void 0===c&&(c={});if(c!==a)for(var h in a)c[h]=a[h];if(c!==b)for(var n in b)c[n]=b[n];return c};e.subtractObjects=function(a,b){var c={},h;for(h in a)void 0===b[h]&&(c[h]=
a[h]);return c};e.intersectObjects=function(a,b){var c={},h;for(h in a)void 0!==b[h]&&(c[h]=a[h]);return c};e.getFirstObjectKey=l;e.getFirstObjectValue=function(a){return a[l(a)]};e.objectEmpty=function(a){for(var b in a)return!1;return!0};e.byteBuffer2base64image=function(a,b,c,h,n){var d=4*b;m(a.length===d*c,"buffer length must match image resolution");var f=document.createElement("canvas");f.width=b;f.height=c;var z=f.getContext("2d");b=z.getImageData(0,0,b,c);for(var l=b.data,H=0;H<c;++H)for(var g=
H*d,r=(c-1-H)*d,e=0;e<d;++e)l[g++]=a[r++];z.putImageData(b,0,0);return f.toDataURL(h,n)};e.cround=function(a){return Math.round(100*a)/100};e.logWithBase=function(a,b){return Math.log(a)/Math.log(b)};e.setMatrixTranslation=f;e.setMatrixTranslation3=function(a,b,c,h){a[12]=b;a[13]=c;a[14]=h};e.getMatrixTranslation=function(a,b){void 0===b&&(b=k.vec3d.create());b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};e.createTranslationMatrix=function(a,b){a=k.mat4d.identity(a);f(a,b);return a};e.isTranslationMatrix=
function(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[7]&&0===a[8]&&0===a[9]&&1===a[10]&&0===a[11]&&1===a[15]};e.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};e.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};e.fovx2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/b)};e.fovy2fovd=function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(.5*a)/c)};e.fovd2fovx=function(a,b,c){return 2*Math.atan(b*
Math.tan(.5*a)/Math.sqrt(b*b+c*c))};e.fovd2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/Math.sqrt(b*b+c*c))};e.nextHighestPowerOfTwo=function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};e.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};e.lineLineDistanceSquared3D=function(a,b,c,d,f){h[0]=a[0]-c[0];h[1]=a[1]-c[1];h[2]=a[2]-c[2];n[0]=d[0]-c[0];n[1]=d[1]-c[1];n[2]=d[2]-c[2];if(1E-4>Math.abs(n[0])&&1E-4>Math.abs(n[1])&&1E-4>Math.abs(n[2]))return f.success=
!1,f;z[0]=b[0]-a[0];z[1]=b[1]-a[1];z[2]=b[2]-a[2];if(1E-4>Math.abs(z[0])&&1E-4>Math.abs(z[1])&&1E-4>Math.abs(z[2]))return f.success=!1,f;b=h[0]*n[0]+h[1]*n[1]+h[2]*n[2];d=n[0]*z[0]+n[1]*z[1]+n[2]*z[2];var l=h[0]*z[0]+h[1]*z[1]+h[2]*z[2],g=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],r=(z[0]*z[0]+z[1]*z[1]+z[2]*z[2])*g-d*d;if(1E-4>Math.abs(r))return f.success=!1,f;l=p((b*d-l*g)/r,0,1);b=p((b+d*l)/g,0,1);H[0]=a[0]+l*z[0];H[1]=a[1]+l*z[1];H[2]=a[2]+l*z[2];L[0]=c[0]+b*n[0];L[1]=c[1]+b*n[1];L[2]=c[2]+b*n[2];a=k.vec3d.dist2(H,
L);f.success=!0;f.dist2=a;f.pa=H;f.pb=L;return f};e.pointLineSegmentDistanceSquared2D=function(a,b,c){O[0]=b[0]-a[0];O[1]=b[1]-a[1];O[2]=0;R[0]=c[0]-a[0];R[1]=c[1]-a[1];R[2]=0;V[0]=c[0];V[1]=c[1];V[2]=0;b=k.vec2d.dot(R,O);c=k.vec2d.dot(O,O);b=p(b/c,0,1);P[0]=O[0]*b;P[1]=O[1]*b;N[0]=a[0]+P[0];N[1]=a[1]+P[1];k.vec2d.subtract(V,N,Q);a=k.vec2d.dot(Q,Q);b=k.vec2d.dot(R,R);c=k.vec2d.dot(O,O);var h=k.vec2d.dot(P,P);if(h>b||h>c)a=Number.MAX_VALUE;return a};e.packFloatRGBA=function(a,b,c){void 0===c&&(c=0);
a=p(a,0,Y);for(var h=0;4>h;h++)b[c+h]=Math.floor(256*v(a*ba[h]))};e.unpackFloatRGBA=r;var ba=[1,256,65536,16777216],Z=[1/256,1/65536,1/16777216,1/4294967296],Y=r(new Uint8ClampedArray([255,255,255,255]));e.inverseProjectionInfo=function(a,b,c,h,n){0===a[11]?(h[0]=2/(b*a[0]),h[1]=2/(c*a[5]),h[2]=(1+a[12])/a[0],h[3]=(1+a[13])/a[5],k.vec2d.set2(0,1,n)):(h[0]=-2/(b*a[0]),h[1]=-2/(c*a[5]),h[2]=(1-a[8])/a[0],h[3]=(1-a[9])/a[5],k.vec2d.set2(1,0,n))}})},"esri/views/3d/support/geometryUtils":function(){define(["require",
"exports","./geometryUtils/lineSegment","./geometryUtils/plane","./geometryUtils/triangle"],function(x,e,g,k,m){Object.defineProperty(e,"__esModule",{value:!0});e.plane=k;e.triangle=m;e.lineSegment=g})},"esri/views/3d/support/geometryUtils/lineSegment":function(){define(["require","exports","../../lib/glMatrix","../mathUtils"],function(x,e,g,k){function m(e,k){void 0===e&&(e=g.vec3d.create());void 0===k&&(k=g.vec3d.create());return{origin:e,vector:k}}Object.defineProperty(e,"__esModule",{value:!0});
e.create=m;e.fromOriginAndVector=function(e,k,p){void 0===p&&(p=m());g.vec3d.set(e,p.origin);g.vec3d.set(k,p.vector);return p};e.distance2=function(e,m){m=g.vec3d.subtract(m,e.origin);var t=g.vec3d.dot(e.vector,m),w=g.vec3d.dot(e.vector,e.vector),t=k.clamp(t/w,0,1);e=g.vec3d.subtract(g.vec3d.scale(e.vector,t,p),m,p);return g.vec3d.dot(e,e)};var p=g.vec3d.create()})},"esri/views/3d/lib/glMatrix":function(){define([],function(){var x={};(function(e,g){g(e,!0);g(e,!1)})(x,function(e,g){var k={};(function(){if("undefined"!=
typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);k.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var h=a[0];return h*(1.5-.5*c*h*h)}}else k.invsqrt=function(a){return 1/Math.sqrt(a)}})();var m=Array;"undefined"!=typeof Float32Array&&(m=g?Float32Array:Array);var p={create:function(a){var b=new m(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var h=new m(3);h[0]=a;h[1]=b;h[2]=c;return h},set:function(a,b){b[0]=a[0];b[1]=a[1];
b[2]=a[2];return b},set3:function(a,b,c,h){h[0]=a;h[1]=b;h[2]=c;return h},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],
b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],h=a[1];a=a[2];var n=Math.sqrt(c*c+h*h+a*a);if(!n)return b[0]=0,b[1]=0,b[2]=0,b;if(1===n)return b[0]=
c,b[1]=h,b[2]=a,b;n=1/n;b[0]=c*n;b[1]=h*n;b[2]=a*n;return b},cross:function(a,b,c){c||(c=a);var h=a[0],n=a[1];a=a[2];var d=b[0],f=b[1];b=b[2];c[0]=n*b-a*f;c[1]=a*d-h*b;c[2]=h*f-n*d;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var h=a[0]-b[0],n=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(h*h+n*n+a*a);if(!b)return c[0]=
0,c[1]=0,c[2]=0,c;b=1/b;c[0]=h*b;c[1]=n*b;c[2]=a*b;return c},lerp:function(a,b,c,h){h||(h=a);h[0]=a[0]+c*(b[0]-a[0]);h[1]=a[1]+c*(b[1]-a[1]);h[2]=a[2]+c*(b[2]-a[2]);return h},dist:function(a,b){var c=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+h*h+a*a)},dist2:function(a,b){var c=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return c*c+h*h+a*a}},t=null,u=new m(4);p.unproject=function(a,b,c,h,n){n||(n=a);t||(t=v.create());var d=t;u[0]=2*(a[0]-h[0])/h[2]-1;u[1]=2*(a[1]-h[1])/h[3]-1;u[2]=2*a[2]-1;u[3]=
1;v.multiply(c,b,d);if(!v.inverse(d))return null;v.multiplyVec4(d,u);if(0===u[3])return null;n[0]=u[0]/u[3];n[1]=u[1]/u[3];n[2]=u[2]/u[3];return n};var y=p.createFrom(1,0,0),w=p.createFrom(0,1,0),d=p.createFrom(0,0,1);p.rotationTo=function(a,b,c){c||(c=q.create());var h=p.dot(a,b),n=p.create();if(1<=h)q.set(B,c);else if(-.999999>h)p.cross(y,a,n),1E-6>n.length&&p.cross(w,a,n),1E-6>n.length&&p.cross(d,a,n),p.normalize(n),q.fromAxisAngle(n,Math.PI,c);else{var h=Math.sqrt(2*(1+h)),f=1/h;p.cross(a,b,n);
c[0]=n[0]*f;c[1]=n[1]*f;c[2]=n[2]*f;c[3]=.5*h;q.normalize(c)}1<c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var l=p.create(),f=p.create();p.project=function(a,b,c,h){h||(h=a);p.direction(b,c,l);p.subtract(a,b,f);a=p.dot(l,f);p.scale(l,a,h);p.add(h,b,h)};p.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var r={create:function(a){var b=new m(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,
b,c,h,n,d,f,l,g){var z=new m(9);z[0]=a;z[1]=b;z[2]=c;z[3]=h;z[4]=n;z[5]=d;z[6]=f;z[7]=l;z[8]=g;return z},determinant:function(a){var b=a[3],c=a[4],h=a[5],n=a[6],d=a[7],f=a[8];return a[0]*(f*c-h*d)+a[1]*(-f*b+h*n)+a[2]*(d*b-c*n)},inverse:function(a,b){var c=a[0],h=a[1],n=a[2],d=a[3],f=a[4],l=a[5],g=a[6],e=a[7];a=a[8];var k=a*f-l*e,m=-a*d+l*g,p=e*d-f*g,q=c*k+h*m+n*p;if(!q)return null;q=1/q;b||(b=r.create());b[0]=k*q;b[1]=(-a*h+n*e)*q;b[2]=(l*h-n*f)*q;b[3]=m*q;b[4]=(a*c-n*g)*q;b[5]=(-l*c+n*d)*q;b[6]=
p*q;b[7]=(-e*c+h*g)*q;b[8]=(f*c-h*d)*q;return b},multiply:function(a,b,c){c||(c=a);var h=a[0],n=a[1],d=a[2],f=a[3],l=a[4],g=a[5],e=a[6],r=a[7];a=a[8];var k=b[0],m=b[1],p=b[2],q=b[3],w=b[4],v=b[5],t=b[6],u=b[7];b=b[8];c[0]=k*h+m*f+p*e;c[1]=k*n+m*l+p*r;c[2]=k*d+m*g+p*a;c[3]=q*h+w*f+v*e;c[4]=q*n+w*l+v*r;c[5]=q*d+w*g+v*a;c[6]=t*h+u*f+b*e;c[7]=t*n+u*l+b*r;c[8]=t*d+u*g+b*a;return c},add:function(a,b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=
a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},subtract:function(a,b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},multiplyVec2:function(a,b,c){c||(c=b);var h=b[0];b=b[1];c[0]=h*a[0]+b*a[3]+a[6];c[1]=h*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var h=b[0],n=b[1];b=b[2];c[0]=h*a[0]+n*a[3]+b*a[6];c[1]=h*a[1]+n*a[4]+b*a[7];c[2]=h*a[2]+n*a[5]+b*a[8];return c},set:function(a,
b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=r.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],h=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=h;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=v.create());b[15]=1;b[14]=0;b[13]=0;
b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},v={create:function(a){var b=new m(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],
b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,h,n,d,f,l,g,e,r,k,p,q,w,v){var z=new m(16);z[0]=a;z[1]=b;z[2]=c;z[3]=h;z[4]=n;z[5]=d;z[6]=f;z[7]=l;z[8]=g;z[9]=e;z[10]=r;z[11]=k;z[12]=p;z[13]=q;z[14]=w;z[15]=v;return z},createFromMatrixRowMajor:function(a){var b=
new m(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new m(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=
a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,
b){if(!b||a===b){b=a[1];var c=a[2],h=a[3],n=a[6],d=a[7],f=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=n;a[11]=a[14];a[12]=h;a[13]=d;a[14]=f;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],h=a[2],n=a[3],d=a[4],f=a[5],l=a[6],g=a[7],e=a[8],r=a[9],k=a[10],m=a[11],p=a[12],q=a[13],w=a[14];
a=a[15];return p*r*l*n-e*q*l*n-p*f*k*n+d*q*k*n+e*f*w*n-d*r*w*n-p*r*h*g+e*q*h*g+p*c*k*g-b*q*k*g-e*c*w*g+b*r*w*g+p*f*h*m-d*q*h*m-p*c*l*m+b*q*l*m+d*c*w*m-b*f*w*m-e*f*h*a+d*r*h*a+e*c*l*a-b*r*l*a-d*c*k*a+b*f*k*a},inverse:function(a,b){b||(b=a);var c=a[0],h=a[1],n=a[2],d=a[3],f=a[4],l=a[5],g=a[6],e=a[7],r=a[8],k=a[9],m=a[10],p=a[11],q=a[12],w=a[13],v=a[14];a=a[15];var t=c*l-h*f,u=c*g-n*f,B=c*e-d*f,y=h*g-n*l,A=h*e-d*l,x=n*e-d*g,F=r*w-k*q,D=r*v-m*q,E=r*a-p*q,G=k*v-m*w,I=k*a-p*w,J=m*a-p*v,C=t*J-u*I+B*G+y*
E-A*D+x*F;if(!C)return null;C=1/C;b[0]=(l*J-g*I+e*G)*C;b[1]=(-h*J+n*I-d*G)*C;b[2]=(w*x-v*A+a*y)*C;b[3]=(-k*x+m*A-p*y)*C;b[4]=(-f*J+g*E-e*D)*C;b[5]=(c*J-n*E+d*D)*C;b[6]=(-q*x+v*B-a*u)*C;b[7]=(r*x-m*B+p*u)*C;b[8]=(f*I-l*E+e*F)*C;b[9]=(-c*I+h*E-d*F)*C;b[10]=(q*A-w*B+a*t)*C;b[11]=(-r*A+k*B-p*t)*C;b[12]=(-f*G+l*D-g*F)*C;b[13]=(c*G-h*D+n*F)*C;b[14]=(-q*y+w*u-v*t)*C;b[15]=(r*y-k*u+m*t)*C;return b},toRotationMat:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=
a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=r.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],h=a[1],n=a[2],d=a[4],f=a[5],l=a[6],g=a[8],e=a[9];a=a[10];var k=a*f-l*e,m=-a*d+l*g,p=e*d-f*g,q=c*k+h*m+n*p;if(!q)return null;q=1/q;b||(b=r.create());b[0]=k*q;b[1]=(-a*h+n*e)*q;b[2]=(l*h-n*f)*q;b[3]=m*q;b[4]=(a*c-n*g)*q;b[5]=
(-l*c+n*d)*q;b[6]=p*q;b[7]=(-e*c+h*g)*q;b[8]=(f*c-h*d)*q;return b},multiply:function(a,b,c){c||(c=a);var h=a[0],n=a[1],d=a[2],f=a[3],l=a[4],g=a[5],e=a[6],r=a[7],k=a[8],m=a[9],p=a[10],q=a[11],w=a[12],v=a[13],t=a[14];a=a[15];var u=b[0],B=b[1],y=b[2],A=b[3],x=b[4],F=b[5],D=b[6],E=b[7],G=b[8],I=b[9],J=b[10],C=b[11],S=b[12],T=b[13],U=b[14];b=b[15];c[0]=u*h+B*l+y*k+A*w;c[1]=u*n+B*g+y*m+A*v;c[2]=u*d+B*e+y*p+A*t;c[3]=u*f+B*r+y*q+A*a;c[4]=x*h+F*l+D*k+E*w;c[5]=x*n+F*g+D*m+E*v;c[6]=x*d+F*e+D*p+E*t;c[7]=x*f+
F*r+D*q+E*a;c[8]=G*h+I*l+J*k+C*w;c[9]=G*n+I*g+J*m+C*v;c[10]=G*d+I*e+J*p+C*t;c[11]=G*f+I*r+J*q+C*a;c[12]=S*h+T*l+U*k+b*w;c[13]=S*n+T*g+U*m+b*v;c[14]=S*d+T*e+U*p+b*t;c[15]=S*f+T*r+U*q+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var h=b[0],n=b[1];b=b[2];c[0]=a[0]*h+a[4]*n+a[8]*b+a[12];c[1]=a[1]*h+a[5]*n+a[9]*b+a[13];c[2]=a[2]*h+a[6]*n+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var h=b[0],n=b[1],d=b[2];b=b[3];c[0]=a[0]*h+a[4]*n+a[8]*d+a[12]*b;c[1]=a[1]*h+a[5]*n+a[9]*d+a[13]*
b;c[2]=a[2]*h+a[6]*n+a[10]*d+a[14]*b;c[3]=a[3]*h+a[7]*n+a[11]*d+a[15]*b;return c},translate:function(a,b,c){var h=b[0],n=b[1];b=b[2];var d,f,l,g,e,r,k,m,p,q,w,v;if(!c||a===c)return a[12]=a[0]*h+a[4]*n+a[8]*b+a[12],a[13]=a[1]*h+a[5]*n+a[9]*b+a[13],a[14]=a[2]*h+a[6]*n+a[10]*b+a[14],a[15]=a[3]*h+a[7]*n+a[11]*b+a[15],a;d=a[0];f=a[1];l=a[2];g=a[3];e=a[4];r=a[5];k=a[6];m=a[7];p=a[8];q=a[9];w=a[10];v=a[11];c[0]=d;c[1]=f;c[2]=l;c[3]=g;c[4]=e;c[5]=r;c[6]=k;c[7]=m;c[8]=p;c[9]=q;c[10]=w;c[11]=v;c[12]=d*h+e*
n+p*b+a[12];c[13]=f*h+r*n+q*b+a[13];c[14]=l*h+k*n+w*b+a[14];c[15]=g*h+m*n+v*b+a[15];return c},scale:function(a,b,c){var h=b[0],n=b[1];b=b[2];if(!c||a===c)return a[0]*=h,a[1]*=h,a[2]*=h,a[3]*=h,a[4]*=n,a[5]*=n,a[6]*=n,a[7]*=n,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*h;c[1]=a[1]*h;c[2]=a[2]*h;c[3]=a[3]*h;c[4]=a[4]*n;c[5]=a[5]*n;c[6]=a[6]*n;c[7]=a[7]*n;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*
a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,h){var n=c[0],d=c[1];c=c[2];var f=Math.sqrt(n*n+d*d+c*c),l,g,e,r,k,m,p,q,w,v,t,u,B,y,A,x,F,D,E,G;if(!f)return null;1!==f&&(f=1/f,n*=f,d*=f,c*=f);l=Math.sin(b);g=Math.cos(b);e=1-g;b=a[0];f=a[1];r=a[2];k=a[3];m=a[4];p=a[5];q=a[6];w=a[7];v=a[8];t=a[9];u=a[10];B=a[11];y=n*n*e+g;A=d*n*e+c*l;x=c*n*e-d*l;F=n*d*e-c*l;D=d*d*e+g;E=c*d*e+n*l;G=n*c*e+d*l;n=d*c*e-n*l;d=c*c*e+g;
h?a!==h&&(h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]):h=a;h[0]=b*y+m*A+v*x;h[1]=f*y+p*A+t*x;h[2]=r*y+q*A+u*x;h[3]=k*y+w*A+B*x;h[4]=b*F+m*D+v*E;h[5]=f*F+p*D+t*E;h[6]=r*F+q*D+u*E;h[7]=k*F+w*D+B*E;h[8]=b*G+m*n+v*d;h[9]=f*G+p*n+t*d;h[10]=r*G+q*n+u*d;h[11]=k*G+w*n+B*d;return h},rotateX:function(a,b,c){var h=Math.sin(b);b=Math.cos(b);var n=a[4],d=a[5],f=a[6],l=a[7],g=a[8],e=a[9],r=a[10],k=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=
n*b+g*h;c[5]=d*b+e*h;c[6]=f*b+r*h;c[7]=l*b+k*h;c[8]=n*-h+g*b;c[9]=d*-h+e*b;c[10]=f*-h+r*b;c[11]=l*-h+k*b;return c},rotateY:function(a,b,c){var h=Math.sin(b);b=Math.cos(b);var n=a[0],d=a[1],f=a[2],l=a[3],g=a[8],e=a[9],r=a[10],k=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=n*b+g*-h;c[1]=d*b+e*-h;c[2]=f*b+r*-h;c[3]=l*b+k*-h;c[8]=n*h+g*b;c[9]=d*h+e*b;c[10]=f*h+r*b;c[11]=l*h+k*b;return c},rotateZ:function(a,b,c){var h=Math.sin(b);b=Math.cos(b);
var n=a[0],d=a[1],f=a[2],l=a[3],g=a[4],e=a[5],r=a[6],k=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=n*b+g*h;c[1]=d*b+e*h;c[2]=f*b+r*h;c[3]=l*b+k*h;c[4]=n*-h+g*b;c[5]=d*-h+e*b;c[6]=f*-h+r*b;c[7]=l*-h+k*b;return c},frustum:function(a,b,c,h,n,d,f){f||(f=v.create());var l=b-a,g=h-c,e=d-n;f[0]=2*n/l;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*n/g;f[6]=0;f[7]=0;f[8]=(b+a)/l;f[9]=(h+c)/g;f[10]=-(d+n)/e;f[11]=-1;f[12]=0;f[13]=0;f[14]=-(d*n*2)/
e;f[15]=0;return f},perspective:function(a,b,c,h,n){a=c*Math.tan(a*Math.PI/360);b*=a;return v.frustum(-b,b,-a,a,c,h,n)},ortho:function(a,b,c,h,n,d,f){f||(f=v.create());var l=b-a,g=h-c,e=d-n;f[0]=2/l;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2/g;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=-2/e;f[11]=0;f[12]=-(a+b)/l;f[13]=-(h+c)/g;f[14]=-(d+n)/e;f[15]=1;return f},lookAt:function(a,b,c,h){h||(h=v.create());var n,d,f,l,g,e,r,k,m=a[0],p=a[1];a=a[2];f=c[0];l=c[1];d=c[2];r=b[0];c=b[1];n=b[2];if(m===r&&p===c&&a===n)return v.identity(h);
b=m-r;c=p-c;r=a-n;k=1/Math.sqrt(b*b+c*c+r*r);b*=k;c*=k;r*=k;n=l*r-d*c;d=d*b-f*r;f=f*c-l*b;(k=Math.sqrt(n*n+d*d+f*f))?(k=1/k,n*=k,d*=k,f*=k):f=d=n=0;l=c*f-r*d;g=r*n-b*f;e=b*d-c*n;(k=Math.sqrt(l*l+g*g+e*e))?(k=1/k,l*=k,g*=k,e*=k):e=g=l=0;h[0]=n;h[1]=l;h[2]=b;h[3]=0;h[4]=d;h[5]=g;h[6]=c;h[7]=0;h[8]=f;h[9]=e;h[10]=r;h[11]=0;h[12]=-(n*m+d*p+f*a);h[13]=-(l*m+g*p+e*a);h[14]=-(b*m+c*p+r*a);h[15]=1;return h},fromRotationTranslation:function(a,b,c){c||(c=v.create());var h=a[0],n=a[1],d=a[2],f=a[3],l=h+h,g=
n+n,e=d+d;a=h*l;var r=h*g,h=h*e,k=n*g,n=n*e,d=d*e,l=f*l,g=f*g,f=f*e;c[0]=1-(k+d);c[1]=r+f;c[2]=h-g;c[3]=0;c[4]=r-f;c[5]=1-(a+d);c[6]=n+l;c[7]=0;c[8]=h+g;c[9]=n-l;c[10]=1-(a+k);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},q={create:function(a){var b=new m(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=
a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,h){var n=new m(4);n[0]=a;n[1]=b;n[2]=c;n[3]=h;return n},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=q.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},B=q.identity();q.calculateW=function(a,b){var c=a[0],h=a[1],n=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-h*h-n*n)),a;b[0]=c;b[1]=h;b[2]=n;b[3]=-Math.sqrt(Math.abs(1-c*c-h*h-n*n));return b};q.dot=function(a,b){return a[0]*b[0]+
a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.inverse=function(a,b){var c=a[0],h=a[1],n=a[2],d=a[3],c=(c=c*c+h*h+n*n+d*d)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};q.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};q.length=function(a){var b=a[0],c=a[1],h=a[2];a=a[3];return Math.sqrt(b*b+c*c+h*h+a*a)};q.normalize=function(a,b){b||(b=a);var c=a[0],h=a[1],
n=a[2];a=a[3];var d=Math.sqrt(c*c+h*h+n*n+a*a);if(0===d)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;d=1/d;b[0]=c*d;b[1]=h*d;b[2]=n*d;b[3]=a*d;return b};q.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};q.multiply=function(a,b,c){c||(c=a);var h=a[0],d=a[1],f=a[2];a=a[3];var l=b[0],g=b[1],e=b[2];b=b[3];c[0]=h*b+a*l+d*e-f*g;c[1]=d*b+a*g+f*l-h*e;c[2]=f*b+a*e+h*g-d*l;c[3]=a*b-h*l-d*g-f*e;return c};q.multiplyVec3=
function(a,b,c){c||(c=b);var h=b[0],d=b[1],f=b[2];b=a[0];var l=a[1],g=a[2];a=a[3];var e=a*h+l*f-g*d,r=a*d+g*h-b*f,k=a*f+b*d-l*h,h=-b*h-l*d-g*f;c[0]=e*a+h*-b+r*-g-k*-l;c[1]=r*a+h*-l+k*-b-e*-g;c[2]=k*a+h*-g+e*-l-r*-b;return c};q.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};q.toMat3=function(a,b){b||(b=r.create());var c=a[0],h=a[1],d=a[2],f=a[3],l=c+c,g=h+h,e=d+d;a=c*l;var k=c*g,c=c*e,m=h*g,h=h*e,d=d*e,l=f*l,g=f*
g,f=f*e;b[0]=1-(m+d);b[1]=k+f;b[2]=c-g;b[3]=k-f;b[4]=1-(a+d);b[5]=h+l;b[6]=c+g;b[7]=h-l;b[8]=1-(a+m);return b};q.toMat4=function(a,b){b||(b=v.create());var c=a[0],h=a[1],d=a[2],f=a[3],l=c+c,g=h+h,e=d+d;a=c*l;var r=c*g,c=c*e,k=h*g,h=h*e,d=d*e,l=f*l,g=f*g,f=f*e;b[0]=1-(k+d);b[1]=r+f;b[2]=c-g;b[3]=0;b[4]=r-f;b[5]=1-(a+d);b[6]=h+l;b[7]=0;b[8]=c+g;b[9]=h-l;b[10]=1-(a+k);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};q.slerp=function(a,b,c,h){h||(h=a);var d=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],f,
l;if(1<=Math.abs(d))return h!==a&&(h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3]),h;f=Math.acos(d);l=Math.sqrt(1-d*d);if(.001>Math.abs(l))return h[0]=.5*a[0]+.5*b[0],h[1]=.5*a[1]+.5*b[1],h[2]=.5*a[2]+.5*b[2],h[3]=.5*a[3]+.5*b[3],h;d=Math.sin((1-c)*f)/l;c=Math.sin(c*f)/l;h[0]=a[0]*d+b[0]*c;h[1]=a[1]*d+b[1]*c;h[2]=a[2]*d+b[2]*c;h[3]=a[3]*d+b[3]*c;return h};q.fromRotationMatrix=function(a,b){b||(b=q.create());var c=a[0]+a[4]+a[8],h;if(0<c)h=Math.sqrt(c+1),b[3]=.5*h,h=.5/h,b[0]=(a[7]-a[5])*h,b[1]=(a[2]-a[6])*
h,b[2]=(a[3]-a[1])*h;else{h=q.fromRotationMatrix.s_iNext=q.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=h[c],f=h[d];h=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*f+f]+1);b[c]=.5*h;h=.5/h;b[3]=(a[3*f+d]-a[3*d+f])*h;b[d]=(a[3*d+c]+a[3*c+d])*h;b[f]=(a[3*f+c]+a[3*c+f])*h}return b};r.toQuat4=q.fromRotationMatrix;(function(){var a=r.create();q.fromAxes=function(b,c,h,d){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=h[0];a[4]=h[1];a[7]=h[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return q.fromRotationMatrix(a,
d)}})();q.identity=function(a){a||(a=q.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};q.fromAngleAxis=function(a,b,c){c||(c=q.create());a*=.5;var h=Math.sin(a);c[3]=Math.cos(a);c[0]=h*b[0];c[1]=h*b[1];c[2]=h*b[2];return c};q.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=k.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};q.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var A={create:function(a){var b=
new m(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,h){var d=new m(4);d[0]=a;d[1]=b;d[2]=c;d[3]=h;return d},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=A.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,
b){b||(b=a);var c=a[0],h=a[1],d=a[2];a=a[3];var f=c*a-d*h;if(!f)return null;f=1/f;b[0]=a*f;b[1]=-h*f;b[2]=-d*f;b[3]=c*f;return b},multiply:function(a,b,c){c||(c=a);var h=a[0],d=a[1],f=a[2];a=a[3];c[0]=h*b[0]+d*b[2];c[1]=h*b[1]+d*b[3];c[2]=f*b[0]+a*b[2];c[3]=f*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var h=a[0],d=a[1],f=a[2];a=a[3];var l=Math.sin(b);b=Math.cos(b);c[0]=h*b+d*l;c[1]=h*-l+d*b;c[2]=f*b+a*l;c[3]=f*-l+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var h=b[0];b=b[1];c[0]=
h*a[0]+b*a[1];c[1]=h*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var h=a[1],d=a[2],f=a[3],l=b[0];b=b[1];c[0]=a[0]*l;c[1]=h*b;c[2]=d*l;c[3]=f*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};g=g?"":"d";e["glMath"+g]=k;e["vec2"+g]={create:function(a){var b=new m(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new m(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,
b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var h=a[0]-b[0];a=a[1]-b[1];b=h*h+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=h*
b;c[1]=a*b;return c},lerp:function(a,b,c,h){h||(h=a);h[0]=a[0]+c*(b[0]-a[0]);h[1]=a[1]+c*(b[1]-a[1]);return h},str:function(a){return"["+a[0]+", "+a[1]+"]"}};e["vec3"+g]=p;e["vec4"+g]={create:function(a){var b=new m(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,h){var d=new m(4);d[0]=a;d[1]=b;d[2]=c;d[3]=h;return d},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,
b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];
return b},set4:function(a,b,c,h,d){d[0]=a;d[1]=b;d[2]=c;d[3]=h;return d},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,h){h||(h=a);h[0]=a[0]+c*(b[0]-a[0]);h[1]=a[1]+c*(b[1]-a[1]);h[2]=a[2]+c*(b[2]-a[2]);h[3]=a[3]+c*(b[3]-a[3]);return h},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};e["mat2"+g]=A;e["mat3"+g]=r;e["mat4"+g]=v;e["quat4"+g]=q});return x})},"esri/views/3d/support/mathUtils":function(){define(["require","exports",
"../lib/glMatrix"],function(x,e,g){function k(d){return Math.asin(1<d?1:-1>d?-1:d)}function m(d){return Math.acos(1<d?1:-1>d?-1:d)}function p(d,l,f){return d<l?l:d>f?f:d}function t(d){for(var l in d){var f=d[l];f instanceof Function&&(d[l]=f.bind(d))}return d}Object.defineProperty(e,"__esModule",{value:!0});e.deg2rad=function(d){return d*Math.PI/180};e.rad2deg=function(d){return 180*d/Math.PI};e.asin=k;e.acos=m;e.sign=Math.sign||function(d){return+(0<d)-+(0>d)||+d};e.log2=Math.log2||function(d){return Math.log(d)/
Math.LN2};e.fovx2fovy=function(d,l,f){return 2*Math.atan(f*Math.tan(.5*d)/l)};e.fovy2fovx=function(d,l,f){return 2*Math.atan(l*Math.tan(.5*d)/f)};e.makeOrthonormal=function(d,l,f){f=f||d;var e=g.vec3d.dot(d,l);g.vec3d.set3(d[0]-e*l[0],d[1]-e*l[1],d[2]-e*l[2],f);g.vec3d.normalize(f)};e.tangentFrame=function(d,l,f){Math.abs(d[0])>Math.abs(d[1])?g.vec3d.set3(0,1,0,l):g.vec3d.set3(1,0,0,l);g.vec3d.cross(d,l,f);g.vec3d.normalize(l);g.vec3d.cross(f,d,l);g.vec3d.normalize(f)};e.cartesianToSpherical=function(d,
l){var f=g.vec3d.length(d),e=k(d[2]/f);g.vec3d.set3(f,e,Math.atan2(d[1]/f,d[0]/f),l)};e.sphericalToCartesian=function(d,l){var f=d[0],e=d[1];d=d[2];var k=Math.cos(e);g.vec3d.set3(f*k*Math.cos(d),f*k*Math.sin(d),f*Math.sin(e),l)};e.lerp=function(d,l,f){return d+(l-d)*f};e.bilerp=function(d,l,f,g,e,k){d+=(l-d)*e;return d+(f+(g-f)*e-d)*k};e.slerp=function(d,l,f,e){void 0===e&&(e=d);var k=g.vec3d.length(d),r=g.vec3d.length(l),m=g.vec3d.dot(d,l)/(k*r);if(.9999999999999999>m){var m=Math.acos(m),p=((1-f)*
k+f*r)/Math.sin(m),r=p/r*Math.sin(f*m);g.vec3d.scale(d,p/k*Math.sin((1-f)*m),y);g.vec3d.scale(l,r,w);return g.vec3d.add(y,w,e)}return g.vec3d.lerp(d,l,f,e)};e.angle=function(d,l,f){d=g.vec3d.normalize(d,y);l=g.vec3d.normalize(l,w);var e=m(g.vec3d.dot(d,l));return f&&(d=g.vec3d.cross(d,l,u),0>g.vec3d.dot(d,f))?-e:e};e.clamp=p;e.isFinite=Number.isFinite||function(d){return"number"===typeof d&&window.isFinite(d)};e.isNaN=Number.isNaN||function(d){return d!==d};e.makePiecewiseLinearFunction=function(d){var l=
d.length;return function(f){var g=0;if(f<=d[0][0])return d[0][1];if(f>=d[l-1][0])return d[l-1][1];for(;f>d[g][0];)g++;var e=d[g][0];f=(e-f)/(e-d[g-1][0]);return f*d[g-1][1]+(1-f)*d[g][1]}};e.vectorEquals=function(d,l){if(null==d||null==l)return d!==l;if(d.length!==l.length)return!1;for(var f=0;f<d.length;f++)if(d[f]!==l[f])return!1;return!0};e.floatEqualRelative=function(d,l,f){void 0===f&&(f=1E-6);if(e.isNaN(d)||e.isNaN(l))return!1;if(d===l)return!0;var g=Math.abs(d-l),k=Math.abs(d),m=Math.abs(l);
if(0===d||0===l||1E-12>k&&1E-12>m){if(g>.01*f)return!1}else if(g/(k+m)>f)return!1;return!0};e.floatEqualAbsolute=function(d,l,f){void 0===f&&(f=1E-6);return e.isNaN(d)||e.isNaN(l)?!1:(d>l?d-l:l-d)<=f};x=function(){function d(d,f){this.min=d;this.max=f;this.range=f-d}d.prototype.ndiff=function(d,f){void 0===f&&(f=0);return Math.ceil((d-f)/this.range)*this.range+f};d.prototype._normalize=function(d,f,g,e){void 0===e&&(e=0);g-=e;g<d?g+=this.ndiff(d-g):g>f&&(g-=this.ndiff(g-f));return g+e};d.prototype.normalize=
function(d,f){return this._normalize(this.min,this.max,d,f)};d.prototype.clamp=function(d,f){void 0===f&&(f=0);return p(d-f,this.min,this.max)+f};d.prototype.monotonic=function(d,f,g){return d<f?f:f+this.ndiff(d-f,g)};d.prototype.minimalMonotonic=function(d,f,g){return this._normalize(d,d+this.range,f,g)};d.prototype.center=function(d,f,g){f=this.monotonic(d,f,g);return this.normalize((d+f)/2,g)};d.prototype.diff=function(d,f,g){return this.monotonic(d,f,g)-d};d.prototype.contains=function(d,f,g){f=
this.minimalMonotonic(d,f);g=this.minimalMonotonic(d,g);return g>d&&g<f};return d}();e.Cyclical=x;e.cyclical2PI=t(new x(0,2*Math.PI));e.cyclicalPI=t(new x(-Math.PI,Math.PI));e.cyclicalDeg=t(new x(0,360));var u=g.vec3d.create(),y=g.vec3d.create(),w=g.vec3d.create()})},"esri/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../lib/glMatrix"],function(x,e,g){function k(g){void 0===g&&(g=e.UP);return[g[0],g[1],g[2],g[3]]}function m(e,d,l){void 0===l&&(l=k());g.vec3d.set(d,
l);l[3]=-g.vec3d.dot(d,e);return l}function p(e,d,l,f){void 0===f&&(f=k());g.vec3d.cross(d,e,y);return m(l,g.vec3d.normalize(y),f)}Object.defineProperty(e,"__esModule",{value:!0});e.create=k;e.fromValues=function(g,d,l,f,e){void 0===e&&(e=k());e[0]=g;e[1]=d;e[2]=l;e[3]=f;return e};e.fromNormalAndOffset=function(e,d,l){void 0===l&&(l=k());g.vec3d.set(e,l);l[3]=d;return l};e.fromPositionAndNormal=m;e.projectVector=function(e,d,l){void 0===l&&(l=d);return g.vec3d.cross(e,g.vec3d.cross(d,e,u),l)};e.distance=
function(e,d){return g.vec3d.dot(e,d)+e[3]};e.fromPoints=function(e,d,l,f){void 0===f&&(f=k());return p(g.vec3d.subtract(e,d,t),g.vec3d.subtract(l,d,u),e,f)};e.set=function(g,d){g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];return g};e.negate=function(g,d){void 0===d&&(d=g);d[0]=-g[0];d[1]=-g[1];d[2]=-g[2];d[3]=-g[3];return d};e.fromVectorsAndPoint=p;e.intersectRay=function(e,d,l,f){var k=g.vec3d.dot(e,l);if(0===k)return!1;e=-(g.vec3d.dot(e,d)+e[3])/k;g.vec3d.add(d,g.vec3d.scale(l,e,f),f);return!0};e.UP=
[0,0,1,0];var t=g.vec3d.create(),u=g.vec3d.create(),y=g.vec3d.create()})},"esri/views/3d/support/geometryUtils/triangle":function(){define(["require","exports","../../lib/glMatrix","./lineSegment"],function(x,e,g,k){function m(d,f,e){var l=g.vec2d.dist(d,f);f=g.vec2d.dist(f,e);d=g.vec2d.dist(e,d);e=(l+f+d)/2;return Math.sqrt(e*(e-l)*(e-f)*(e-d))}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(d,f,e){void 0===d&&(d=g.vec3d.create());void 0===f&&(f=g.vec3d.create());void 0===e&&(e=
g.vec3d.create());return{p0:d,p1:f,p2:e}};e.distance2=function(e,m){var r=e.p0,v=e.p1;e=e.p2;var x=g.vec3d.subtract(v,r,p),a=g.vec3d.subtract(e,v,t),b=g.vec3d.subtract(r,e,u),c=g.vec3d.subtract(m,r,y),h=g.vec3d.subtract(m,v,w),n=g.vec3d.subtract(m,e,d),z=g.vec3d.cross(x,b),H=g.vec3d.dot(g.vec3d.cross(x,z,l),c),h=g.vec3d.dot(g.vec3d.cross(a,z,l),h),n=g.vec3d.dot(g.vec3d.cross(b,z,l),n);if(0<H&&0<h&&0<n)return m=g.vec3d.dot(z,c),m*m/g.vec3d.dot(z,z);r=k.distance2(k.fromOriginAndVector(r,x,f),m);v=k.distance2(k.fromOriginAndVector(v,
a,f),m);m=k.distance2(k.fromOriginAndVector(e,b,f),m);return Math.min(r,v,m)};e.areaPoints2d=m;e.area2d=function(d){return m(d.p0,d.p1,d.p2)};var p=g.vec3d.create(),t=g.vec3d.create(),u=g.vec3d.create(),y=g.vec3d.create(),w=g.vec3d.create(),d=g.vec3d.create(),l=g.vec3d.create(),f=k.create()})},"esri/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var x={};(function(e,g){g(e,!0);g(e,!1)})(x,function(e,g){var k={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),
b=new Int32Array(a.buffer);k.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var h=a[0];return h*(1.5-.5*c*h*h)}}else k.invsqrt=function(a){return 1/Math.sqrt(a)}})();var m=Array;"undefined"!=typeof Float32Array&&(m=g?Float32Array:Array);var p={create:function(a){var b=new m(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var h=new m(3);h[0]=a;h[1]=b;h[2]=c;return h},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,h){h[0]=
a;h[1]=b;h[2]=c;return h},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=
Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],h=a[1];a=a[2];var d=Math.sqrt(c*c+h*h+a*a);if(!d)return b[0]=0,b[1]=0,b[2]=0,b;if(1===d)return b[0]=c,b[1]=h,b[2]=a,b;d=1/d;b[0]=c*d;b[1]=
h*d;b[2]=a*d;return b},cross:function(a,b,c){c||(c=a);var h=a[0],d=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];c[0]=d*b-a*g;c[1]=a*f-h*b;c[2]=h*g-d*f;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var h=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(h*h+d*d+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=h*b;c[1]=
d*b;c[2]=a*b;return c},lerp:function(a,b,c,h){h||(h=a);h[0]=a[0]+c*(b[0]-a[0]);h[1]=a[1]+c*(b[1]-a[1]);h[2]=a[2]+c*(b[2]-a[2]);return h},dist:function(a,b){var c=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+h*h+a*a)},dist2:function(a,b){var c=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return c*c+h*h+a*a}},t=null,u=new m(4);p.unproject=function(a,b,c,h,d){d||(d=a);t||(t=v.create());var f=t;u[0]=2*(a[0]-h[0])/h[2]-1;u[1]=2*(a[1]-h[1])/h[3]-1;u[2]=2*a[2]-1;u[3]=1;v.multiply(c,b,f);if(!v.inverse(f))return null;
v.multiplyVec4(f,u);if(0===u[3])return null;d[0]=u[0]/u[3];d[1]=u[1]/u[3];d[2]=u[2]/u[3];return d};var y=p.createFrom(1,0,0),w=p.createFrom(0,1,0),d=p.createFrom(0,0,1);p.rotationTo=function(a,b,c){c||(c=q.create());var h=p.dot(a,b),f=p.create();if(1<=h)q.set(B,c);else if(-.999999>h)p.cross(y,a,f),1E-6>f.length&&p.cross(w,a,f),1E-6>f.length&&p.cross(d,a,f),p.normalize(f),q.fromAxisAngle(f,Math.PI,c);else{var h=Math.sqrt(2*(1+h)),g=1/h;p.cross(a,b,f);c[0]=f[0]*g;c[1]=f[1]*g;c[2]=f[2]*g;c[3]=.5*h;q.normalize(c)}1<
c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var l=p.create(),f=p.create();p.project=function(a,b,c,h){h||(h=a);p.direction(b,c,l);p.subtract(a,b,f);a=p.dot(l,f);p.scale(l,a,h);p.add(h,b,h)};p.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var r={create:function(a){var b=new m(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,h,d,f,g,e,l){var n=new m(9);n[0]=a;n[1]=
b;n[2]=c;n[3]=h;n[4]=d;n[5]=f;n[6]=g;n[7]=e;n[8]=l;return n},determinant:function(a){var b=a[3],c=a[4],h=a[5],d=a[6],f=a[7],g=a[8];return a[0]*(g*c-h*f)+a[1]*(-g*b+h*d)+a[2]*(f*b-c*d)},inverse:function(a,b){var c=a[0],h=a[1],d=a[2],f=a[3],g=a[4],e=a[5],l=a[6],k=a[7];a=a[8];var m=a*g-e*k,p=-a*f+e*l,q=k*f-g*l,t=c*m+h*p+d*q;if(!t)return null;t=1/t;b||(b=r.create());b[0]=m*t;b[1]=(-a*h+d*k)*t;b[2]=(e*h-d*g)*t;b[3]=p*t;b[4]=(a*c-d*l)*t;b[5]=(-e*c+d*f)*t;b[6]=q*t;b[7]=(-k*c+h*l)*t;b[8]=(g*c-h*f)*t;return b},
multiply:function(a,b,c){c||(c=a);var h=a[0],d=a[1],f=a[2],g=a[3],e=a[4],l=a[5],k=a[6],m=a[7];a=a[8];var r=b[0],p=b[1],q=b[2],t=b[3],w=b[4],v=b[5],u=b[6],y=b[7];b=b[8];c[0]=r*h+p*g+q*k;c[1]=r*d+p*e+q*m;c[2]=r*f+p*l+q*a;c[3]=t*h+w*g+v*k;c[4]=t*d+w*e+v*m;c[5]=t*f+w*l+v*a;c[6]=u*h+y*g+b*k;c[7]=u*d+y*e+b*m;c[8]=u*f+y*l+b*a;return c},multiplyVec2:function(a,b,c){c||(c=b);var h=b[0];b=b[1];c[0]=h*a[0]+b*a[3]+a[6];c[1]=h*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var h=b[0],d=b[1];
b=b[2];c[0]=h*a[0]+d*a[3]+b*a[6];c[1]=h*a[1]+d*a[4]+b*a[7];c[2]=h*a[2]+d*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=r.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],h=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=h;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=
a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=v.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},v={create:function(a){var b=new m(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],
b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,h,d,f,g,e,l,k,r,p,q,t,w,v){var n=new m(16);n[0]=a;n[1]=b;n[2]=c;n[3]=h;n[4]=d;
n[5]=f;n[6]=g;n[7]=e;n[8]=l;n[9]=k;n[10]=r;n[11]=p;n[12]=q;n[13]=t;n[14]=w;n[15]=v;return n},createFromMatrixRowMajor:function(a){var b=new m(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new m(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=
a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=v.create());a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],h=a[3],d=a[6],f=a[7],g=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=d;a[11]=a[14];a[12]=h;a[13]=f;a[14]=g;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},
determinant:function(a){var b=a[0],c=a[1],h=a[2],d=a[3],f=a[4],g=a[5],e=a[6],l=a[7],k=a[8],m=a[9],r=a[10],p=a[11],q=a[12],t=a[13],w=a[14];a=a[15];return q*m*e*d-k*t*e*d-q*g*r*d+f*t*r*d+k*g*w*d-f*m*w*d-q*m*h*l+k*t*h*l+q*c*r*l-b*t*r*l-k*c*w*l+b*m*w*l+q*g*h*p-f*t*h*p-q*c*e*p+b*t*e*p+f*c*w*p-b*g*w*p-k*g*h*a+f*m*h*a+k*c*e*a-b*m*e*a-f*c*r*a+b*g*r*a},inverse:function(a,b){b||(b=a);var c=a[0],h=a[1],d=a[2],f=a[3],g=a[4],e=a[5],l=a[6],k=a[7],m=a[8],r=a[9],p=a[10],q=a[11],t=a[12],w=a[13],v=a[14];a=a[15];var u=
c*e-h*g,y=c*l-d*g,B=c*k-f*g,x=h*l-d*e,A=h*k-f*e,K=d*k-f*l,F=m*w-r*t,D=m*v-p*t,E=m*a-q*t,G=r*v-p*w,I=r*a-q*w,J=p*a-q*v,C=u*J-y*I+B*G+x*E-A*D+K*F;if(!C)return null;C=1/C;b[0]=(e*J-l*I+k*G)*C;b[1]=(-h*J+d*I-f*G)*C;b[2]=(w*K-v*A+a*x)*C;b[3]=(-r*K+p*A-q*x)*C;b[4]=(-g*J+l*E-k*D)*C;b[5]=(c*J-d*E+f*D)*C;b[6]=(-t*K+v*B-a*y)*C;b[7]=(m*K-p*B+q*y)*C;b[8]=(g*I-e*E+k*F)*C;b[9]=(-c*I+h*E-f*F)*C;b[10]=(t*A-w*B+a*u)*C;b[11]=(-m*A+r*B-q*u)*C;b[12]=(-g*G+e*D-l*F)*C;b[13]=(c*G-h*D+d*F)*C;b[14]=(-t*x+w*y-v*u)*C;b[15]=
(m*x-r*y+p*u)*C;return b},toRotationMat:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=r.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],h=a[1],d=a[2],f=a[4],g=a[5],e=a[6],l=a[8],k=a[9];a=a[10];var m=a*g-e*k,p=-a*f+e*l,q=
k*f-g*l,t=c*m+h*p+d*q;if(!t)return null;t=1/t;b||(b=r.create());b[0]=m*t;b[1]=(-a*h+d*k)*t;b[2]=(e*h-d*g)*t;b[3]=p*t;b[4]=(a*c-d*l)*t;b[5]=(-e*c+d*f)*t;b[6]=q*t;b[7]=(-k*c+h*l)*t;b[8]=(g*c-h*f)*t;return b},multiply:function(a,b,c){c||(c=a);var h=a[0],d=a[1],f=a[2],g=a[3],e=a[4],l=a[5],k=a[6],m=a[7],r=a[8],p=a[9],q=a[10],t=a[11],w=a[12],v=a[13],u=a[14];a=a[15];var y=b[0],B=b[1],x=b[2],A=b[3],K=b[4],F=b[5],D=b[6],E=b[7],G=b[8],I=b[9],J=b[10],C=b[11],S=b[12],T=b[13],U=b[14];b=b[15];c[0]=y*h+B*e+x*r+
A*w;c[1]=y*d+B*l+x*p+A*v;c[2]=y*f+B*k+x*q+A*u;c[3]=y*g+B*m+x*t+A*a;c[4]=K*h+F*e+D*r+E*w;c[5]=K*d+F*l+D*p+E*v;c[6]=K*f+F*k+D*q+E*u;c[7]=K*g+F*m+D*t+E*a;c[8]=G*h+I*e+J*r+C*w;c[9]=G*d+I*l+J*p+C*v;c[10]=G*f+I*k+J*q+C*u;c[11]=G*g+I*m+J*t+C*a;c[12]=S*h+T*e+U*r+b*w;c[13]=S*d+T*l+U*p+b*v;c[14]=S*f+T*k+U*q+b*u;c[15]=S*g+T*m+U*t+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var h=b[0],d=b[1];b=b[2];c[0]=a[0]*h+a[4]*d+a[8]*b+a[12];c[1]=a[1]*h+a[5]*d+a[9]*b+a[13];c[2]=a[2]*h+a[6]*d+a[10]*b+a[14];return c},
multiplyVec4:function(a,b,c){c||(c=b);var h=b[0],d=b[1],f=b[2];b=b[3];c[0]=a[0]*h+a[4]*d+a[8]*f+a[12]*b;c[1]=a[1]*h+a[5]*d+a[9]*f+a[13]*b;c[2]=a[2]*h+a[6]*d+a[10]*f+a[14]*b;c[3]=a[3]*h+a[7]*d+a[11]*f+a[15]*b;return c},translate:function(a,b,c){var h=b[0],d=b[1];b=b[2];var f,g,e,l,k,m,r,p,q,t,w,v;if(!c||a===c)return a[12]=a[0]*h+a[4]*d+a[8]*b+a[12],a[13]=a[1]*h+a[5]*d+a[9]*b+a[13],a[14]=a[2]*h+a[6]*d+a[10]*b+a[14],a[15]=a[3]*h+a[7]*d+a[11]*b+a[15],a;f=a[0];g=a[1];e=a[2];l=a[3];k=a[4];m=a[5];r=a[6];
p=a[7];q=a[8];t=a[9];w=a[10];v=a[11];c[0]=f;c[1]=g;c[2]=e;c[3]=l;c[4]=k;c[5]=m;c[6]=r;c[7]=p;c[8]=q;c[9]=t;c[10]=w;c[11]=v;c[12]=f*h+k*d+q*b+a[12];c[13]=g*h+m*d+t*b+a[13];c[14]=e*h+r*d+w*b+a[14];c[15]=l*h+p*d+v*b+a[15];return c},scale:function(a,b,c){var d=b[0],f=b[1];b=b[2];if(!c||a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=f,a[5]*=f,a[6]*=f,a[7]*=f,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*f;c[5]=a[5]*f;c[6]=a[6]*f;c[7]=a[7]*f;c[8]=a[8]*
b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,c,d){var h=c[0],f=c[1];c=c[2];var g=Math.sqrt(h*h+f*f+c*c),e,l,k,m,r,p,q,t,w,v,u,y,B,x,A,K,F,D,E,G;if(!g)return null;1!==g&&(g=1/g,h*=g,f*=g,c*=g);e=Math.sin(b);l=Math.cos(b);k=1-l;b=a[0];g=a[1];m=a[2];r=a[3];
p=a[4];q=a[5];t=a[6];w=a[7];v=a[8];u=a[9];y=a[10];B=a[11];x=h*h*k+l;A=f*h*k+c*e;K=c*h*k-f*e;F=h*f*k-c*e;D=f*f*k+l;E=c*f*k+h*e;G=h*c*k+f*e;h=f*c*k-h*e;f=c*c*k+l;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*x+p*A+v*K;d[1]=g*x+q*A+u*K;d[2]=m*x+t*A+y*K;d[3]=r*x+w*A+B*K;d[4]=b*F+p*D+v*E;d[5]=g*F+q*D+u*E;d[6]=m*F+t*D+y*E;d[7]=r*F+w*D+B*E;d[8]=b*G+p*h+v*f;d[9]=g*G+q*h+u*f;d[10]=m*G+t*h+y*f;d[11]=r*G+w*h+B*f;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var f=
a[4],g=a[5],e=a[6],l=a[7],k=a[8],m=a[9],r=a[10],p=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=f*b+k*d;c[5]=g*b+m*d;c[6]=e*b+r*d;c[7]=l*b+p*d;c[8]=f*-d+k*b;c[9]=g*-d+m*b;c[10]=e*-d+r*b;c[11]=l*-d+p*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var f=a[0],g=a[1],e=a[2],l=a[3],k=a[8],m=a[9],r=a[10],p=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=
f*b+k*-d;c[1]=g*b+m*-d;c[2]=e*b+r*-d;c[3]=l*b+p*-d;c[8]=f*d+k*b;c[9]=g*d+m*b;c[10]=e*d+r*b;c[11]=l*d+p*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var f=a[0],g=a[1],e=a[2],l=a[3],k=a[4],m=a[5],r=a[6],p=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=f*b+k*d;c[1]=g*b+m*d;c[2]=e*b+r*d;c[3]=l*b+p*d;c[4]=f*-d+k*b;c[5]=g*-d+m*b;c[6]=e*-d+r*b;c[7]=l*-d+p*b;return c},frustum:function(a,b,c,d,f,g,e){e||(e=v.create());
var h=b-a,l=d-c,n=g-f;e[0]=2*f/h;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*f/l;e[6]=0;e[7]=0;e[8]=(b+a)/h;e[9]=(d+c)/l;e[10]=-(g+f)/n;e[11]=-1;e[12]=0;e[13]=0;e[14]=-(g*f*2)/n;e[15]=0;return e},perspective:function(a,b,c,d,f){a=c*Math.tan(a*Math.PI/360);b*=a;return v.frustum(-b,b,-a,a,c,d,f)},ortho:function(a,b,c,d,f,g,e){e||(e=v.create());var h=b-a,l=d-c,n=g-f;e[0]=2/h;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2/l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=-2/n;e[11]=0;e[12]=-(a+b)/h;e[13]=-(d+c)/l;e[14]=-(g+f)/n;e[15]=
1;return e},lookAt:function(a,b,c,d){d||(d=v.create());var h,f,e,g,l,k,m,r,p=a[0],q=a[1];a=a[2];e=c[0];g=c[1];f=c[2];m=b[0];c=b[1];h=b[2];if(p===m&&q===c&&a===h)return v.identity(d);b=p-m;c=q-c;m=a-h;r=1/Math.sqrt(b*b+c*c+m*m);b*=r;c*=r;m*=r;h=g*m-f*c;f=f*b-e*m;e=e*c-g*b;(r=Math.sqrt(h*h+f*f+e*e))?(r=1/r,h*=r,f*=r,e*=r):e=f=h=0;g=c*e-m*f;l=m*h-b*e;k=b*f-c*h;(r=Math.sqrt(g*g+l*l+k*k))?(r=1/r,g*=r,l*=r,k*=r):k=l=g=0;d[0]=h;d[1]=g;d[2]=b;d[3]=0;d[4]=f;d[5]=l;d[6]=c;d[7]=0;d[8]=e;d[9]=k;d[10]=m;d[11]=
0;d[12]=-(h*p+f*q+e*a);d[13]=-(g*p+l*q+k*a);d[14]=-(b*p+c*q+m*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=v.create());var d=a[0],f=a[1],e=a[2],g=a[3],l=d+d,k=f+f,m=e+e;a=d*l;var r=d*k,d=d*m,p=f*k,f=f*m,e=e*m,l=g*l,k=g*k,g=g*m;c[0]=1-(p+e);c[1]=r+g;c[2]=d-k;c[3]=0;c[4]=r-g;c[5]=1-(a+e);c[6]=f+l;c[7]=0;c[8]=d+k;c[9]=f-l;c[10]=1-(a+p);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+
a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},q={create:function(a){var b=new m(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var h=new m(4);h[0]=a;h[1]=b;h[2]=c;h[3]=d;return h},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=q.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},B=q.identity();q.calculateW=function(a,b){var c=a[0],
d=a[1],f=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-f*f)),a;b[0]=c;b[1]=d;b[2]=f;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-f*f));return b};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.inverse=function(a,b){var c=a[0],d=a[1],f=a[2],e=a[3],c=(c=c*c+d*d+f*f+e*e)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};q.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];
b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};q.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};q.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],f=a[2];a=a[3];var e=Math.sqrt(c*c+d*d+f*f+a*a);if(0===e)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;e=1/e;b[0]=c*e;b[1]=d*e;b[2]=f*e;b[3]=a*e;return b};q.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};q.multiply=function(a,
b,c){c||(c=a);var d=a[0],f=a[1],e=a[2];a=a[3];var g=b[0],l=b[1],k=b[2];b=b[3];c[0]=d*b+a*g+f*k-e*l;c[1]=f*b+a*l+e*g-d*k;c[2]=e*b+a*k+d*l-f*g;c[3]=a*b-d*g-f*l-e*k;return c};q.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],f=b[1],e=b[2];b=a[0];var g=a[1],l=a[2];a=a[3];var k=a*d+g*e-l*f,m=a*f+l*d-b*e,r=a*e+b*f-g*d,d=-b*d-g*f-l*e;c[0]=k*a+d*-b+m*-l-r*-g;c[1]=m*a+d*-g+r*-b-k*-l;c[2]=r*a+d*-l+k*-g-m*-b;return c};q.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;
c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};q.toMat3=function(a,b){b||(b=r.create());var c=a[0],d=a[1],f=a[2],e=a[3],g=c+c,l=d+d,k=f+f;a=c*g;var m=c*l,c=c*k,p=d*l,d=d*k,f=f*k,g=e*g,l=e*l,e=e*k;b[0]=1-(p+f);b[1]=m+e;b[2]=c-l;b[3]=m-e;b[4]=1-(a+f);b[5]=d+g;b[6]=c+l;b[7]=d-g;b[8]=1-(a+p);return b};q.toMat4=function(a,b){b||(b=v.create());var c=a[0],d=a[1],f=a[2],e=a[3],g=c+c,l=d+d,k=f+f;a=c*g;var m=c*l,c=c*k,r=d*l,d=d*k,f=f*k,g=e*g,l=e*l,e=e*k;b[0]=1-(r+f);b[1]=m+e;b[2]=c-l;b[3]=0;b[4]=m-e;b[5]=1-
(a+f);b[6]=d+g;b[7]=0;b[8]=c+l;b[9]=d-g;b[10]=1-(a+r);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};q.slerp=function(a,b,c,d){d||(d=a);var f=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],h,e;if(1<=Math.abs(f))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;h=Math.acos(f);e=Math.sqrt(1-f*f);if(.001>Math.abs(e))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;f=Math.sin((1-c)*h)/e;c=Math.sin(c*h)/e;d[0]=a[0]*f+b[0]*c;d[1]=a[1]*f+b[1]*c;d[2]=a[2]*f+
b[2]*c;d[3]=a[3]*f+b[3]*c;return d};q.fromRotationMatrix=function(a,b){b||(b=q.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=.5*d,d=.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=(a[3]-a[1])*d;else{d=q.fromRotationMatrix.s_iNext=q.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var f=d[c],e=d[f];d=Math.sqrt(a[3*c+c]-a[3*f+f]-a[3*e+e]+1);b[c]=.5*d;d=.5/d;b[3]=(a[3*e+f]-a[3*f+e])*d;b[f]=(a[3*f+c]+a[3*c+f])*d;b[e]=(a[3*e+c]+a[3*c+e])*d}return b};r.toQuat4=
q.fromRotationMatrix;(function(){var a=r.create();q.fromAxes=function(b,c,d,f){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return q.fromRotationMatrix(a,f)}})();q.identity=function(a){a||(a=q.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};q.fromAngleAxis=function(a,b,c){c||(c=q.create());a*=.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};q.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=
2*Math.acos(a[3]),c=k.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};q.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var x={create:function(a){var b=new m(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var f=new m(4);f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=x.create());a[0]=1;a[1]=0;a[2]=
0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],f=a[2];a=a[3];var e=c*a-f*d;if(!e)return null;e=1/e;b[0]=a*e;b[1]=-d*e;b[2]=-f*e;b[3]=c*e;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],f=a[1],e=a[2];a=a[3];c[0]=d*b[0]+f*b[2];c[1]=d*b[1]+f*b[3];c[2]=e*b[0]+a*b[2];c[3]=e*b[1]+a*b[3];return c},rotate:function(a,
b,c){c||(c=a);var d=a[0],f=a[1],e=a[2];a=a[3];var g=Math.sin(b);b=Math.cos(b);c[0]=d*b+f*g;c[1]=d*-g+f*b;c[2]=e*b+a*g;c[3]=e*-g+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],f=a[2],e=a[3],g=b[0];b=b[1];c[0]=a[0]*g;c[1]=d*b;c[2]=f*g;c[3]=e*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};g=g?"":"d";e["glMath"+g]=k;e["vec2"+g]={create:function(a){var b=new m(2);
a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new m(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];
a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];
a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};e["vec3"+g]=p;e["vec4"+g]={create:function(a){var b=new m(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=
0);return b},createFrom:function(a,b,c,d){var f=new m(4);f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},
scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,f){f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},
str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};e["mat2"+g]=x;e["mat3"+g]=r;e["mat4"+g]=v;e["quat4"+g]=q});return x})},"esri/views/3d/support/buffer/typedArrayUtil":function(){define(["require","exports"],function(x,e){Object.defineProperty(e,"__esModule",{value:!0});e.forEach=function(e,k){if(e.forEach)e.forEach(k);else for(var g=0;g<e.length;g++)k(e[g],g,e)};e.slice=function(e,k,m){if(e.slice)return e.slice(k,m);void 0===k?k=0:(0>k&&(k+=e.length),k=Math.min(e.length,Math.max(0,
k)));void 0===m?m=e.length:(0>m&&(m+=e.length),m=Math.min(e.length,Math.max(0,m)));m=Math.max(0,m-k);for(var g=new e.constructor(m),t=0;t<m;t++)g[t]=e[k+t];return g};e.isArrayBuffer=function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name};e.isInt8Array=function(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name};e.isUint8Array=function(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name};
e.isInt16Array=function(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name};e.isUint16Array=function(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name};e.isInt32Array=function(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name};e.isUint32Array=function(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name};e.isFloat32Array=function(e){return e instanceof
Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name};e.isFloat64Array=function(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}})},"esri/views/3d/support/buffer/workerHelper":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","./BufferView","./InterleavedLayout"],function(x,e,g,k,m){function p(e){var k=[];e.fields.forEach(function(d,e){var f=d.constructor;d=g({},d,{constructor:f.ElementType+"_"+f.ElementCount});
k.push([e,d])});return{stride:e.stride,fields:k,fieldNames:e.fieldNames}}function t(e){var k=m.newLayout();k.stride=e.stride;k.fieldNames=e.fieldNames;e.fields.forEach(function(d){return k.fields.set(d[0],g({},d[1],{constructor:u.get(d[1].constructor)}))});return k}Object.defineProperty(e,"__esModule",{value:!0});e.packInterleavedBuffer=function(e,g){g.push(e.buffer);return{buffer:e.buffer,layout:p(e.layout)}};e.unpackInterleavedBuffer=function(e){return t(e.layout).createView(e.buffer)};e.packLayout=
p;e.unpackLayout=t;x=[k.BufferViewFloat,k.BufferViewVec2f,k.BufferViewVec3f,k.BufferViewVec4f,k.BufferViewMat4f,k.BufferViewFloat64,k.BufferViewVec2f64,k.BufferViewVec3f64,k.BufferViewVec4f64,k.BufferViewUint8,k.BufferViewVec2u8,k.BufferViewVec3u8,k.BufferViewVec4u8,k.BufferViewUint16,k.BufferViewVec2u16,k.BufferViewVec3u16,k.BufferViewVec4u16,k.BufferViewUint32,k.BufferViewVec2u32,k.BufferViewVec3u32,k.BufferViewVec4u32,k.BufferViewInt8,k.BufferViewVec2i8,k.BufferViewVec3i8,k.BufferViewVec4i8,k.BufferViewInt16,
k.BufferViewVec2i16,k.BufferViewVec3i16,k.BufferViewVec4i16,k.BufferViewInt32,k.BufferViewVec2i32,k.BufferViewVec3i32,k.BufferViewVec4i32];var u=new Map;x.forEach(function(e){return u.set(e.ElementType+"_"+e.ElementCount,e)})})},"esri/views/3d/support/buffer/BufferView":function(){define("require exports ../../../../core/tsSupport/extendsHelper ./internals/Mat3 ./internals/Mat4 ./internals/Single ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(x,e,g,k,m,p,t,u,y){Object.defineProperty(e,
"__esModule",{value:!0});x=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,g)||this}g(d,e);d.ElementType="f32";return d}(p.BufferViewSingle);e.BufferViewFloat=x;x=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,g)||this}g(d,e);d.ElementType="f32";return d}(t.BufferViewVec2);e.BufferViewVec2f=x;x=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,g)||this}g(d,e);d.ElementType="f32";return d}(u.BufferViewVec3Impl);
e.BufferViewVec3f=x;x=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,g)||this}g(d,e);d.ElementType="f32";return d}(y.BufferViewVec4);e.BufferViewVec4f=x;k=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,g)||this}g(d,e);d.ElementType="f32";return d}(k.BufferViewMat3);e.BufferViewMat3f=k;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float32Array,d,f,g)||this}g(d,e);d.ElementType="f32";return d}(m.BufferViewMat4);
e.BufferViewMat4f=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,g)||this}g(d,e);d.ElementType="f64";return d}(p.BufferViewSingle);e.BufferViewFloat64=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,g)||this}g(d,e);d.ElementType="f64";return d}(t.BufferViewVec2);e.BufferViewVec2f64=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,g)||this}g(d,e);d.ElementType="f64";return d}(u.BufferViewVec3Impl);
e.BufferViewVec3f64=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Float64Array,d,f,g)||this}g(d,e);d.ElementType="f64";return d}(y.BufferViewVec4);e.BufferViewVec4f64=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,g)||this}g(d,e);d.ElementType="u8";return d}(p.BufferViewSingle);e.BufferViewUint8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,g)||this}g(d,e);d.ElementType="u8";return d}(t.BufferViewVec2);
e.BufferViewVec2u8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,g)||this}g(d,e);d.ElementType="u8";return d}(u.BufferViewVec3Impl);e.BufferViewVec3u8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint8Array,d,f,g)||this}g(d,e);d.ElementType="u8";return d}(y.BufferViewVec4);e.BufferViewVec4u8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,g)||this}g(d,e);d.ElementType="u16";return d}(p.BufferViewSingle);
e.BufferViewUint16=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,g)||this}g(d,e);d.ElementType="u16";return d}(t.BufferViewVec2);e.BufferViewVec2u16=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,g)||this}g(d,e);d.ElementType="u16";return d}(u.BufferViewVec3Impl);e.BufferViewVec3u16=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint16Array,d,f,g)||this}g(d,e);d.ElementType="u16";return d}(y.BufferViewVec4);
e.BufferViewVec4u16=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,g)||this}g(d,e);d.ElementType="u32";return d}(p.BufferViewSingle);e.BufferViewUint32=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,g)||this}g(d,e);d.ElementType="u32";return d}(t.BufferViewVec2);e.BufferViewVec2u32=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,g)||this}g(d,e);d.ElementType="u32";return d}(u.BufferViewVec3Impl);
e.BufferViewVec3u32=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Uint32Array,d,f,g)||this}g(d,e);d.ElementType="u32";return d}(y.BufferViewVec4);e.BufferViewVec4u32=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,g)||this}g(d,e);d.ElementType="i8";return d}(p.BufferViewSingle);e.BufferViewInt8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,g)||this}g(d,e);d.ElementType="i8";return d}(t.BufferViewVec2);
e.BufferViewVec2i8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,g)||this}g(d,e);d.ElementType="i8";return d}(u.BufferViewVec3Impl);e.BufferViewVec3i8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int8Array,d,f,g)||this}g(d,e);d.ElementType="i8";return d}(y.BufferViewVec4);e.BufferViewVec4i8=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,g)||this}g(d,e);d.ElementType="i16";return d}(p.BufferViewSingle);
e.BufferViewInt16=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,g)||this}g(d,e);d.ElementType="i16";return d}(t.BufferViewVec2);e.BufferViewVec2i16=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,g)||this}g(d,e);d.ElementType="i16";return d}(u.BufferViewVec3Impl);e.BufferViewVec3i16=m;m=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int16Array,d,f,g)||this}g(d,e);d.ElementType="i16";return d}(y.BufferViewVec4);
e.BufferViewVec4i16=m;p=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,g)||this}g(d,e);d.ElementType="i32";return d}(p.BufferViewSingle);e.BufferViewInt32=p;t=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,g)||this}g(d,e);d.ElementType="i32";return d}(t.BufferViewVec2);e.BufferViewVec2i32=t;u=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,g)||this}g(d,e);d.ElementType="i32";return d}(u.BufferViewVec3Impl);
e.BufferViewVec3i32=u;y=function(e){function d(d,f,g){void 0===f&&(f=0);return e.call(this,Int32Array,d,f,g)||this}g(d,e);d.ElementType="i32";return d}(y.BufferViewVec4);e.BufferViewVec4i32=y})},"esri/views/3d/support/buffer/internals/Mat3":function(){define(["require","exports"],function(x,e){Object.defineProperty(e,"__esModule",{value:!0});x=function(){function e(e,g,p,t){void 0===p&&(p=0);e=this.TypedArrayConstructor=e;void 0===t&&(t=9*e.BYTES_PER_ELEMENT);this.data=new e(g,0===g.byteLength?0:
p);this.elementStride=t/e.BYTES_PER_ELEMENT}e.prototype.getMat=function(e,g){e*=this.elementStride;for(var k=0;9>k;k++)g[k]=this.data[e+k];return g};e.prototype.setMat=function(e,g){e*=this.elementStride;for(var k=0;9>k;k++)this.data[e+k]=g[k]};e.prototype.get=function(e,g){return this.data[e*this.elementStride+g]};e.prototype.set=function(e,g,p){this.data[e*this.elementStride+g]=p};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=9;return e}();e.BufferViewMat3=x})},"esri/views/3d/support/buffer/internals/Mat4":function(){define(["require",
"exports"],function(x,e){Object.defineProperty(e,"__esModule",{value:!0});x=function(){function e(e,g,p,t){void 0===p&&(p=0);e=this.TypedArrayConstructor=e;void 0===t&&(t=16*e.BYTES_PER_ELEMENT);this.data=new e(g,0===g.byteLength?0:p);this.elementStride=t/e.BYTES_PER_ELEMENT}e.prototype.getMat=function(e,g){e*=this.elementStride;for(var k=0;16>k;k++)g[k]=this.data[e+k];return g};e.prototype.setMat=function(e,g){e*=this.elementStride;for(var k=0;16>k;k++)this.data[e+k]=g[k]};e.prototype.get=function(e,
g){return this.data[e*this.elementStride+g]};e.prototype.set=function(e,g,p){this.data[e*this.elementStride+g]=p};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=16;return e}();e.BufferViewMat4=x})},"esri/views/3d/support/buffer/internals/Single":function(){define(["require","exports"],function(x,e){Object.defineProperty(e,"__esModule",{value:!0});x=function(){function e(e,g,p,t){void 0===p&&(p=0);e=this.TypedArrayConstructor=e;void 0===t&&(t=e.BYTES_PER_ELEMENT);this.data=new e(g,0===g.byteLength?0:p);this.elementStride=
t/e.BYTES_PER_ELEMENT}e.prototype.get=function(e){return this.data[e*this.elementStride]};e.prototype.set=function(e,g){this.data[e*this.elementStride]=g};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=1;return e}();e.BufferViewSingle=x})},"esri/views/3d/support/buffer/internals/Vec2":function(){define(["require","exports","../../../lib/glMatrix"],function(x,e,g){Object.defineProperty(e,"__esModule",{value:!0});x=function(){function e(e,g,k,u){void 0===k&&(k=0);e=this.TypedArrayConstructor=e;void 0===u&&
(u=2*e.BYTES_PER_ELEMENT);this.data=new e(g,0===g.byteLength?0:k);this.elementStride=u/e.BYTES_PER_ELEMENT}e.prototype.getVec=function(e,k){return g.vec2d.set2(this.data[e*this.elementStride],this.data[e*this.elementStride+1],k)};e.prototype.setVec=function(e,g){this.data[e*this.elementStride]=g[0];this.data[e*this.elementStride+1]=g[1]};e.prototype.get=function(e,g){return this.data[e*this.elementStride+g]};e.prototype.set=function(e,g,k){this.data[e*this.elementStride+g]=k};Object.defineProperty(e.prototype,
"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});
e.ElementCount=2;return e}();e.BufferViewVec2=x})},"esri/views/3d/support/buffer/internals/Vec3":function(){define(["require","exports","../../../lib/glMatrix"],function(x,e,g){Object.defineProperty(e,"__esModule",{value:!0});x=function(){function e(e,g,k,u){void 0===k&&(k=0);e=this.TypedArrayConstructor=e;void 0===u&&(u=3*e.BYTES_PER_ELEMENT);this.data=new e(g,0===g.byteLength?0:k);this.elementStride=u/e.BYTES_PER_ELEMENT}e.prototype.getVec=function(e,k){return g.vec3d.set3(this.data[e*this.elementStride],
this.data[e*this.elementStride+1],this.data[e*this.elementStride+2],k)};e.prototype.setVec=function(e,g){this.data[e*this.elementStride]=g[0];this.data[e*this.elementStride+1]=g[1];this.data[e*this.elementStride+2]=g[2]};e.prototype.get=function(e,g){return this.data[e*this.elementStride+g]};e.prototype.set=function(e,g,k){this.data[e*this.elementStride+g]=k};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/this.elementStride)},enumerable:!0,configurable:!0});
Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBufferStride",{get:function(){return this.elementStride},enumerable:!0,
configurable:!0});e.ElementCount=3;return e}();e.BufferViewVec3Impl=x})},"esri/views/3d/support/buffer/internals/Vec4":function(){define(["require","exports","../../../lib/glMatrix"],function(x,e,g){Object.defineProperty(e,"__esModule",{value:!0});x=function(){function e(e,g,k,u){void 0===k&&(k=0);e=this.TypedArrayConstructor=e;void 0===u&&(u=4*e.BYTES_PER_ELEMENT);this.data=new e(g,0===g.byteLength?0:k);this.elementStride=u/e.BYTES_PER_ELEMENT}e.prototype.getVec=function(e,k){return g.vec4d.set4(this.data[e*
this.elementStride],this.data[e*this.elementStride+1],this.data[e*this.elementStride+2],this.data[e*this.elementStride+3],k)};e.prototype.setVec=function(e,g){this.data[e*this.elementStride]=g[0];this.data[e*this.elementStride+1]=g[1];this.data[e*this.elementStride+2]=g[2];this.data[e*this.elementStride+3]=g[3]};e.prototype.get=function(e,g){return this.data[e*this.elementStride+g]};e.prototype.set=function(e,g,k){this.data[e*this.elementStride+g]=k};Object.defineProperty(e.prototype,"count",{get:function(){return Math.ceil(this.data.length/
this.elementStride)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"typedBuffer",{get:function(){return this.data},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"stride",{get:function(){return this.elementStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0});e.ElementCount=4;return e}();e.BufferViewVec4=x})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["require",
"exports","./BufferView"],function(x,e,g){Object.defineProperty(e,"__esModule",{value:!0});var k=function(){function e(e,g){this.layout=e;this.buffer="number"===typeof g?new ArrayBuffer(g*e.stride):g;g=0;for(var k=e.fieldNames;g<k.length;g++){var m=k[g],d=e.fields.get(m);this[m]=new d.constructor(this.buffer,d.offset,this.stride)}}Object.defineProperty(e.prototype,"stride",{get:function(){return this.layout.stride},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"count",{get:function(){return this.buffer.byteLength/
this.stride},enumerable:!0,configurable:!0});e.prototype.slice=function(g,k){return new e(this.layout,this.buffer.slice(g*this.stride,k*this.stride))};return e}(),m=function(){function e(){this.stride=0;this.fields=new Map;this.fieldNames=[]}e.prototype.vec2f=function(e,k){this.fields.set(e,{size:8,constructor:g.BufferViewVec2f,offset:this.stride,optional:k});this.stride+=8;this.fieldNames.push(e);return this};e.prototype.vec2f64=function(e,k){this.fields.set(e,{size:16,constructor:g.BufferViewVec2f64,
offset:this.stride,optional:k});this.stride+=16;this.fieldNames.push(e);return this};e.prototype.vec3f=function(e,k){this.fields.set(e,{size:12,constructor:g.BufferViewVec3f,offset:this.stride,optional:k});this.stride+=12;this.fieldNames.push(e);return this};e.prototype.vec3f64=function(e,k){this.fields.set(e,{size:24,constructor:g.BufferViewVec3f64,offset:this.stride,optional:k});this.stride+=24;this.fieldNames.push(e);return this};e.prototype.vec4f=function(e,k){this.fields.set(e,{size:16,constructor:g.BufferViewVec4f,
offset:this.stride,optional:k});this.stride+=16;this.fieldNames.push(e);return this};e.prototype.vec4f64=function(e,k){this.fields.set(e,{size:32,constructor:g.BufferViewVec4f64,offset:this.stride,optional:k});this.stride+=32;this.fieldNames.push(e);return this};e.prototype.mat3f=function(e,k){this.fields.set(e,{size:36,constructor:g.BufferViewMat3f,offset:this.stride,optional:k});this.stride+=36;this.fieldNames.push(e);return this};e.prototype.mat4f=function(e,k){this.fields.set(e,{size:64,constructor:g.BufferViewMat4f,
offset:this.stride,optional:k});this.stride+=64;this.fieldNames.push(e);return this};e.prototype.vec4u8=function(e,k){this.fields.set(e,{offset:this.stride,size:4,optional:k,constructor:g.BufferViewVec4u8});this.stride+=4;this.fieldNames.push(e);return this};e.prototype.f32=function(e,k){this.fields.set(e,{offset:this.stride,size:4,optional:k,constructor:g.BufferViewFloat});this.stride+=4;this.fieldNames.push(e);return this};e.prototype.f64=function(e,k){this.fields.set(e,{offset:this.stride,size:8,
optional:k,constructor:g.BufferViewFloat64});this.stride+=8;this.fieldNames.push(e);return this};e.prototype.u8=function(e,k){this.fields.set(e,{offset:this.stride,size:1,optional:k,constructor:g.BufferViewUint8});this.stride+=1;this.fieldNames.push(e);return this};e.prototype.u16=function(e,k){this.fields.set(e,{offset:this.stride,size:2,optional:k,constructor:g.BufferViewUint16});this.stride+=2;this.fieldNames.push(e);return this};e.prototype.i8=function(e,k){this.fields.set(e,{offset:this.stride,
size:1,optional:k,constructor:g.BufferViewInt8});this.stride+=1;this.fieldNames.push(e);return this};e.prototype.vec2i8=function(e,k){this.fields.set(e,{offset:this.stride,size:2,optional:k,constructor:g.BufferViewVec2i8});this.stride+=2;this.fieldNames.push(e);return this};e.prototype.vec2i16=function(e,k){this.fields.set(e,{offset:this.stride,size:4,optional:k,constructor:g.BufferViewVec2i16});this.stride+=4;this.fieldNames.push(e);return this};e.prototype.vec2u8=function(e,k){this.fields.set(e,
{offset:this.stride,size:2,optional:k,constructor:g.BufferViewVec2u8});this.stride+=2;this.fieldNames.push(e);return this};e.prototype.vec4u16=function(e,k){this.fields.set(e,{offset:this.stride,size:8,optional:k,constructor:g.BufferViewVec4u16});this.stride+=8;this.fieldNames.push(e);return this};e.prototype.u32=function(e,k){this.fields.set(e,{offset:this.stride,size:4,optional:k,constructor:g.BufferViewUint32});this.stride+=4;this.fieldNames.push(e);return this};e.prototype.createBuffer=function(e){return new k(this,
e)};e.prototype.createView=function(e){return new k(this,e)};e.prototype.clone=function(){var g=new e;g.stride=this.stride;g.fields=new Map;this.fields.forEach(function(e,k){return g.fields.set(k,e)});g.fieldNames=this.fieldNames.slice();g.BufferType=this.BufferType;return g};return e}();e.InterleavedLayout=m;e.newLayout=function(){return new m}})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["require","exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout"],
function(x,e,g,k){Object.defineProperty(e,"__esModule",{value:!0});e.EdgeInputBufferLayout=k.newLayout().vec3f("position").u16("componentIndex").u16("_padding");e.VertexLayout=k.newLayout().vec2u8("sideness");e.glVertexLayout=g.glLayout(e.VertexLayout,{prefixA:!0});e.CommonInstancesLayout=k.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").vec2u8("packedAttributes").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",
{glPadding:!0});e.RegularEdgeInstancesLayout=e.CommonInstancesLayout.clone().vec3f("normal");e.SilhouetteEdgeInstancesLayout=e.CommonInstancesLayout.clone().vec3f("normalA").vec3f("normalB");e.EdgeShaderAttributeLocations={aPosition0:0,aPosition1:1,aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}})},"esri/views/3d/support/buffer/glUtil":function(){define(["require","exports","../../../../core/tsSupport/assignHelper"],
function(x,e,g){Object.defineProperty(e,"__esModule",{value:!0});var k={divisor:0,prefixA:!1};e.glLayout=function(e,t){void 0===t&&(t={});t=g({},k,t);var p=e.stride;return e.fieldNames.filter(function(g){g=e.fields.get(g).optional;return!(g&&g.glPadding)}).map(function(g){var k=e.fields.get(g),d=k.constructor.ElementCount,l;l=m[k.constructor.ElementType];if(!l)throw Error("BufferType not supported in WebGL");var f=k.offset,k=k.optional&&!!k.optional.glNormalized;return{name:t.prefixA?"a"+g[0].toUpperCase()+
g.substr(1):g,stride:p,count:d,type:l,offset:f,normalized:k,divisor:t.divisor}})};var m={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../lib/glMatrix ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(x,e,g,k,m,p,t){Object.defineProperty(e,"__esModule",{value:!0});var u=
function(){function e(){}e.prototype.updateSettings=function(d){this.settings=d};e.prototype.write=function(e,f,g){var k=y;k[0]=g.position0[0];k[1]=g.position0[1];k[2]=g.position0[2];k[3]=g.position1[0];k[4]=g.position1[1];k[5]=g.position1[2];d[0]=5381;for(k=0;k<w.length;k++)d[0]=31*d[0]+w[k];l.reseed(d[0]);var k=l.randomRangeInt(0,255),a=l.randomRangeInt(0,this.settings.variants-1),b=l.randomFloat(),b=-(1-Math.min(b/.7,1))+Math.max(0,b-.7)/(1-.7),b=255*(Math.pow(Math.abs(b),1.2)*(0>b?-1:1)*.5+.5);
e.position0.setVec(f,g.position0);e.position1.setVec(f,g.position1);e.componentIndex.set(f,g.componentIndex);e.variantOffset.set(f,k);e.variantStroke.set(f,a);e.variantExtension.set(f,b)};e.prototype.trim=function(d,e){return d.slice(0,e)};return e}();e.CommonBufferWriter=u;var y=new Float32Array(6),w=new Uint32Array(y.buffer),d=new Uint32Array(1),l=new (function(){function d(d){void 0===d&&(d=1);this.seed=d}d.prototype.randomFloat=function(){return this.step()/d.LARGE_PRIME};d.prototype.randomRangeInt=
function(d,e){e-=d;return Math.round(d+this.randomFloat()*e)};d.prototype.reseed=function(d){this.seed=d};d.prototype.step=function(){return this.seed=this.seed*d.SMALL_PRIME%d.LARGE_PRIME};d.LARGE_PRIME=2147483647;d.SMALL_PRIME=16807;return d}());x=function(){function d(){this.commonWriter=new u}d.prototype.updateSettings=function(d){this.commonWriter.updateSettings(d)};d.prototype.allocate=function(d){return t.RegularEdgeInstancesLayout.createBuffer(d)};d.prototype.write=function(d,e,g){this.commonWriter.write(d,
e,g);g=m.vec3d.normalize(m.vec3d.add(g.faceNormal0,g.faceNormal1,f));d.normal.setVec(e,g)};d.prototype.trim=function(d,e){return this.commonWriter.trim(d,e)};d.Layout=t.RegularEdgeInstancesLayout;d.glLayout=p.glLayout(t.RegularEdgeInstancesLayout,{prefixA:!0,divisor:1});return d}();e.RegularEdgeBufferWriter=x;x=function(){function d(){this.commonWriter=new u}d.prototype.updateSettings=function(d){this.commonWriter.updateSettings(d)};d.prototype.allocate=function(d){return t.SilhouetteEdgeInstancesLayout.createBuffer(d)};
d.prototype.write=function(d,e,f){this.commonWriter.write(d,e,f);d.normalA.setVec(e,f.faceNormal0);d.normalB.setVec(e,f.faceNormal1)};d.prototype.trim=function(d,e){return this.commonWriter.trim(d,e)};d.Layout=t.SilhouetteEdgeInstancesLayout;d.glLayout=p.glLayout(t.SilhouetteEdgeInstancesLayout,{prefixA:!0,divisor:1});return d}();e.SilhouetteEdgeBufferWriter=x;var f=m.vec3d.create()})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define("require exports ../../../../../core/arrayUtils ../../../lib/glMatrix ../../../support/mathUtils ../../../support/buffer/typedArrayUtil".split(" "),
function(x,e,g,k,m,p){function t(d,e){var f=Math.acos(d.cosAngle),g=w.fwd,l=w.ortho;k.vec3d.normalize(k.vec3d.direction(d.position0,d.position1,g));d=0<k.vec3d.dot(k.vec3d.cross(d.faceNormal0,d.faceNormal1,l),g)?-1:1;return f*d>e}function u(d){var e=d.faces.length/3,f=d.faces;d=d.neighbors;for(var g=0,k=0;k<e;k++)var l=d[3*k+0],a=d[3*k+1],b=d[3*k+2],c=f[3*k+0],h=f[3*k+1],n=f[3*k+2],g=g+(-1===l||c<h?1:0),g=g+(-1===a||h<n?1:0),g=g+(-1===b||n<c?1:0);for(var g=new Int32Array(4*g),m=0,k=0;k<e;k++){l=d[3*
k+0];a=d[3*k+1];b=d[3*k+2];c=f[3*k+0];h=f[3*k+1];n=f[3*k+2];if(-1===l||c<h)g[m++]=c,g[m++]=h,g[m++]=k,g[m++]=l;if(-1===a||h<n)g[m++]=h,g[m++]=n,g[m++]=k,g[m++]=a;if(-1===b||n<c)g[m++]=n,g[m++]=c,g[m++]=k,g[m++]=b}return g}function y(e){var f=e.faces.length/3,g=e.vertices.position;e=e.faces;for(var l=d.v0,m=d.v1,p=d.v2,a=new Float32Array(3*f),b=0;b<f;b++){var c=e[3*b+1],h=e[3*b+2];g.getVec(e[3*b+0],l);g.getVec(c,m);g.getVec(h,p);k.vec3d.subtract(m,l);k.vec3d.subtract(p,l);k.vec3d.normalize(k.vec3d.cross(m,
p,l));a[3*b+0]=l[0];a[3*b+1]=l[1];a[3*b+2]=l[2]}return a}Object.defineProperty(e,"__esModule",{value:!0});e.extractEdges=function(d,e,v,q){void 0===q&&(q=l);var f=d.vertices.position,r=d.vertices.componentIndex,a=m.deg2rad(q.anglePlanar);q=m.deg2rad(q.angleSignificantEdge);var b=Math.cos(q),c=Math.cos(a),h=w.edge,n=h.position0,x=h.position1,H=h.faceNormal0,L=h.faceNormal1,N=y(d),Q=u(d),P=Q.length/4;d=e.allocate(P);q=0;var O=v.allocate(P),R=0,V=0,aa=0,X=g.range(0,P),W=new Float32Array(P);p.forEach(W,
function(a,b,c){f.getVec(Q[4*b+0],n);f.getVec(Q[4*b+1],x);c[b]=k.vec3d.dist(n,x)});X.sort(function(a,b){return W[b]-W[a]});for(var ba=[],Z=[],Y=0;Y<P;Y++){var M=X[Y],ca=W[M],K=Q[4*M+0],F=Q[4*M+1],D=Q[4*M+2],M=Q[4*M+3],E=-1===M;f.getVec(K,n);f.getVec(F,x);if(E)k.vec3d.set3(N[3*D+0],N[3*D+1],N[3*D+2],H),k.vec3d.set(H,L),h.componentIndex=r.get(K),h.cosAngle=k.vec3d.dot(H,L);else if(k.vec3d.set3(N[3*D+0],N[3*D+1],N[3*D+2],H),k.vec3d.set3(N[3*M+0],N[3*M+1],N[3*M+2],L),h.componentIndex=r.get(K),h.cosAngle=
k.vec3d.dot(H,L),h.cosAngle>c)continue;V+=ca;aa++;E||h.cosAngle<b?(e.write(d,q++,h),ba.push(ca)):t(h,a)&&(v.write(O,R++,h),Z.push(ca))}r=new Float32Array(ba.reverse());a=new Float32Array(Z.reverse());return{regular:{instancesData:e.trim(d,q),lodInfo:{lengths:r}},silhouette:{instancesData:v.trim(O,R),lodInfo:{lengths:a}},averageEdgeLength:V/aa}};var w={edge:{position0:k.vec3d.create(),position1:k.vec3d.create(),faceNormal0:k.vec3d.create(),faceNormal1:k.vec3d.create(),componentIndex:0,cosAngle:0},
ortho:k.vec3d.create(),fwd:k.vec3d.create()},d={v0:k.vec3d.create(),v1:k.vec3d.create(),v2:k.vec3d.create()},l={anglePlanar:4,angleSignificantEdge:35}})},"esri/core/arrayUtils":function(){define(["require","exports"],function(x,e){function g(d,e,f){for(var g=d.length,k=0;k<g;k++)if(e.call(f,d[k],k,d))return k;return-1}function k(d,e,f,g){void 0===f&&(f=d.length);g=g||w;for(var k=Math.max(0,g.last-10),l=-1,m=k;m<f;++m)if(d[m]===e){l=m;break}if(-1===l){for(m=0;m<k;++m)if(d[m]===e){l=m;break}if(-1===
l)return}d[l]=d[f-1];d.pop();g.last=l;return e}function m(d,e,f,g){void 0===f&&(f=d.length);var l=[];e.forEach(function(e){void 0!==k(d,e,f,g)&&(l.push(e),--f)});return l}function p(d,e){return-1===d.indexOf(e)}function t(d,e,f){return!d.some(e.bind(null,f))}function u(d){return d}Object.defineProperty(e,"__esModule",{value:!0});e.findIndex=g;e.find=function(d,e,f){for(var g=d.length,k=0;k<g;k++){var l=d[k];if(e.call(f,l,k,d))return l}};e.unique=function(d){return d.filter(function(d,e,g){return g.indexOf(d)===
e})};e.equals=function(d,e,f){if(!d&&!e)return!0;if(!d||!e||d.length!==e.length)return!1;if(f)for(var g=0;g<d.length;g++){if(!f(d[g],e[g]))return!1}else for(g=0;g<d.length;g++)if(d[g]!==e[g])return!1;return!0};e.difference=function(d,e,f){var g;f?(g=e.filter(t.bind(null,d,f)),d=d.filter(t.bind(null,e,f))):(g=e.filter(p.bind(null,d)),d=d.filter(p.bind(null,e)));return{added:g,removed:d}};e.intersect=function(d,e,f){return d&&e?f?d.filter(function(d){return-1<g(e,function(e){return f(d,e)})}):d.filter(function(d){return-1<
e.indexOf(d)}):[]};e.constant=function(d,e){for(var f=Array(d),g=0;g<d;g++)f[g]=e;return f};e.range=function(d,e){void 0===e&&(e=d,d=0);for(var f=Array(e-d),g=d;g<e;g++)f[g-d]=g;return f};e.binaryIndexOf=function(d,e,f){for(var g=d.length,k=0,l=g-1;k<l;){var m=k+Math.floor((l-k)/2);e>d[m]?k=m+1:l=m}l=d[k];return f?e>=d[g-1]?-1:l===e?k:k-1:l===e?k:-1};var y=function(){return function(){this.last=0}}();e.RemoveHint=y;var w=new y;x=function(){return function(d){var e=this;this._array=d;this._hint=new y;
this.remove=function(d){return k(e._array,d,e._array.length,e._hint)};this.removeMany=function(d){return m(e._array,d,e._array.length,e._hint)}}}();e.UnorderedRemover=x;e.removeUnordered=k;e.removeUnorderedMany=m;e.keysOfMap=function(d){var e=[];d.forEach(function(d,g){return e.push(g)});return e};e.keysOfSet=function(d,e){void 0===e&&(e=u);var f=[];d.forEach(function(d){return f.push(e(d))});return f}})},"*noref":1}});
define("require exports ../../../../../core/tsSupport/awaiterHelper ../../../../../core/tsSupport/generatorHelper ../../../support/meshProcessing ../../../support/buffer/typedArrayUtil ../../../support/buffer/workerHelper ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),function(x,e,g,k,m,p,t,u,y,w){return function(){function d(){this.regularWriter=new y.RegularEdgeBufferWriter;this.silhouetteWriter=new y.SilhouetteEdgeBufferWriter}d.prototype.process=function(d,e){return g(this,
void 0,void 0,function(){var f,g,l;return k(this,function(k){switch(k.label){case 0:if(!e)return[3,2];f=[];g=this.packInput(d,f);this.wrappedWork;return[4,e.invoke("wrappedWork",g,f)];case 1:return l=k.sent(),[2,this.unpackOutput(l)];case 2:return[2,this.work(d)]}})})};d.prototype.wrappedWork=function(d){return g(this,void 0,void 0,function(){var e,g,l,m;return k(this,function(f){e=this.unpackInput(d);g=this.work(e);l=[];this.packInputTransferables(e,l);m=this.packOutput(g,l);return[2,{result:m,transferList:l}]})})};
d.prototype.work=function(d){var e=this.extractEdgeInformation(d.data,d.skipDeduplicate,d.originalIndices);this.regularWriter.updateSettings(d.writerSettings);this.silhouetteWriter.updateSettings(d.writerSettings);return w.extractEdges(e,this.regularWriter,this.silhouetteWriter)};d.prototype.packInputTransferables=function(d,e){e.push(d.data.buffer)};d.prototype.packInput=function(d,e){this.packInputTransferables(d,e);e={dataBuffer:d.data.buffer,writerSettings:d.writerSettings,skipDeduplicate:d.skipDeduplicate};
d.originalIndices&&(e.originalIndicesBuffer=d.originalIndices.buffer,e.originalIndicesType=p.isUint32Array(d.originalIndices)?"Uint32Array":"Uint16Array");return e};d.prototype.unpackInput=function(d){return{data:u.EdgeInputBufferLayout.createView(d.dataBuffer),originalIndices:"Uint32Array"===d.originalIndicesType?new Uint32Array(d.originalIndicesBuffer):"Uint16Array"===d.originalIndicesType?new Uint16Array(d.originalIndicesBuffer):void 0,writerSettings:d.writerSettings,skipDeduplicate:d.skipDeduplicate}};
d.prototype.packOutput=function(d,e){e.push(d.regular.lodInfo.lengths.buffer);e.push(d.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:t.packInterleavedBuffer(d.regular.instancesData,e),lodInfo:{lengths:d.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:t.packInterleavedBuffer(d.silhouette.instancesData,e),lodInfo:{lengths:d.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:d.averageEdgeLength}};d.prototype.unpackOutput=function(d){return{regular:{instancesData:t.unpackInterleavedBuffer(d.regular.instancesData),
lodInfo:{lengths:new Float32Array(d.regular.lodInfo.lengths)}},silhouette:{instancesData:t.unpackInterleavedBuffer(d.silhouette.instancesData),lodInfo:{lengths:new Float32Array(d.silhouette.lodInfo.lengths)}},averageEdgeLength:d.averageEdgeLength}};d.prototype.extractEdgeInformation=function(d,e,g){if(e&&g)return e=m.computeNeighbors(g,d.count),{faces:g,neighbors:e,vertices:d};d=m.deduplicate(d.buffer,d.stride/4);g=this.selectIndexData(d.indices,g);e=m.computeNeighbors(g,d.uniqueCount);return{faces:g,
neighbors:e,vertices:u.EdgeInputBufferLayout.createView(d.buffer)}};d.prototype.selectIndexData=function(d,e){if(e){e=p.slice(e);for(var f=0;f<e.length;f++)e[f]=d[e[f]];return e}return d};return d}()});