// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/Error ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/aaBoundingRect ./Layer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/TileInfo".split(" "),function(k,x,y,p,f,l,q,m,e,r,g,t,u,v,w,n){var c={id:"0/0/0",level:0,row:0,col:0,extent:null};return function(h){function b(){var a=
null!==h&&h.apply(this,arguments)||this;a.tileInfo=n.create({spatialReference:g.WebMercator,size:256});a.type="base-tile";a.fullExtent=new r(-2.0037508342787E7,-2.003750834278E7,2.003750834278E7,2.0037508342787E7,g.WebMercator);a.spatialReference=g.WebMercator;return a}p(b,h);b.prototype.getTileBounds=function(a,b,e,d){d=d||t.create();c.level=a;c.row=b;c.col=e;c.extent=d;this.tileInfo.updateTileInfo(c);c.extent=null;return d};b.prototype.fetchTile=function(a,b,e,d){a=this.getTileUrl(a,b,e);var c=
{responseType:"image"};d&&d.timestamp&&(c.query={_ts:d.timestamp});d&&d.allowImageDataAccess&&(c.allowImageDataAccess=d.allowImageDataAccess);return("string"===typeof a?l(a,c):a.then(function(a){return l(a,c)})).then(function(a){return a.data})};b.prototype.getTileUrl=function(a,b,c){throw new q("basetilelayer:gettileurl-not-implemented","getTileUrl() is not implemented");};b.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return m.create(function(a){return k(["../views/2d/layers/TiledLayerView2D"],
a)});case "3d":return m.create(function(a){return k(["../views/3d/layers/TileLayerView3D"],a)})}};f([e.property({type:n})],b.prototype,"tileInfo",void 0);f([e.property({readOnly:!0,value:"base-tile"})],b.prototype,"type",void 0);f([e.property()],b.prototype,"fullExtent",void 0);f([e.property()],b.prototype,"spatialReference",void 0);return b=f([e.subclass("esri.layers.BaseTileLayer")],b)}(e.declared(u,v,w))});