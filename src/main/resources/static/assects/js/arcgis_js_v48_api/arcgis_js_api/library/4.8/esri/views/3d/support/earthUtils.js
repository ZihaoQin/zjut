// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ../lib/glMatrix ./mathUtils".split(" "),function(v,c,g,m,t,u,e){function l(a,b,d,f){var h,n;a instanceof g&&b instanceof g&&(d=b.longitude,f=b.latitude,n=a.latitude,h=a.longitude);a=e.deg2rad(n);f=e.deg2rad(f);h=e.deg2rad(h);b=e.deg2rad(d);d=Math.sin((a-f)/2);h=Math.sin((h-b)/2);d=2*e.asin(Math.sqrt(d*d+Math.cos(a)*Math.cos(f)*h*h))*c.earthRadius;return Math.round(1E4*d)/1E4}
function p(a,b,d){a=d/c.earthRadius;b=e.deg2rad(b);a=Math.sin(a/2);b=Math.cos(b);b=2*e.asin(Math.sqrt(a*a/(b*b)));return e.rad2deg(b)}function q(a,b,d){return e.rad2deg(d/c.earthRadius)}function r(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(c,"__esModule",{value:!0});c.wgs84Radius=6378137;c.wgs84InverseFlattening=298.257223563;c.wgs84Flattening=1/c.wgs84InverseFlattening;c.wgs84PolarRadius=c.wgs84Radius*(1-c.wgs84Flattening);c.wgs84Eccentricity=.0818191908426215;c.earthRadius=c.wgs84Radius;
c.halfEarthCircumference=Math.PI*c.earthRadius;c.earthCircumference=2*c.halfEarthCircumference;c.metersPerDegree=c.halfEarthCircumference/180;var k=new g(0,0,m.WGS84);c.getGreatCircleDistance=l;c.getGreatCircleSpanAt=function(a,b,c){var f=b.spatialReference,d=new g(b.x,a.y,f),e=new g(c.x,a.y,f);b=new g(a.x,b.y,f);a=new g(a.x,c.y,f);return{lon:l(d,e),lat:l(b,a)}};c.getLonDeltaForDistance=p;c.getLatDeltaForDistance=q;c.getLatLonDeltaForDistance=function(a,b,c){return{lat:q(a,b,c),lon:p(a,b,c)}};c.getMaxCameraAltitude=
function(a){a=e.deg2rad(a/2);return(1-Math.sin(a))*c.earthRadius/Math.sin(a)};c.getViewExtentDistance=function(a,b){b=e.deg2rad(b/2);return 2*e.acos((Math.pow(a+c.earthRadius,2)+Math.pow(c.earthRadius,2)-Math.pow((a+c.earthRadius)*Math.cos(b)-Math.sqrt(Math.pow(Math.cos(b)*(a+c.earthRadius),2)-a*a-2*a*c.earthRadius),2))/(2*(a+c.earthRadius)*c.earthRadius))*c.earthRadius};c.computeCarthesianDistance=function(a,b){function d(a){var b=e.deg2rad(a.latitude),d=e.deg2rad(a.longitude),f=Math.cos(b);a=c.earthRadius+
(a.z||0);return[Math.cos(d)*f*a,Math.sin(b)*a,-Math.sin(d)*f*a]}a=d(a);b=d(b);b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]];return Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])};c.longitudeToTimezone=r;c.positionToTimezone=function(a,b){a.spatialReference.wkid!==m.WGS84.wkid?t.webMercatorToGeographic(a,!1,k):(k.x=a.x,k.y=a.y);k.z=a.z;b||(b={hours:0,minutes:0,seconds:0});b.hours=r(k.x,!0);a=b.hours%1;b.hours-=a;b.minutes=60*a;a=b.minutes%1;b.minutes-=a;b.seconds=Math.round(60*a);return b};c.distanceToIdealHorizon=
function(a,b){b=b||c.earthRadius;a=u.vec3d.dot(a,a);return Math.sqrt(Math.abs(a-b*b))}});