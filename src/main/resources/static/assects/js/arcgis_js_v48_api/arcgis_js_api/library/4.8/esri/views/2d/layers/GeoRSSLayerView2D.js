// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Graphic ../../../PopupTemplate ../../../core/Collection ../../../core/Handles ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../renderers/SimpleRenderer ../../../renderers/support/jsonUtils ../../../tasks/support/FeatureSet ../engine/DOMContainer ./LayerView2D ./support/FeaturesView2D ../../layers/RefreshableLayerView".split(" "),
function(B,C,n,p,q,r,t,u,l,e,m,h,v,w,x,y,z,A){return function(k){function b(){var a=null!==k&&k.apply(this,arguments)||this;a._handles=new u;a._featuresViewMap={};a._popupTemplates=new Map;a.container=new x;a.featuresViews=[];return a}n(b,k);b.prototype.hitTest=function(a,d){var f=this;if(this.suspended||!this.featuresViews.length)return l.resolve();var b=this.featuresViews.reverse().map(function(c){return c.hitTest(a,d)});return l.all(b).then(function(a){return a.filter(function(a,d){a&&(a.popupTemplate=
f._popupTemplates.get(f.featuresViews[d]),a.layer=f.layer,a.sourceLayer=f.layer);return!!a})[0]||null})};b.prototype.update=function(a){};b.prototype.attach=function(){var a=this;this.layer.featureCollections.forEach(function(d){var b=w.fromJSON(d.featureSet),e=new (t.ofType(q))(b.features),c;if(a._featuresViewMap[b.geometryType])c=a._featuresViewMap[b.geometryType],c.graphics.addMany(e);else{c=d.layerDefinition.drawingInfo;d=d.popupInfo?r.fromJSON(d.popupInfo):null;var g=v.fromJSON(c.renderer);c=
new z;c.graphics=e;c.mapView=a.view;c.renderer=g;a._featuresViewMap[b.geometryType]=c;a._popupTemplates.set(c,d);"polygon"!==b.geometryType||a.layer.polygonSymbol?"polyline"!==b.geometryType||a.layer.lineSymbol?"point"!==b.geometryType||a.layer.pointSymbol||(a.layer.pointSymbol=g.symbol):a.layer.lineSymbol=g.symbol:a.layer.polygonSymbol=g.symbol;a.featuresViews.push(c);a.container.addChild(c.container)}});this._handles.add(e.init(this.layer,"polygonSymbol",function(b){a._featuresViewMap.polygon.renderer=
new h({symbol:b})}));this._handles.add(e.init(this.layer,"lineSymbol",function(b){a._featuresViewMap.polyline.renderer=new h({symbol:b})}));this._handles.add(e.init(this.layer,"pointSymbol",function(b){a._featuresViewMap.point.renderer=new h({symbol:b})}))};b.prototype.detach=function(){this._handles.removeAll()};b.prototype.moveStart=function(){};b.prototype.viewChange=function(){};b.prototype.moveEnd=function(){};return b=p([m.subclass("esri.views.2d.layers.GeoRSSLayerView2D")],b)}(m.declared(y,
A))});