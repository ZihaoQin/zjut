// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(r,b,k,m,l,e,a,f,c){function d(){if(t)return t;for(var a=n+q,d=[],e=function(a){var h=c.create(a).then(function(h){return g[a]=h});d.push(h)},b=0;b<a;b++)e(b);return t=m(d).then(function(){})}Object.defineProperty(b,"__esModule",{value:!0});b.Connection=a;b.RemoteClient=f;(a=k("host-browser")?navigator.hardwareConcurrency:
0)||(a=k("safari")&&k("mac")||k("trident")?8:2);var n=k("esri-workers-debug")?1:Math.max(1,Math.ceil(a/2)),q=k("esri-workers-debug")?1:Math.max(1,Math.floor(a/2)),p=l.getLogger("esri.core.workers"),u=0,g=[];b.initialize=function(){d()};b.open=function(a,c,t){void 0===c&&(c={});if(Array.isArray(a))return new b.Connection(a.map(function(a){return new b.RemoteClient(a,c.client)}));if("string"!==typeof a){p.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var h=
a;a=c;c={client:h,strategy:t?"dedicated":"distributed"}}var l=c.strategy||"distributed";return"local"===l?e.create(function(g){r([a],function(a){g(b.RemoteClient.connect(a))})}).then(function(a){return new b.Connection([new b.RemoteClient(a,c.client)])}):d().then(function(){if("dedicated"===l){var h=n+u++;u%=q;return g[h].open(a).then(function(a){return new b.Connection([new b.RemoteClient(a,c.client)])})}return e.all(g.map(function(g){return g.open(a)})).then(function(a){return new b.Connection(a.map(function(a){return new b.RemoteClient(a,
c.client)}))})})};b.terminate=function(){t&&(t.cancel(),t=null);for(var a=0;a<g.length;a++)g[a]&&g[a].terminate();g.length=0};var t=null})},"esri/core/workers/Connection":function(){define(["require","exports","../promiseUtils"],function(r,b,k){return function(){function b(b){this._clientIdx=0;this._clients=b}b.prototype.broadcast=function(b,e,a){for(var l=[],c=0,d=this._clients;c<d.length;c++)l.push(d[c].invoke(b,e,a));return l};b.prototype.close=function(){for(var b=0,e=this._clients;b<e.length;b++)e[b].close();
this._clients=[]};b.prototype.invoke=function(b,e,a,f){var c=f&&f.client;if(!this._clients||!this._clients.length)return k.reject(Error("Connection closed"));null!=c&&-1!==this._clients.indexOf(c)||this._clients.some(function(a){return a.isBusy()?!1:(c=a,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,c=this._clients[this._clientIdx]);b=c.invoke(b,e,a);f&&(f.client=c);return b};b.prototype.openPorts=function(){return k.all(this._clients.map(function(b){return b.openPort()}))};return b}()})},
"esri/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(r,b,k,m,l,e){function a(a,g){a["delete"](g)}var f=e.MessageType.CLOSE,c=e.MessageType.CANCEL,d=e.MessageType.INVOKE,n=e.MessageType.RESPONSE,q=e.MessageType.OPEN_PORT,p=function(){function a(a){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=a;this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a){a.type===
e.MessageType.CANCEL?this._cancelledJobIds.add(a.jobId):(this._invokeMessages.push(a),null===this._timer&&(this._timer=setTimeout(this._process,0)))};a.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};a.prototype._process=function(){this._timer=null;for(var a=0,b=this._invokeMessages;a<b.length;a++){var h=b[a];this._cancelledJobIds.has(h.jobId)||this._invoke(h)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return a}();return function(){function b(a,
b,h){this._outJobs=new Map;this._inJobs=new Map;this._queue=new p(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=b;this._port=a;this._port.addEventListener("message",this._onMessage);this._port.start();this._channel=h}b.connect=function(a){var c=new MessageChannel;a="function"===typeof a?new a:"default"in a&&"function"===typeof a.default?new a.default:a;a.remoteClient=new b(c.port1,a,c);return c.port2};b.prototype.close=function(){this._post({type:f});this._close()};
b.prototype.isBusy=function(){return 0<this._outJobs.size};b.prototype.invoke=function(b,t,h){var g=this;if(!this._port)return l.reject(new m("remote-client:port-closed","Can't invoke(), port is closed"));var n=e.newJobId(),f=new k(function(){a(g._outJobs,n);g._post({type:c,jobId:n})});this._outJobs.set(n,f);this._post({type:d,jobId:n,methodName:b},t,h);return f.promise};b.prototype.openPort=function(){var b=this,d=e.newJobId(),h=new k(function(){a(b._outJobs,d);b._post({type:c,jobId:d})});this._outJobs.set(d,
h);this._post({type:q,jobId:d});return h.promise};b.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();this._outJobs.forEach(function(a){a.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};b.prototype._onMessage=function(a){if(a=e.receiveMessage(a))switch(a.type){case n:this._onResponse(a);break;case d:this._queue.push(a);break;case c:this._onCancel(a);break;
case f:this._close();break;case q:this._onOpenPort(a)}};b.prototype._onCancel=function(b){var c=this._inJobs,h=b.jobId,d=c.get(h);this._queue.push(b);d&&(a(c,h),d.cancel())};b.prototype._onInvoke=function(b){var c=this,h=b.methodName,d=b.jobId;b=b.data;var f=this._inJobs,g=this._client,q=g[h],k;try{if(!q&&h&&-1!==h.indexOf("."))for(var m=h.split("."),p=0;p<m.length-1;p++)g=g[m[p]],q=g[m[p+1]];if("function"!==typeof q)throw new TypeError(h+" is not a function");k=q.call(g,b,this)}catch(A){this._post({type:n,
jobId:d,error:e.toInvokeError(A)});return}l.isThenable(k)?(f.set(d,k),k.then(function(b){f.has(d)&&(a(f,d),c._post({type:n,jobId:d},b))}).catch(function(b){f.has(d)&&(a(f,d),b&&"cancel"===b.dojoType||c._post({type:n,jobId:d,error:e.toInvokeError(b||{message:"Error encountered at method "+h})}))})):this._post({type:n,jobId:d},k)};b.prototype._onOpenPort=function(a){var c=new MessageChannel;new b(c.port1,this._client);this._post({type:n,jobId:a.jobId},c.port2,[c.port2])};b.prototype._onResponse=function(b){var c=
b.jobId,d=b.error;b=b.data;var e=this._outJobs;if(e.has(c)){var f=e.get(c);a(e,c);d?f.reject(m.fromJSON(JSON.parse(d))):f.resolve(b)}};b.prototype._post=function(a,b,c){return e.postMessage(this._port,a,b,c)};return b}()})},"esri/core/workers/utils":function(){define(["require","exports","dojo/has"],function(r,b,k){function m(a){return a&&"object"===typeof a&&("result"in a||"transferList"in a)}function l(a){return a instanceof ArrayBuffer||a&&a.constructor&&"ArrayBuffer"===a.constructor.name}Object.defineProperty(b,
"__esModule",{value:!0});(function(a){a[a.HANDSHAKE=0]="HANDSHAKE";a[a.CONFIGURE=1]="CONFIGURE";a[a.CONFIGURED=2]="CONFIGURED";a[a.OPEN=3]="OPEN";a[a.OPENED=4]="OPENED";a[a.RESPONSE=5]="RESPONSE";a[a.INVOKE=6]="INVOKE";a[a.CANCEL=7]="CANCEL";a[a.CLOSE=8]="CLOSE";a[a.OPEN_PORT=9]="OPEN_PORT"})(b.MessageType||(b.MessageType={}));var e=0;b.newJobId=function(){return e++};b.isTranferableResult=m;b.toInvokeError=function(a){return a?a.toJSON?JSON.stringify(a):JSON.stringify({name:a.name,message:a.message,
details:a.details,stack:a.stack}):null};b.postMessage=function(a,b,c,d){2===arguments.length||void 0===c&&void 0===d?a.postMessage(b):(k("esri-workers-supports-transfer-arraybuffer")||(d?(d=d.filter(function(a){return!l(a)}),d.length||(d=null)):m(c)&&c.transferList&&(c.transferList=c.transferList.filter(function(a){return!l(a)}),c.transferList.length||(c.transferList=null))),d?(b.data=c,a.postMessage(b,d)):m(c)?(b.data=c.result,c.transferList?a.postMessage(b,c.transferList):a.postMessage(b)):(b.data=
c,a.postMessage(b)))};b.receiveMessage=function(a){return a?(a=a.data)?"string"===typeof a?JSON.parse(a):a:null:null}})},"esri/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(r,b,k,m,l,e,a,f,c){var d=e.getLogger("esri.core.workers"),n=f.MessageType.CANCEL,q=f.MessageType.INVOKE,p=f.MessageType.OPEN,u=f.MessageType.OPENED,g=f.MessageType.RESPONSE;return function(){function b(a,b){this._outJobs=
new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();d.error(a)})}b.create=function(a){return c.createWorker().then(function(c){return new b(c,a)})};b.prototype.terminate=function(){this.worker.terminate()};b.prototype.open=function(a){var b=this,c=f.newJobId(),d=new k(function(a){b._outJobs["delete"](c);b._post({type:n,jobId:c})});this._outJobs.set(c,d);this._post({type:p,jobId:c,modulePath:a});
return d.promise};b.prototype._onMessage=function(a){if(a=f.receiveMessage(a))switch(a.type){case u:case g:this._onResponse(a);break;case n:this._onCancel(a);break;case q:this._onInvoke(a)}};b.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&a.cancel()};b.prototype._onInvoke=function(b){var c=this,d=b.methodName,e=b.jobId;b=b.data;var n=this._inJobs,q=m.workerMessages[d],h;try{if("function"!==typeof q)throw new TypeError(d+" is not a function");h=q.call(null,b)}catch(z){this._post({type:g,
jobId:e,error:f.toInvokeError(z)});return}a.isThenable(h)?(n.set(e,h),h.then(function(a){n["delete"](e);c._post({type:g,jobId:e},a)}).catch(function(a){n["delete"](e);a||(a={message:"Error encountered at method"+d});a.dojoType&&"cancel"===a.dojoType||c._post({type:g,jobId:e,error:f.toInvokeError(a)})})):this._post({type:g,jobId:e},h)};b.prototype._onResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs.get(b);d&&(this._outJobs["delete"](b),c?d.reject(l.fromJSON(JSON.parse(c))):
d.resolve(a))};b.prototype._post=function(a,b,c){return f.postMessage(this.worker,a,b,c)};return b}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(r,b,k,m,l,e,a,f,c,d,n,q,p){function u(a){return f.create(function(b){function d(f){if(f=q.receiveMessage(f))switch(f.type){case w:f=a;var h=l.workers.loaderUrl||
n.DEFAULT_LOADER_URL,p;null!=l["default"]?(p=k({},l),delete p["default"],p=JSON.parse(JSON.stringify(p))):p=JSON.parse(JSON.stringify(l));var g=l.workers.loaderConfig,g=n.default({baseUrl:g.baseUrl,locale:m.locale,has:k({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":c("esri-secure-context"),"esri-workers-supports-transfer-arraybuffer":c("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},g.has),map:k({},g.map),paths:k({},
g.paths),packages:g.packages||[]});f.postMessage({type:y,configure:{esriConfig:p,loaderUrl:h,loaderConfig:g}});break;case x:a.removeEventListener("message",d),a.removeEventListener("error",e),b(a)}}function e(b){b.preventDefault();a.removeEventListener("message",d);a.removeEventListener("error",e);h.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new p;a.addEventListener("message",d);a.addEventListener("error",e)}a.addEventListener("message",d);a.addEventListener("error",
e)})}Object.defineProperty(b,"__esModule",{value:!0});var g=d.normalize(r.toUrl("./worker.js")),t=!d.hasSameOrigin(g,location.href),h=a.getLogger("esri.core.workers"),v=null,x=q.MessageType.CONFIGURED,y=q.MessageType.CONFIGURE,w=q.MessageType.HANDSHAKE;b.createWorker=function(){if(!c("esri-workers"))return u(new p);if(!t){var a=void 0;try{a=new Worker(g)}catch(B){h.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new p}return u(a)}v||(v=e(g,{responseType:"text"}));
return v.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).catch(function(a){h.warn("Failed to create Worker. Fallback to execute module in main thread",a);return new p}).then(function(a){return u(a)})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(r,b,k,m,l){Object.defineProperty(b,"__esModule",{value:!0});m=m("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";
b.DEFAULT_LOADER_URL=l.makeAbsolute(l.removeQueryParameters(r.toUrl(m)));b.DEFAULT_CONFIG={baseUrl:function(){var b=l.removeQueryParameters(r.toUrl("dojo/x.js"));return l.makeAbsolute(b.slice(0,b.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},
{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};b.default=function(e){var a={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:k({},e.has),map:k({},e.map),packages:e.packages&&e.packages.concat()||[],paths:k({},e.paths)};e.hasOwnProperty("async")||(a.async=!0);e.hasOwnProperty("isDebug")||
(a.isDebug=!1);e.baseUrl||(a.baseUrl=b.DEFAULT_CONFIG.baseUrl);b.DEFAULT_CONFIG.packages.forEach(function(b){a:{for(var c=a.packages,d=0;d<c.length;d++)if(c[d].name===b.name)break a;b=k({},b);d=l.removeQueryParameters(r.toUrl(b.name+"/x.js"));d=d.slice(0,d.length-5);b.location=l.makeAbsolute(d);c.push(b)}});e=a.map=a.map||{};for(var f=0,c=Object.keys(b.DEFAULT_CONFIG.map);f<c.length;f++){var d=c[f];e[d]||(e[d]=b.DEFAULT_CONFIG.map[d])}return a}})},"esri/core/workers/WorkerFallback":function(){define(["require",
"exports","dojo/has","../global","./utils"],function(r,b,k,m,l){var e=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),a=m.MutationObserver||m.WebKitMutationObserver,f=function(){var b;if(m.process&&m.process.nextTick)b=function(a){m.process.nextTick(a)};else if(m.Promise)b=function(a){m.Promise.resolve().then(a)};
else if(a){var d=[],e=document.createElement("div");(new a(function(){for(;0<d.length;)d.shift()()})).observe(e,{attributes:!0});b=function(a){d.push(a);e.setAttribute("queueStatus","1")}}return b}();return function(){function a(){this._dispatcher=new e;this._isInitialized=!1;this._workerPostMessage({type:l.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&
this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a,b){var d=this;f(function(){d._workerMessageHandler(new MessageEvent("message",
{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};a.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)};a.prototype._workerPostMessage=function(a,b){var c=this;f(function(){c.dispatchEvent(new MessageEvent("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){var b=this;if(a=l.receiveMessage(a)){var c=a.jobId;switch(a.type){case l.MessageType.CONFIGURE:this._isInitialized||
this._workerPostMessage({type:l.MessageType.CONFIGURED});break;case l.MessageType.OPEN:r(["esri/core/workers/RemoteClient",a.modulePath],function(a,d){a=a.connect(d);b._workerPostMessage({type:l.MessageType.OPENED,jobId:c,data:a})})}}};return a}()})},"*noref":1}});define(["require","exports","./workers/workers"],function(r,b,k){Object.defineProperty(b,"__esModule",{value:!0});for(var m in k)b.hasOwnProperty(m)||(b[m]=k[m])});