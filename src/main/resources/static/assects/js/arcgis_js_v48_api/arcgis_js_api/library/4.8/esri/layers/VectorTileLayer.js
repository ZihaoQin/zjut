// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(l,g,e,c,a,b,m){function p(f){f&&(f=m.getOrigin(f),m.canUseXhr(f)||-1!==d.indexOf(f)||d.push(f))}function n(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];for(var f=void 0,b=0;b<d.length;++b)m.isProtocolRelative(d[b])?f&&(f=f.split("://")[0]+":"+d[b].trim()):f=m.isAbsolute(d[b])?
d[b]:m.join(f,d[b]);return f}function f(d,c,e){var h,q,g;"string"===typeof c?(c=m.normalize(c),p(c),h=m.urlToObject(c),h=a(h.path,{query:{f:"json"},responseType:"json"}),g=q=c):(h=b.resolve({data:c}),q=c.jsonUrl||null,g=e);return h.then(function(c){var a=c.data;c.ssl&&(q&&(q=q.replace(/^http:/i,"https:")),g&&(g=g.replace(/^http:/i,"https:")));if(a.sources){d.styleUrl=q||null;c=g?m.removeFile(g):m.appBaseUrl;d.styleBase=c;d.style=a;d.styleUrl&&p(d.styleUrl);if(d.source)a=b.resolve();else{b:if(a=a.sources,
a.esri)a=a.esri;else{for(var h=0,e=Object.keys(a);h<e.length;h++){var l=e[h];if("vector"===a[l].type){a=a[l];break b}}a=null}a=a.url?f(d,n(c,a.url)):f(d,a,c)}return a}if(a.sources)return b.reject("You must specify the URL or the JSON for a service or for a style.");d.sourceUrl=q||null;c=g?m.removeTrailingSlash(g)+"/":m.appBaseUrl;d.sourceBase=c;d.source=a;if(a.hasOwnProperty("tileInfo"))h=a;else{for(var h={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,
spatialReference:{wkid:102100}},l=(h.xmax-h.xmin)/512,e=[],u=a.hasOwnProperty("minzoom")?parseFloat(a.minzoom):0,t=a.hasOwnProperty("maxzoom")?parseFloat(a.maxzoom):16;u<t;u++){var r=l/Math.pow(2,u);e.push({level:u,scale:Math.floor(3779.527559055118*r),resolution:r})}l=0;for(t=a.tiles;l<t.length;l++)p(n(c,t[l]));h={capabilities:"TilesOnly",initialExtent:h,fullExtent:h,minScale:e[0].scale,maxScale:e[e.length-1].scale,tiles:a.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,
y:2.0037508342787E7},lods:e,spatialReference:{wkid:102100}}}}d.validatedSource=h;d.sourceUrl&&p(d.sourceUrl);a=d.style?b.resolve():null==a.defaultStyles?b.reject():"string"===typeof a.defaultStyles?f(d,n(c,a.defaultStyles,"root.json")):f(d,a.defaultStyles,n(c,"root.json"));return a})}Object.defineProperty(g,"__esModule",{value:!0});var d=c.defaults&&c.defaults.io.corsEnabledServers||c.request.corsEnabledServers;g.loadMetadata=function(d){var b={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,
style:null,styleBase:null,styleUrl:null},a="string"===typeof d?[d,null]:[null,d.jsonUrl],c=a[0],a=a[1],h=c?m.urlToObject(c):null;return f(b,d,a).then(function(){var d={layerDefinition:b.validatedSource,url:c,parsedUrl:h,serviceUrl:b.sourceUrl,style:b.style,styleUrl:b.styleUrl,spriteUrl:b.style.sprite&&n(b.styleBase,b.style.sprite),glyphsUrl:b.style.glyphs&&n(b.styleBase,b.style.glyphs)};p(d.spriteUrl);p(d.glyphsUrl);return d})}})},"esri/portal/support/jsonContext":function(){define(["require","exports",
"../../core/urlUtils","../Portal"],function(l,g,e,c){Object.defineProperty(g,"__esModule",{value:!0});g.createForItem=function(a){return{origin:"portal-item",url:e.urlToObject(a.itemUrl),portal:a.portal||c.getDefault()}}})},"esri/views/vectorTiles/SchemaHelper":function(){define(["require","exports"],function(l,g){return function(){function e(c,a){this.lockedSchemaPixelSize=c;this.isWGS84=a}e.prototype.getCompatibleLevelRowCol=function(c){var a=c[0],b=c[1];c=c[2];this.isWGS84?(b>>=1,c>>=1):256===
this.lockedSchemaPixelSize&&0<a&&(a--,b>>=1,c>>=1);return[a,b,c]};e.prototype.getSchemaShift=function(c,a){var b=0,m=0;if(256===this.lockedSchemaPixelSize||this.isWGS84)c[2]%2&&(b=2*a),c[1]%2&&(m=2*a);return[b,m]};e.prototype.adjustLevel=function(c){return this.isWGS84?c:256===this.lockedSchemaPixelSize?0<c?c-1:0:c};e.create256x256CompatibleTileInfo=function(c){if(!c)return null;if(256===c.rows&&256===c.cols)return c;for(var a=c.format,b=c.compressionQuality,m=c.dpi,p=c.origin,n=c.spatialReference,
f=4326===n.wkid,d=[],h,e,g=c.lods.length,l=0;l<g;l++){var r=c.lods[l];h=r.scale;e=f?r.resolution:2*r.resolution;d.push({level:r.level,scale:h,resolution:e})}return{rows:256,cols:256,dpi:m,format:a,compressionQuality:b,origin:p,spatialReference:n,lods:d}};e.create512x512CompatibleTileInfo=function(c){if(!c||256===c.rows||256===c.cols)return null;for(var a=c.format,b=c.compressionQuality,m=c.dpi,p=c.origin,n=c.spatialReference,f=[],d,h,e=c.lods.length,g=0;g<e;g++){var l=c.lods[g];d=l.scale;h=.5*l.resolution;
f.push({level:l.level,scale:d,resolution:h})}return{rows:512,cols:512,dpi:m,format:a,compressionQuality:b,origin:p,spatialReference:n,lods:f}};return e}()})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(l,g,e,c){return function(){function a(b,c){this.styleJSON=b;this.version=parseFloat(b.version);this.sprite=c?c.spriteUrl:b.sprite;this.glyphs=c?c.glyphsUrl:b.glyphs;this.layers=(b.layers||[]).map(a._create);this._identifyRefLayers()}
a.prototype._identifyRefLayers=function(){for(var b=[],a=[],c=0,n=0,f=this.layers;n<f.length;n++){var d=f[n];if(1===d.type){var h=d,e=d.sourceLayer,e=e+("|"+JSON.stringify(d.minzoom)),e=e+("|"+JSON.stringify(d.maxzoom)),e=e+("|"+JSON.stringify(d.filter));if(h.hasDataDrivenFill||h.hasDataDrivenOutline)e+="|"+JSON.stringify(c);b.push({key:e,layer:d})}2===d.type&&(h=d,e=d.sourceLayer,e+="|"+JSON.stringify(d.minzoom),e+="|"+JSON.stringify(d.maxzoom),e+="|"+JSON.stringify(d.filter),e+="|"+JSON.stringify(d.layout&&
d.layout["line-cap"]),e+="|"+JSON.stringify(d.layout&&d.layout["line-join"]),h.hasDataDrivenLine&&(e+="|"+JSON.stringify(c)),a.push({key:e,layer:d}));++c}this._assignRefLayers(b);this._assignRefLayers(a)};a.prototype._assignRefLayers=function(b){b.sort(function(d,f){return d.key<f.key?-1:d.key>f.key?1:0});for(var a,c,n=b.length,f=0;f<n;f++){var d=b[f];if(d.key===a)d.layer.refLayerId=c;else if(a=d.key,c=d.layer.id,1===d.layer.type&&!d.layer.getPaintProperty("fill-outline-color"))for(var h=f+1;h<n;h++){var e=
b[h];if(e.key===a){if(e.layer.getPaintProperty("fill-outline-color")){b[f]=e;b[h]=d;c=e.layer.id;break}}else break}}};a._create=function(b,a,p){a=1-1/(p.length+1)*(1+a);switch(b.type){case "background":return new c.BackgroundStyleLayer(0,b,a);case "fill":return new c.FillStyleLayer(1,b,a);case "line":return new c.LineStyleLayer(2,b,a);case "symbol":return new c.SymbolStyleLayer(3,b,a);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new c.CircleStyleLayer(4,b,
a)}throw Error("Unknown vector tile layer");};return a}()})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(l,g,e,c,a,b,m){Object.defineProperty(g,"__esModule",{value:!0});l=function(){function c(a,f,d){this.type=a;this.id=f.id;this.source=f.source;this.sourceLayer=f["source-layer"];this.minzoom=f.minzoom;this.maxzoom=f.maxzoom;
this.filter=f.filter;this.layout=f.layout;this.paint=f.paint;this.z=d;switch(a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=
b.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=b.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=b.StyleDefinition.circleLayoutDefinition,this._paintDefinition=b.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}c.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=a.createFilter(this.filter)};c.prototype.getLayoutProperty=
function(a){var f=this._layoutProperties;if(f)return f[a]};c.prototype.getPaintProperty=function(a){var f=this._paintProperties;if(f)return f[a]};c.prototype.getLayoutValue=function(a,f,d){var b,c=this._layoutProperties;c&&(c=c[a])&&(b=c.getValue(f,d));a=this._layoutDefinition[a];void 0===b&&(b=a["default"]);"enum"===a.type&&(b=a.values.indexOf(b));return b};c.prototype.getPaintValue=function(a,f,d){var b,c=this._paintProperties;c&&(c=c[a])&&(b=c.getValue(f,d));a=this._paintDefinition[a];void 0===
b&&(b=a["default"]);"enum"===a.type&&(b=a.values.indexOf(b));return b};c.prototype._parseLayout=function(a){var f={},d;for(d in a){var b=this._layoutDefinition[d];b&&(f[d]=new m(d,b,a[d]))}return f};c.prototype._parsePaint=function(a){var b={},d;for(d in a){var c=this._paintDefinition[d];c&&(b[d]=new m(d,c,a[d]))}return b};return c}();g.StyleLayer=l;c=function(a){function b(b,d,c){return a.call(this,b,d,c)||this}e(b,a);return b}(l);g.BackgroundStyleLayer=c;c=function(a){function b(b,d,c){b=a.call(this,
b,d,c)||this;d=b.getPaintProperty("fill-color");b.hasDataDrivenColor=d?d.isDataDriven:!1;d=b.getPaintProperty("fill-opacity");b.hasDataDrivenOpacity=d?d.isDataDriven:!1;b.hasDataDrivenFill=b.hasDataDrivenColor||b.hasDataDrivenOpacity;d=b.getPaintProperty("fill-outline-color");b.outlineUsesFillColor=!d;b.hasDataDrivenOutlineColor=d?d.isDataDriven:!1;b.hasDataDrivenOutline=(d?b.hasDataDrivenOutlineColor:b.hasDataDrivenColor)||b.hasDataDrivenOpacity;return b}e(b,a);return b}(l);g.FillStyleLayer=c;c=
function(b){function a(a,d,c){a=b.call(this,a,d,c)||this;d=a.getPaintProperty("line-color");a.hasDataDrivenColor=d?d.isDataDriven:!1;d=a.getPaintProperty("line-opacity");a.hasDataDrivenOpacity=d?d.isDataDriven:!1;d=a.getPaintProperty("line-width");a.hasDataDrivenWidth=d?d.isDataDriven:!1;a.hasDataDrivenLine=a.hasDataDrivenColor||a.hasDataDrivenOpacity||a.hasDataDrivenWidth;return a}e(a,b);return a}(l);g.LineStyleLayer=c;c=function(a){function b(b,d,c){b=a.call(this,b,d,c)||this;d=b.getPaintProperty("icon-color");
b.hasDataDrivenIconColor=d?d.isDataDriven:!1;d=b.getPaintProperty("icon-opacity");b.hasDataDrivenIconOpacity=d?d.isDataDriven:!1;d=b.getLayoutProperty("icon-size");b.hasDataDrivenIconSize=d?d.isDataDriven:!1;b.hasDataDrivenIcon=b.hasDataDrivenIconColor||b.hasDataDrivenIconOpacity||b.hasDataDrivenIconSize;d=b.getPaintProperty("text-color");b.hasDataDrivenTextColor=d?d.isDataDriven:!1;d=b.getPaintProperty("text-opacity");b.hasDataDrivenTextOpacity=d?d.isDataDriven:!1;d=b.getLayoutProperty("text-size");
b.hasDataDrivenTextSize=d?d.isDataDriven:!1;b.hasDataDrivenText=b.hasDataDrivenTextColor||b.hasDataDrivenTextOpacity||b.hasDataDrivenTextSize;return b}e(b,a);return b}(l);g.SymbolStyleLayer=c;l=function(b){function a(a,d,c){a=b.call(this,a,d,c)||this;d=a.getPaintProperty("circle-radius");a.hasDataDrivenRadius=d?d.isDataDriven:!1;d=a.getPaintProperty("circle-color");a.hasDataDrivenColor=d?d.isDataDriven:!1;d=a.getPaintProperty("circle-opacity");a.hasDataDrivenOpacity=d?d.isDataDriven:!1;d=a.getPaintProperty("circle-stroke-width");
a.hasDataDrivenStrokeWidth=d?d.isDataDriven:!1;d=a.getPaintProperty("circle-stroke-color");a.hasDataDrivenStrokeColor=d?d.isDataDriven:!1;d=a.getPaintProperty("circle-stroke-opacity");a.hasDataDrivenStrokeOpacity=d?d.isDataDriven:!1;d=a.getPaintProperty("circle-blur");a.hasDataDrivenBlur=d?d.isDataDriven:!1;return a}e(a,b);return a}(l);g.CircleStyleLayer=l;l=function(){return function(a,b,c){this.cap=a.getLayoutValue("line-cap",b,c);this.join=a.getLayoutValue("line-join",b,c);this.miterLimit=a.getLayoutValue("line-miter-limit",
b,c);this.roundLimit=a.getLayoutValue("line-round-limit",b,c)}}();g.LineLayout=l;l=function(){return function(a,b,c,d){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,d);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,d);this.optional=a.getLayoutValue("icon-optional",b,d);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,d);this.size=a.getLayoutValue("icon-size",b,d);this.rotate=a.getLayoutValue("icon-rotate",b,d);this.padding=a.getLayoutValue("icon-padding",
b,d);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,d);this.offset=a.getLayoutValue("icon-offset",b,d);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();g.IconLayout=l;l=function(){return function(a,b,c,d){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,d);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,d);this.optional=a.getLayoutValue("text-optional",b,d);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,d);this.fontArray=a.getLayoutValue("text-font",
b,d);this.maxWidth=a.getLayoutValue("text-max-width",b,d);this.lineHeight=a.getLayoutValue("text-line-height",b,d);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,d);this.justify=a.getLayoutValue("text-justify",b,d);this.anchor=a.getLayoutValue("text-anchor",b,d);this.maxAngle=a.getLayoutValue("text-max-angle",b,d);this.size=a.getLayoutValue("text-size",b,d);this.rotate=a.getLayoutValue("text-rotate",b,d);this.padding=a.getLayoutValue("text-padding",b,d);this.keepUpright=a.getLayoutValue("text-keep-upright",
b,d);this.transform=a.getLayoutValue("text-transform",b,d);this.offset=a.getLayoutValue("text-offset",b,d);2===this.rotationAlignment&&(this.rotationAlignment=c?0:1)}}();g.TextLayout=l})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(l,g){return function(){function e(c,a,b){this._op=c;"$type"===a?(this._val=b instanceof Array?b.map(function(a){return e._types.indexOf(a)}):e._types.indexOf(b),this._op+=11):(this._key=a,this._val=b)}e.prototype.filter=function(c){switch(this._op){case 0:return this._val;
case 1:return c.values[this._key]===this._val;case 2:return c.values[this._key]!==this._val;case 3:return c.values[this._key]<this._val;case 4:return c.values[this._key]>this._val;case 5:return c.values[this._key]<=this._val;case 6:return c.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(c.values[this._key]);case 8:return-1===this._val.indexOf(c.values[this._key]);case 9:for(var a=0,b=this._val;a<b.length;a++){var e=b[a];if(e.filter(c))return!0}return!1;case 10:a=0;for(b=this._val;a<
b.length;a++)if(e=b[a],!e.filter(c))return!1;return!0;case 11:a=0;for(b=this._val;a<b.length;a++)if(e=b[a],e.filter(c))return!1;return!0;case 12:return c.type===this._val;case 13:return c.type!==this._val;case 14:return c.type<this._val;case 15:return c.type>this._val;case 16:return c.type>=this._val;case 17:return c.type<=this._val;case 18:return-1!==this._val.indexOf(c.type);case 19:return-1===this._val.indexOf(c.type)}};e.createFilter=function(c){if(!c)return new e(0,void 0,!0);var a=c[0];if(1>=
c.length)return new e(0,void 0,"any"!==a);switch(a){case "\x3d\x3d":return new e(1,c[1],c[2]);case "!\x3d":return new e(2,c[1],c[2]);case "\x3e":return new e(4,c[1],c[2]);case "\x3c":return new e(3,c[1],c[2]);case "\x3e\x3d":return new e(6,c[1],c[2]);case "\x3c\x3d":return new e(5,c[1],c[2]);case "in":return new e(7,c[1],c.slice(2));case "!in":return new e(8,c[1],c.slice(2));case "any":return new e(9,void 0,c.slice(1).map(e.createFilter.bind(this)));case "all":return new e(10,void 0,c.slice(1).map(e.createFilter.bind(this)));
case "none":return new e(11,void 0,c.slice(1).map(e.createFilter.bind(this)));default:throw Error("invalid operator: "+a);}};e._types=["Unknown","Point","LineString","Polygon"];return e}()})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(l,g){Object.defineProperty(g,"__esModule",{value:!0});l=function(){function e(){}e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};e.fillLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],default:"visible"}};e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",
values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",
minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},
"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none",
"uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};
e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",
default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};e.symbolPaintDefinition={"icon-opacity":{type:"number",
minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",
default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",
length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return e}();g.StyleDefinition=l})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(l,g,e,c){return function(){function a(b,c,e){this.isDataDriven=
!1;switch(c.type){case "number":b=!0;break;case "color":b=!0;e=a._parseColor(e);break;case "array":b="number"===c.value;break;default:b=!1}null==e&&(e=c.default);b&&"interval"===e.type&&(b=!1);var g=e&&e.stops&&0<e.stops.length;if(g)for(var f=0,d=e.stops;f<d.length;f++){var h=d[f];h[1]=this._validate(h[1],c)}if(this.isDataDriven=e?!!e.property:!1)if(void 0!==e.default&&(e.default=this._validate(e.default,c)),g)switch(e.type){case "identity":this.getValue=this._buildIdentity(e,c);break;case "categorical":this.getValue=
this._buildCategorical(e,c);break;default:this.getValue=b?this._buildInterpolate(e,c):this._buildInterval(e,c)}else this.getValue=this._buildIdentity(e,c);else g?this.getValue=b?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,c),this.getValue=this._buildSimple(e))}a.prototype._validate=function(a,c){if("number"===c.type){if(a<c.minimum)return c.minimum;if(a>c.maximum)return c.maximum}return a};a.prototype._buildSimple=function(a){return function(){return a}};a.prototype._buildIdentity=
function(b,c){var e=this;return function(g,f){var d;f&&(d=f.values[b.property],"color"===c.type&&(d=a._parseColor(d)));void 0===d&&(d=b.default);return void 0!==d?e._validate(d,c):c.default}};a.prototype._buildCategorical=function(a,c){var b=this;return function(e,f){var d;f&&(d=f.values[a.property]);d=b._categorical(d,a.stops);return void 0!==d?d:void 0!==a.default?a.default:c.default}};a.prototype._buildInterval=function(a,c){var b=this;return function(e,f){var d;f&&(d=f.values[a.property]);return"number"===
typeof d?b._interval(d,a.stops):void 0!==a.default?a.default:c.default}};a.prototype._buildInterpolate=function(a,c){var b=this;return function(e,f){var d;f&&(d=f.values[a.property]);return"number"===typeof d?b._interpolate(d,a.stops,a.base||1):void 0!==a.default?a.default:c.default}};a.prototype._buildZoomInterpolate=function(a){var b=this;return function(c){return b._interpolate(c,a.stops,a.base||1)}};a.prototype._buildZoomInterval=function(a){var b=this;return function(c){return b._interval(c,
a.stops)}};a.prototype._categorical=function(a,c){for(var b=c.length,e=0;e<b;e++)if(c[e][0]===a)return c[e][1]};a.prototype._interval=function(a,c){for(var b=c.length,e=0,f=0;f<b;f++)if(c[f][0]<=a)e=f;else break;return c[e][1]};a.prototype._interpolate=function(a,e,g){for(var b,f,d=e.length,h=0;h<d;h++){var l=e[h];if(l[0]<=a)b=l;else{f=l;break}}if(b&&f){h=f[0]-b[0];a-=b[0];g=1===g?a/h:(Math.pow(g,a)-1)/(Math.pow(g,h)-1);if(Array.isArray(b[1])){b=b[1];f=f[1];a=[];for(h=0;h<b.length;h++)a.push(c.interpolate(b[h],
f[h],g));return a}return c.interpolate(b[1],f[1],g)}if(b)return b[1];if(f)return f[1]};a._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};a._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){if(b=new e(b),!this._isEmpty(b))return e.toUnitRGBA(b)}else return b&&b.default&&(b.default=a._parseColor(b.default)),b&&b.stops&&(b.stops=b.stops.map(function(b){return[b[0],a._parseColor(b[1])]})),b};return a}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(l,g){function e(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(g,"__esModule",{value:!0});g.C_INFINITY=Number.POSITIVE_INFINITY;g.C_PI=Math.PI;g.C_2PI=2*g.C_PI;g.C_PI_BY_2=g.C_PI/2;g.C_RAD_TO_256=128/g.C_PI;g.C_256_TO_RAD=g.C_PI/128;g.C_DEG_TO_256=256/360;g.C_DEG_TO_RAD=g.C_PI/180;g.C_SQRT2=1.414213562;g.C_SQRT2_INV=1/g.C_SQRT2;var c=1/Math.LN2;g.positiveMod=e;g.radToByte=function(a){return e(a*g.C_RAD_TO_256,256)};g.degToByte=function(a){return e(a*g.C_DEG_TO_256,256)};g.log2=
function(a){return Math.log(a)*c};g.sqr=function(a){return a*a};g.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};g.interpolate=function(a,b,c){return a*(1-c)+b*c};g.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"*noref":1}});
define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/Error ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/vectorTiles/SchemaHelper ../views/vectorTiles/style/StyleRepository".split(" "),function(l,
g,e,c,a,b,m,p,n,f,d,h,q,t,u,r,y,z,A,v,w,B,C,x,D){return function(g){function k(a,b){a=g.call(this)||this;a.capabilities=null;a.currentStyleInfo=null;a.fullExtent=null;a.style=null;a.operationalLayerType="VectorTileLayer";a.tileInfo=null;a.tilemapCache=null;a.type="vector-tile";a.url=null;return a}c(k,g);k.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?e({url:a},b):a};k.prototype.load=function(){var a=this,c=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1}).then(function(){if(a.portalItem&&
a.portalItem.id){var c=a.portalItem.itemUrl+"/resources/styles/root.json";return b(c,{query:{f:"json"}}).then(function(b){b.data&&a.read({url:c},C.createForItem(a.portalItem))})}}).always(function(){return a.loadStyle()});this.addResolvingPromise(c);return this.when()};Object.defineProperty(k.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&d.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):null},enumerable:!0,configurable:!0});k.prototype.readCapabilities=
function(a,b){var c=b.capabilities&&b.capabilities.split(",").map(function(a){return a.toLowerCase().trim()});a=!!b.exportTilesAllowed;c=-1!==c.indexOf("tilemap");return{operations:{supportsExportTiles:a,supportsTileMap:c},exportTiles:a?{maxExportTilesCount:+b.maxExportTilesCount}:null}};Object.defineProperty(k.prototype,"parsedUrl",{get:function(){return this.serviceUrl?f.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&
this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});k.prototype.writeStyleUrl=function(a,b){a&&d.isProtocolRelative(a)&&(a="https:"+a);b.styleUrl=a};k.prototype.readTileIndexType=
function(a,b){return b.type};k.prototype.readTileIndexUrl=function(a,b){return d.join(this.serviceUrl,b.tileMap)};k.prototype.readTilemapCache=function(a,b){return b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?new w({layer:this}):null};k.prototype.readTileServers=function(a,b){var c=this;a=b.tiles;this.serviceUrl&&a.forEach(function(a,b,e){d.isAbsolute(a)?e[b]=a:e[b]=d.join(c.serviceUrl,a)});return a};k.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};
k.prototype.readCompatibleTileInfo256=function(a,b){return v.fromJSON(x.create256x256CompatibleTileInfo(b.tileInfo))};k.prototype.readCompatibleTileInfo512=function(a,b){return v.fromJSON(x.create512x512CompatibleTileInfo(b.tileInfo))};k.prototype.loadStyle=function(a){a=a||this.style||this.url;if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;var b=this._loadingPromise;this._loadingPromise=this._getSourceAndStyle(a);b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise};
k.prototype.getTileUrl=function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())};k.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new m("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};k.prototype.importLayerViewModule=
function(a){switch(a.type){case "2d":return n.create(function(a){return l(["../views/2d/layers/VectorTileLayerView2D"],a)});case "3d":return n.create(function(a){return l(["../views/3d/layers/VectorTileLayerView3D"],a)})}};k.prototype._getSourceAndStyle=function(a){var b=this;return a?B.loadMetadata(a).then(function(c){b._set("currentStyleInfo",{serviceUrl:c.serviceUrl,styleUrl:c.styleUrl,spriteUrl:c.spriteUrl,glyphsUrl:c.glyphsUrl,style:c.style,layerDefinition:c.layerDefinition});"string"===typeof a?
(b.url=a,b.style=null):(b.url=null,b.style=a);b._set("styleRepository",new D(c.style,c));b.read(c.layerDefinition,{origin:"service"})}):n.reject(Error("invalid style!"))};k.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3]&&b[3].toLowerCase()))for(var b=b[2]||"",c=0,e=["World_Basemap","World_Basemap_v2","World_Basemap_GCS_v2","World_Basemap_WGS84"];c<
e.length;c++){var f=e[c];if(-1<f.toLowerCase().indexOf(a))return d.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+f)}};a([h.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],k.prototype,"attributionDataUrl",null);a([h.property({readOnly:!0})],k.prototype,"capabilities",void 0);a([h.reader("capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount"])],k.prototype,"readCapabilities",null);a([h.property({readOnly:!0})],k.prototype,"currentStyleInfo",void 0);a([h.property({type:q,
readOnly:!0})],k.prototype,"fullExtent",void 0);a([h.property()],k.prototype,"style",void 0);a([h.property({readOnly:!0,dependsOn:["serviceUrl"]})],k.prototype,"parsedUrl",null);a([h.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],k.prototype,"serviceUrl",null);a([h.property({type:t,dependsOn:["tileInfo"],readOnly:!0})],k.prototype,"spatialReference",null);a([h.property({readOnly:!0})],k.prototype,"styleRepository",void 0);a([h.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],
json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],k.prototype,"styleUrl",null);a([h.writer(["portal-item","web-document"],"styleUrl")],k.prototype,"writeStyleUrl",null);a([h.property({readOnly:!0})],k.prototype,"tileIndexType",void 0);a([h.reader("tileIndexType",["tileIndexType","type"])],k.prototype,"readTileIndexType",null);a([h.property({readOnly:!0})],k.prototype,"tileIndexUrl",void 0);a([h.reader("tileIndexUrl",["tileIndexUrl","tileMap"])],k.prototype,
"readTileIndexUrl",null);a([h.property({readOnly:!0,type:v})],k.prototype,"tileInfo",void 0);a([h.property({readOnly:!0,type:w})],k.prototype,"tilemapCache",void 0);a([h.reader("tilemapCache",["capabilities"])],k.prototype,"readTilemapCache",null);a([h.property({readOnly:!0})],k.prototype,"tileServers",void 0);a([h.reader("tileServers",["tiles"])],k.prototype,"readTileServers",null);a([h.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],k.prototype,"type",void 0);a([h.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},
"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],k.prototype,"url",void 0);a([h.property({readOnly:!0})],k.prototype,"version",void 0);a([h.reader("version",["version","currentVersion"])],k.prototype,"readVersion",null);a([h.property({readOnly:!0})],k.prototype,"compatibleTileInfo256",void 0);a([h.reader("compatibleTileInfo256",["tileInfo"])],k.prototype,"readCompatibleTileInfo256",null);a([h.property({readOnly:!0})],k.prototype,"compatibleTileInfo512",void 0);a([h.reader("compatibleTileInfo512",
["tileInfo"])],k.prototype,"readCompatibleTileInfo512",null);return k=a([h.subclass("esri.layers.VectorTileLayer")],k)}(h.declared(u,y,z,A,p,r))});