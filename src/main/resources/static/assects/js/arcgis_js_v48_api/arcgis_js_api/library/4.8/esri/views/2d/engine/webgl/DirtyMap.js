// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define(["require","exports","./Utils"],function(k,l,n){function m(a,c,e){if(!a.allDirty)if(null!=a.from&&null!=a.count){var b=Math.min(a.from,c);c=Math.max(a.from+a.count,c+e)-b;a.from=b;a.count=c}else a.from=c,a.count=e}Object.defineProperty(l,"__esModule",{value:!0});k=function(){function a(){this._dirties=n.createGeometryData(function(c){return{indices:{from:null,count:null,allDirty:!1}}},function(c,a){return{vertices:{from:null,count:null,allDirty:!1}}})}a.prototype.markAllClean=function(){for(var c=
0,a=this._dirties;c<a.length;c++){var b=a[c];b.data.indices.from=null;b.data.indices.count=null;b.data.indices.allDirty=!1;for(var d in b.buffers)b.buffers[d].data.vertices.from=null,b.buffers[d].data.vertices.count=null,b.buffers[d].data.vertices.allDirty=!1}};a.prototype.markAllDirty=function(){for(var a=0,e=this._dirties;a<e.length;a++){var b=e[a];b.data.indices.allDirty=!0;for(var d in b.buffers)b.buffers[d].data.vertices.allDirty=!0}};a.prototype.forEach=function(a){for(var c=new Map,b=0;b<this._dirties.length;++b){var d=
this._dirties[b],g=new Map,h;for(h in d.buffers){var f=d.buffers[h].data.vertices;(f.allDirty||null!=f.from&&null!=f.count)&&g.set(h,f)}d=d.data.indices;f=void 0;f=d.allDirty||null!=d.from&&null!=d.count?{indices:d,vertices:g}:{indices:void 0,vertices:g};(f.indices||0<f.vertices.size)&&c.set(b,f)}c.forEach(function(b,c){a({indices:b.indices||null,vertices:0<b.vertices.size?b.vertices:null},c)})};a.prototype.markDirtyIndices=function(a,e,b){m(this._dirties[a].data.indices,e,b)};a.prototype.markDirtyVertices=
function(a,e,b,d){m(this._dirties[a].buffers[e].data.vertices,b,d)};return a}();l.default=k});