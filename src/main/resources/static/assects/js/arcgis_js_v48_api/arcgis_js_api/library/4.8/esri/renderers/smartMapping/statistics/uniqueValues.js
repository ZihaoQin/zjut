// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper ../../../core/promiseUtils ./support/utils ../support/utils".split(" "),function(l,m,k,b,c,e){function f(a){if(!a||!a.layer||!a.field&&!a.valueExpression)return b.reject(c.createError("unique-values:missing-parameters","'layer' and 'field' or 'valueExpression' parameters are required"));var h=a.valueExpression||a.sqlExpression,f=h&&!a.sqlExpression;if(h)if(f){if(!a.view)return b.reject(c.createError("unique-values:missing-parameters","View is required when 'valueExpression' is specified"))}else if(!a.valueExpression)return b.reject(c.createError("unique-values:missing-parameters",
"'valueExpression' parameters are required"));var d=k({},a);a=[0,1,2,3];var g=e.createLayerAdapter(d.layer,a);return(d.layer=g)?g.load().then(function(){var a=e.getFieldsList({field:d.field,valueExpression:d.valueExpression});return(a=c.verifyBasicFieldValidity(g,a,"unique-values:invalid-parameters"))?b.reject(a):d}):b.reject(c.createError("unique-values:invalid-parameters","'layer' must be one of these types: "+e.getLayerTypeLabels(a).join(", ")))}return function(a){return f(a).then(function(a){return a.layer.uniqueValues({field:a.field,
valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,features:a.features,returnAllCodedValues:a.returnAllCodedValues,view:a.view})})}});