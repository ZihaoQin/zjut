// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper dojox/gfx/_base ../../Color ../../request ../../core/LRUMap ../../core/promiseUtils ../../core/screenUtils".split(" "),function(n,d,k,l,p,q,r,t,f){function m(a){if(!a)return null;var b,c=a.constructor,e=f.pt2px(a.width);switch(a.type){case "simple-fill":case "picture-fill":case "simple-marker":b=m(a.outline);break;case "simple-line":a.style!==c.STYLE_NULL&&0!==e&&(b={color:a.color,style:u(a.style),width:e,cap:a.cap,join:a.join===c.JOIN_MITER?
f.pt2px(a.miterLimit):a.join});break;default:b=null}return b}Object.defineProperty(d,"__esModule",{value:!0});var v=n.toUrl("../../symbols/patterns/"),w={left:"start",center:"middle",right:"end",justify:"start"},x={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},h=new r(1E3);d.getSVGAlign=function(a){return a=(a=a.horizontalAlignment)&&w[a.toLowerCase()]||"middle"};d.getSVGBaseline=function(a){return(a=a.verticalAlignment)&&x[a.toLowerCase()]||"alphabetic"};
d.getSVGBaselineShift=function(a){return"bottom"===a.verticalAlignment?"super":null};d.getFill=function(a){var b=a.style,c=null;if(a){var e=a.constructor;switch(a.type){case "simple-marker":b!==e.STYLE_CROSS&&b!==e.STYLE_X&&(c=a.color);break;case "simple-fill":b===e.STYLE_SOLID?c=a.color:b!==e.STYLE_NULL&&(c=k({},l.defaultPattern,{src:v+b+".png",width:8,height:8}));break;case "picture-fill":c=k({},l.defaultPattern,{src:a.url,width:f.pt2px(a.width)*a.xscale,height:f.pt2px(a.height)*a.yscale,x:f.pt2px(a.xoffset),
y:f.pt2px(a.yoffset)});break;case "text":c=a.color}}return c};d.getPatternUrlWithColor=function(a,b){var c=a+"-"+b;return h.has(c)?t.resolve(h.get(c)):q(a,{responseType:"image",allowImageDataAccess:!0}).then(function(a){a=a.data;var e=a.naturalWidth,d=a.naturalHeight,g=document.createElement("canvas");g.width=e;g.height=d;var f=g.getContext("2d");f.fillStyle=b;f.fillRect(0,0,e,d);f.globalCompositeOperation="destination-in";f.drawImage(a,0,0);a=g.toDataURL();h.set(c,a);return a})};d.getStroke=m;d.create2DColorRamp=
function(a){var b=a.colors,c=a.numClasses,e=a.size;a=a.surface.createGroup();for(var e=(e||75)/c,d=0;d<c;d++)for(var f=d*e,g=0;g<c;g++){var h=b[d][g];a.createRect({x:g*e,y:f,width:e,height:e}).setFill(h).setStroke(null)}return a};var u=function(){var a={};return function(b){if(a[b])return a[b];var c=b.replace(/-/g,"");return a[b]=c}}();d.defaultThematicColor=new p([128,128,128])});