// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/dom-geometry dojo/i18n!./ScaleBar/nls/ScaleBar ../core/watchUtils ../core/accessorSupport/decorators ../geometry/ScreenPoint ./Widget ./ScaleBar/ScaleBarViewModel ./support/widget".split(" "),function(r,t,k,d,l,f,m,e,n,p,q,c){return function(h){function b(a){a=h.call(this)||this;a.unit="non-metric";a.view=null;a.viewModel=new q;return a}k(b,h);b.prototype.postInitialize=function(){var a=this;this.own([m.whenTrue(this,
"view.stationary",function(){return a.scheduleRender()})])};Object.defineProperty(b.prototype,"style",{set:function(a){this._set("style","dual"===this.unit?"line":a)},enumerable:!0,configurable:!0});b.prototype.castStyle=function(a){return"line"===a?a:"ruler"};b.prototype.castUnit=function(a){return"metric"===a||"dual"===a?a:"non-metric"};b.prototype.render=function(){var a,b="disabled"===this.get("viewModel.state"),e=(a={},a["esri-disabled"]=b,a),d,f;if(!b){var g=this.unit;a=this.style;b="metric"===
g||"dual"===g;("non-metric"===g||"dual"===g)&&(g=this.viewModel.getScaleBarProperties(50,"non-metric"))&&(f="ruler"===a?this._renderRuler(g):this._renderLine(g,"bottom"));b&&(b=this.viewModel.getScaleBarProperties(50,"metric"))&&(d="ruler"===a?this._renderRuler(b):this._renderLine(b,"top"))}return c.tsx("div",{afterCreate:this._handleRootCreation,bind:this,class:this.classes("esri-scale-bar esri-widget",e)},d,f)};b.prototype._renderRuler=function(a){var b=2*Math.round(a.length),d=2*a.value+" "+(f[a.unit]||
f.unknownUnit);return c.tsx("div",{class:this.classes("esri-scale-bar__bar-container","esri-scale-bar__bar-container--ruler"),key:"esri-scale-bar__ruler"},c.tsx("div",{class:"esri-scale-bar__ruler",styles:{width:b+"px"}},c.tsx("div",{class:"esri-scale-bar__ruler-block"}),c.tsx("div",{class:"esri-scale-bar__ruler-block"}),c.tsx("div",{class:"esri-scale-bar__ruler-block"}),c.tsx("div",{class:"esri-scale-bar__ruler-block"})),c.tsx("div",{class:this.classes("esri-scale-bar__label-container","esri-scale-bar__label-container--ruler")},
c.tsx("div",{class:"esri-scale-bar__label"},"0"),c.tsx("div",{class:"esri-scale-bar__label"},a.value),c.tsx("div",{class:"esri-scale-bar__label"},d)))};b.prototype._renderLine=function(a,b){var d,e=2*a.value+" "+(f[a.unit]||f.unknownUnit),e=c.tsx("div",{class:this.classes("esri-scale-bar__label-container","esri-scale-bar__label-container--line"),key:"esri-scale-bar__label"},c.tsx("div",{class:"esri-scale-bar__label"},e));b=(d={},d["esri-scale-bar__line--top"]="top"===b,d["esri-scale-bar__line--bottom"]=
"bottom"===b,d);a=2*Math.round(a.length);a=c.tsx("div",{class:this.classes("esri-scale-bar__line",b),key:"esri-scale-bar__line",styles:{width:a+"px"}});return c.tsx("div",{class:this.classes("esri-scale-bar__bar-container","esri-scale-bar__bar-container--line"),key:"esri-scale-bar__line-container"},[a,e])};b.prototype._handleRootCreation=function(a){var b=this.viewModel;b&&(a=l.position(a,!0),b.scaleComputedFrom=new n({x:a.x,y:a.y}))};d([e.property({dependsOn:["unit"]}),c.renderable()],b.prototype,
"style",null);d([e.cast("style")],b.prototype,"castStyle",null);d([e.property(),c.renderable()],b.prototype,"unit",void 0);d([e.cast("unit")],b.prototype,"castUnit",null);d([e.aliasOf("viewModel.view"),c.renderable()],b.prototype,"view",void 0);d([e.property(),c.renderable(["viewModel.state"])],b.prototype,"viewModel",void 0);return b=d([e.subclass("esri.widgets.ScaleBar")],b)}(e.declared(p))});