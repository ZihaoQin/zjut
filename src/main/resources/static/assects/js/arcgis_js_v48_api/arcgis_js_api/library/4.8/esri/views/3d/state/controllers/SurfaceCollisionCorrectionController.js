// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../camera/constraintUtils ../../camera/intersectionUtils ./CameraController".split(" "),function(e,f,h,k,l,m,g){Object.defineProperty(f,"__esModule",{value:!0});e=function(d){function c(a){var b=d.call(this)||this;b.handles=new k;b.view=a.view;b.desiredCamera=a.desiredCamera.copy();return b}h(c,d);Object.defineProperty(c.prototype,"canStop",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"constraintEnabled",{get:function(){return this.view.state.constraints.collision.enabled},enumerable:!0,configurable:!0});c.prototype.onControllerStart=function(a){var b=this;d.prototype.onControllerStart.call(this,a);this.handles.add(this.view.basemapTerrain.on("elevation-change",function(a){return b.handleElevationChangeEvent(a)}));this.applyCorrection()};c.prototype.onControllerEnd=function(a){this.handles.removeAll();d.prototype.onControllerEnd.call(this,a)};c.prototype.handleElevationChangeEvent=
function(a){m.eyeWithinExtent(this.view,this.desiredCamera,a.extent,a.spatialReference)&&this.applyCorrection()};c.prototype.applyCorrection=function(){var a=this;this.view.state.updateCamera(function(b){b.copyViewFrom(a.desiredCamera);l.applySurfaceCollision(a.view,b,1)||a.constraintEnabled||(a.state=g.State.Stopped)})};return c}(g.CameraController);f.SurfaceCollisionCorrectionController=e});