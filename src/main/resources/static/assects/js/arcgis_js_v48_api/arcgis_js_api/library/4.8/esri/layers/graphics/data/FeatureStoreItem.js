// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define(["require","exports","@dojo/shim/Set","../../../geometry/support/aaBoundingRect","../optimizedFeatures"],function(e,h,l,m,d){Object.defineProperty(h,"__esModule",{value:!0});var k={esriGeometryPoint:d.convertToPoint,esriGeometryPolyline:d.convertToPolyline,esriGeometryPolygon:d.convertToPolygon,esriGeometryMultipoint:d.convertToMultipoint},g=new d.OptimizedGeometry;e=function(){function b(){this.oid=this.service=null;this.bounds=m.create();this.feature=null}b.acquire=function(a,c){void 0===
a&&(a=null);void 0===c&&(c=null);var f;0===b._pool.length?f=new b:(f=b._pool.pop(),this._set.delete(f));f.acquire(a,c);return f};b.release=function(a){a&&!this._set.has(a)&&(a.release(),this._pool.push(a),this._set.add(a))};b.prototype.acquire=function(a,c){void 0===a&&(a=null);void 0===c&&(c=null);this.service=c;a&&c&&this.set(a)};b.prototype.release=function(){this.oid=this.feature=this.service=null};b.prototype.set=function(a){this.feature=a;this.oid=a.attributes[this.service.objectIdField];d.getBoundsOptimizedGeometry(this.bounds,
a.geometry,this.service.hasZ,this.service.hasM)};b.prototype.getCentroid=function(){var a=this.service,c=a.hasZ,b=a.hasM;if("esriGeometryPolygon"!==a.geometryType)return null;this.feature.centroid||(this.feature.centroid=d.getCentroidOptimizedGeometry(new d.OptimizedGeometry,this.feature.geometry,c,b));return d.convertToPoint(this.feature.centroid,c,b)};b.prototype.getCentroidQuantized=function(a){var c=this.service,b=c.hasZ,c=c.hasM;this.feature.centroid||(this.feature.centroid=d.getCentroidOptimizedGeometry(new d.OptimizedGeometry,
this.feature.geometry,b,c));d.quantizeOptimizedGeometry(g,this.feature.centroid,b,c,"esriGeometryPoint",a);return d.convertToPoint(g,b,c)};b.prototype.getGeometry=function(){var a=this.service;return k[a.geometryType](this.feature.geometry,a.hasZ,a.hasM)};b.prototype.getGeometryQuantized=function(a){var c=this.service,b=c.geometryType,e=c.hasZ,c=c.hasM;d.quantizeOptimizedGeometry(g,this.feature.geometry,e,c,b,a);return k[b](g,e,c)};b.prototype.getAttributes=function(){return this.feature.attributes};
b._pool=[];b._set=new l.default;return b}();h.default=e});