// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../lib/glMatrix ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(g,h,u,v,m,p,d){Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function a(){}a.prototype.updateSettings=function(e){this.settings=e};a.prototype.write=function(e,a,c){var b=q;b[0]=c.position0[0];b[1]=c.position0[1];b[2]=c.position0[2];b[3]=c.position1[0];b[4]=c.position1[1];b[5]=c.position1[2];
k[0]=5381;for(b=0;b<r.length;b++)k[0]=31*k[0]+r[b];l.reseed(k[0]);var b=l.randomRangeInt(0,255),d=l.randomRangeInt(0,this.settings.variants-1),f=l.randomFloat(),f=-(1-Math.min(f/.7,1))+Math.max(0,f-.7)/(1-.7),f=255*(Math.pow(Math.abs(f),1.2)*(0>f?-1:1)*.5+.5);e.position0.setVec(a,c.position0);e.position1.setVec(a,c.position1);e.componentIndex.set(a,c.componentIndex);e.variantOffset.set(a,b);e.variantStroke.set(a,d);e.variantExtension.set(a,f)};a.prototype.trim=function(a,b){return a.slice(0,b)};return a}();
h.CommonBufferWriter=n;var q=new Float32Array(6),r=new Uint32Array(q.buffer),k=new Uint32Array(1),l=new (function(){function a(a){void 0===a&&(a=1);this.seed=a}a.prototype.randomFloat=function(){return this.step()/a.LARGE_PRIME};a.prototype.randomRangeInt=function(a,b){b-=a;return Math.round(a+this.randomFloat()*b)};a.prototype.reseed=function(a){this.seed=a};a.prototype.step=function(){return this.seed=this.seed*a.SMALL_PRIME%a.LARGE_PRIME};a.LARGE_PRIME=2147483647;a.SMALL_PRIME=16807;return a}());
g=function(){function a(){this.commonWriter=new n}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};a.prototype.allocate=function(a){return d.RegularEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);c=m.vec3d.normalize(m.vec3d.add(c.faceNormal0,c.faceNormal1,t));a.normal.setVec(b,c)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=d.RegularEdgeInstancesLayout;a.glLayout=p.glLayout(d.RegularEdgeInstancesLayout,
{prefixA:!0,divisor:1});return a}();h.RegularEdgeBufferWriter=g;g=function(){function a(){this.commonWriter=new n}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};a.prototype.allocate=function(a){return d.SilhouetteEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);a.normalA.setVec(b,c.faceNormal0);a.normalB.setVec(b,c.faceNormal1)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=d.SilhouetteEdgeInstancesLayout;
a.glLayout=p.glLayout(d.SilhouetteEdgeInstancesLayout,{prefixA:!0,divisor:1});return a}();h.SilhouetteEdgeBufferWriter=g;var t=m.vec3d.create()});