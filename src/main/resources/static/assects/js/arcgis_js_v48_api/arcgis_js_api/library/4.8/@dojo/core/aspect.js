//>>built
(function(k){"object"===typeof module&&"object"===typeof module.exports?(k=k(require,exports),void 0!==k&&(module.exports=k)):"function"===typeof define&&define.amd&&define(["require","exports","@dojo/shim/WeakMap","./lang"],k)})(function(k,f){function q(a){return a&&"function"===typeof a.get&&"function"===typeof a.set}function n(a,c,b,d){var h=a&&a[c],g={id:r++,advice:b,receiveArguments:d};if(h)if("after"===c){for(;h.next&&(h=h.next););h.next=g;g.previous=h}else a&&(a.before=g),g.next=h,h.previous=
g;else a&&(a[c]=g);b=h=void 0;return t.createHandle(function(){var b=g||{},e=b.previous,e=void 0===e?void 0:e,b=b.next,b=void 0===b?void 0:b;!a||e||b?(e?e.next=b:a&&(a[c]=b),b&&(b.previous=e)):a[c]=void 0;g&&delete g.advice;a=g=void 0})}function p(a,c,b){if("around"===c)a=u(b.apply(this,[a]));else{a=u(a);var d=l.get(a);"before"===c?(d.before||(d.before=[])).unshift(b):(d.after||(d.after=[])).push(b)}return a}function m(a,c){var b=q(a)?a.get(c):a&&a[c],d;b&&b.target===a?d=b:(d=function(){for(var a=
r,b=arguments,c,e=d.before;e;)e.advice&&(b=e.advice.apply(this,b)||b),e=e.next;d.around&&d.around.advice&&(c=d.around.advice(this,b));for(e=d.after;e&&void 0!==e.id&&e.id<a;){if(e.advice)if(e.receiveArguments){var f=e.advice.apply(this,b);c=void 0===f?c:f}else c=e.advice.call(this,c,b);e=e.next}return c},q(a)?a.set(c,d):a&&(a[c]=d),b&&(d.around={advice:function(a,c){return b.apply(a,c)}}),d.target=a);return d}function u(a){function c(){for(var a=this,b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];
var e=l.get(c),f=e.before,d=e.after,e=e.joinPoint;f&&(b=f.reduce(function(b,c){return c.apply(a,b)||b},b));f=e.apply(this,b);d&&(f=d.reduce(function(c,d){return d.apply(a,[c].concat(b))},f));return f}if(l.has(a)){a=l.get(a);var b=a.before,d=a.after;b&&(b=b.slice(0));d&&(d=d.slice(0));l.set(c,{joinPoint:a.joinPoint,before:b,after:d})}else l.set(c,{joinPoint:a});return c}function v(a,c){return p(a,"around",c)}function w(a,c,b){var d=m(a,c),f=d.around,g;b&&(g=b(function(){if(f&&f.advice)return f.advice(this,
arguments)}));d.around={advice:function(a,b){return g?g.apply(a,b):f&&f.advice&&f.advice(a,b)}};return t.createHandle(function(){g=d=void 0})}function x(a,c){return p(a,"before",c)}function y(a,c,b){return n(m(a,c),"before",b)}Object.defineProperty(f,"__esModule",{value:!0});var z=k("@dojo/shim/WeakMap"),t=k("./lang"),l=new z.default,r=0;f.after=function(a,c,b){return"function"===typeof a?p(a,"after",c):n(m(a,c),"after",b)};f.aroundJoinPoint=v;f.aroundObject=w;f.around=function(a,c,b){return"function"===
typeof a?v(a,c):w(a,c,b)};f.beforeJoinPoint=x;f.beforeObject=y;f.before=function(a,c,b){return"function"===typeof a?x(a,c):y(a,c,b)};f.on=function(a,c,b){return n(m(a,c),"after",b,!0)}});