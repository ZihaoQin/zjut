// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./ListItem ./support/layerListUtils".split(" "),function(w,v,r,b,q,g,u,m,k,h,p,d){var x=g.ofType(p);return function(t){function n(c){c=t.call(this)||this;c._handles=new m;c.listItemCreatedFunction=
null;c.operationalItems=new x;c.view=null;return c}r(n,t);n.prototype.initialize=function(){var c=this;this._handles.add(k.init(this,"view",function(){return c._viewHandles()}),"view")};n.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};Object.defineProperty(n.prototype,"state",{get:function(){var c=this.get("view");return this.get("view.ready")?"ready":c?"loading":"disabled"},enumerable:!0,configurable:!0});n.prototype.triggerAction=
function(c,a){c&&this.emit("trigger-action",{action:c,item:a})};n.prototype._createLayerViewHandles=function(c){var a=this,e=this._handles;e.remove("layer-views");this._compileList();c&&e.add(c.on("change",function(){return a._compileList()}),"layer-views")};n.prototype._createMapLayerHandles=function(c){var a=this,e=this._handles;e.remove("map-layers");this._compileList();c&&e.add(c.on("change",function(){return a._compileList()}),"map-layers")};n.prototype._watchItemProperties=function(c){var a=
this;this._handles.add([c.children.on("change",function(){a._modifyListItemChildren(c.children)})],"children-change-"+c.uid)};n.prototype._modifyListItemChildren=function(c){var a=this;c.forEach(function(c){return a._modifyListItem(c)})};n.prototype._modifyListItem=function(c){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:c});this._modifyListItemChildren(c.children)};n.prototype._createListItem=function(c){c=new p({layer:c,view:this.view});this._watchItemProperties(c);
return c};n.prototype._removeAllItems=function(){var c=this._handles,a=this.operationalItems;a.forEach(function(a){c.remove("children-change-"+a.uid)});a.removeAll()};n.prototype._getViewableLayers=function(c){if(c)return c.filter(function(a){return"hide"!==d.findLayerListMode(a)})};n.prototype._watchLayersListMode=function(c){var a=this,e=this._handles;e.remove("layer-list-mode");c&&c.forEach(function(c){e.add(k.watch(c,"listMode",function(){return a._compileList()}),"layer-list-mode")})};n.prototype._compileList=
function(){var c=this.get("view.map.layers");this._watchLayersListMode(c);(c=this._getViewableLayers(c))&&c.length?(this._createNewItems(c),this._modifyOrRemoveItems(c),this._sortItems(c)):this._removeAllItems()};n.prototype._createNewItems=function(c){var a=this,e=this.operationalItems;c.forEach(function(c){e.find(function(a){return a.layer===c})||e.add(a._createListItem(c))})};n.prototype._modifyOrRemoveItems=function(c){var a=this,e=this._handles,b=this.operationalItems;b.forEach(function(d){d&&
(c.find(function(a){return d.layer===a})?a._modifyListItem(d):(e.remove("children-change-"+d.uid),b.remove(d)))})};n.prototype._sortItems=function(c){this.operationalItems.sort(function(a,e){a=c.indexOf(a.layer);e=c.indexOf(e.layer);return a>e?-1:a<e?1:0})};n.prototype._viewHandles=function(){var c=this,a=this._handles,e=this.view;a.remove(["map-layers","layer-views","view-layers"]);this._compileList();e&&a.add([k.init(this,"view.map.layers",function(a){return c._createMapLayerHandles(a)}),k.init(this,
"view.layerViews",function(a){return c._createLayerViewHandles(a)}),k.init(this,"listItemCreatedFunction",function(){return c._compileList()})],"view-layers")};b([h.property()],n.prototype,"listItemCreatedFunction",void 0);b([h.property({type:x})],n.prototype,"operationalItems",void 0);b([h.property({dependsOn:["view.ready"],readOnly:!0})],n.prototype,"state",null);b([h.property()],n.prototype,"view",void 0);b([h.property()],n.prototype,"triggerAction",null);return n=b([h.subclass("esri.widgets.LayerList.LayerListViewModel")],
n)}(h.declared(q,u))})},"esri/widgets/LayerList/ListItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/Sublayer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(w,v,r,b,q,g,u,m,k,h,p,d,x,t,n,c,a){w=g.ofType({key:"type",defaultKeyValue:"button",base:d,typeMap:{button:x,toggle:n,slider:t}});var e=g.ofType(w);return function(d){function l(a){a=d.call(this)||this;a._handles=new u;a._layerViewPromise=null;a.actionsSections=new e;a.actionsOpen=!1;a.children=new (g.ofType(t));a.error=null;a.layer=null;a.layerView=null;a.open=!1;a.panel=null;a.parent=null;a.view=null;a.visible=null;return a}r(l,d);t=l;l.prototype.initialize=function(){var a=this;this._handles.add([k.init(this,
"layer",function(c){return a._watchLayerProperties(c)}),k.init(this,"view",function(c){return a._updateChildren(c)}),k.init(this,"panel",function(c){return a._setListItemOnPanel(c)}),k.init(this,["layer","view"],function(){return a._getLayerView()})])};l.prototype.destroy=function(){this._layerViewPromise&&this._layerViewPromise.cancel();this._layerViewPromise=null;this._handles.destroy();this.view=this._handles=null};l.prototype.castPanel=function(a){this.get("panel.open")&&!a.hasOwnProperty("open")&&
(a.open=!0);return a?new c(a):null};Object.defineProperty(l.prototype,"title",{get:function(){var a=this.get("layer.layer");return(!a||a&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(a){void 0===a?this._clearOverride("title"):this._override("title",a)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"updating",{get:function(){var a=this.layerView;return a?a.updating:this._isLayerUpdating(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,
"visibleAtCurrentScale",{get:function(){return!a.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"visibilityMode",{get:function(){return a.findLayerVisibilityMode(this.layer)||"independent"},enumerable:!0,configurable:!0});l.prototype.clone=function(){return new t({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,
view:this.view,visible:this.visible})};l.prototype._setListItemOnPanel=function(a){a&&(a.listItem=this)};l.prototype._updateChildren=function(a){var c=this.children;c&&c.forEach(function(c){return c.view=a})};l.prototype._addChildren=function(c){var e=this;this.children.removeAll();if(c){var b=[];c.forEach(function(c){a.canDisplayLayer(c)&&(c=new t({layer:c,parent:e,view:e.view}),b.unshift(c))});this.children.addMany(b)}};l.prototype._watchSublayerChanges=function(a){var c=this;a&&this._handles.add(a.on("change",
function(){c._addChildren(a)}),"layer")};l.prototype._initializeChildLayers=function(a){this._addChildren(a);this._watchSublayerChanges(a)};l.prototype._watchLayerProperties=function(c){var e=this;if(this._handles&&(this._handles.remove("layer"),c)){var b=a.getNormalizedChildLayerProperty(c);b&&this._handles.add(k.init(c,b,function(){c.hasOwnProperty(b)&&e._initializeChildLayers(c[b])}),"layer")}};l.prototype._getLayerView=function(){var a=this,c=this.layer,e=this.view;if(c&&e){var b=this._layerViewPromise=
e.whenLayerView(c);b.then(function(c){b===a._layerViewPromise&&(a._layerViewPromise=null,a._set("layerView",c))}).catch(function(c){b===a._layerViewPromise&&(a._layerViewPromise=null)})}};l.prototype._isLayerUpdating=function(a){return a instanceof p?!1:a&&"loading"===a.loadStatus};var t;b([h.property({type:e})],l.prototype,"actionsSections",void 0);b([h.property()],l.prototype,"actionsOpen",void 0);b([h.property({type:g})],l.prototype,"children",void 0);b([h.aliasOf("layer.loadError")],l.prototype,
"error",void 0);b([h.property()],l.prototype,"layer",void 0);b([h.property({readOnly:!0})],l.prototype,"layerView",void 0);b([h.property()],l.prototype,"open",void 0);b([h.property({type:c})],l.prototype,"panel",void 0);b([h.cast("panel")],l.prototype,"castPanel",null);b([h.property()],l.prototype,"parent",void 0);b([h.property({dependsOn:["layer.layer.loaded","layer.title"]})],l.prototype,"title",null);b([h.property({dependsOn:["layer.loadStatus","layerView.updating"],readOnly:!0})],l.prototype,
"updating",null);b([h.property({value:null})],l.prototype,"view",void 0);b([h.aliasOf("layer.visible")],l.prototype,"visible",void 0);b([h.property({dependsOn:["layer.minScale","layer.maxScale","view.scale"],readOnly:!0})],l.prototype,"visibleAtCurrentScale",null);b([h.property({dependsOn:["layer.visibilityMode"],readOnly:!0})],l.prototype,"visibilityMode",null);return l=t=b([h.subclass("esri.widgets.LayerList.ListItem")],l)}(h.declared(q,m))})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper dojo/io-query ../../PopupTemplate ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/write ../FeatureLayer ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../renderers/support/typeUtils ../../symbols/Symbol3D ../../tasks/QueryTask ../../tasks/support/Query".split(" "),
function(w,v,r,b,q,g,u,m,k,h,p,d,x,t,n,c,a,e,C,l,D,A){var B=p.getLogger("esri.layers.support.Sublayer"),E=0;return function(k){function f(){var a=null!==k&&k.apply(this,arguments)||this;a._sublayersHandles=null;a.popupEnabled=!0;return a}r(f,k);p=f;Object.defineProperty(f.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(a){this._setAndNotifyLayer("definitionExpression",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"id",
{get:function(){var a=this._get("id");return null==a?E++:a},set:function(a){this._set("id",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(a){this._setAndNotifyLayer("labelingInfo",a)},enumerable:!0,configurable:!0});f.prototype.writeLabelingInfo=function(a,c,e,b){(!b||b.writeAsDynamic)&&a&&a.length&&(c.layerDefinition={drawingInfo:{labelingInfo:a.map(function(a){return a.write({},b)})}})};Object.defineProperty(f.prototype,
"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(a){this._setAndNotifyLayer("labelsVisible",a)},enumerable:!0,configurable:!0});f.prototype.writeLabelsVisible=function(a,c,e,b){if(!b||b.writeAsDynamic)c.showLabels=a};Object.defineProperty(f.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(a){this._set("legendEnabled",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"layer",{set:function(a){this._set("layer",
a);this.sublayers&&this.sublayers.forEach(function(c){return c.layer=a})},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(a){this._set("minScale",a)},enumerable:!0,configurable:!0});f.prototype.readMinScale=function(a,c){return c.minScale||c.layerDefinition&&c.layerDefinition.minScale||0};f.prototype.writeMinScale=function(a,c,e,b){if(b&&b.writeOverridesOnly&&(e=b&&b.serviceSublayer)&&e.minScale===a&&e.maxScale===
this.maxScale)return;c.minScale=a};Object.defineProperty(f.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(a){this._set("maxScale",a)},enumerable:!0,configurable:!0});f.prototype.readMaxScale=function(a,c){return c.maxScale||c.layerDefinition&&c.layerDefinition.maxScale||0};f.prototype.writeMaxScale=function(a,c,e,b){if(b&&b.writeOverridesOnly&&(e=b&&b.serviceSublayer)&&e.maxScale===a&&e.minScale===this.minScale)return;c.maxScale=a};Object.defineProperty(f.prototype,
"opacity",{get:function(){return this._get("opacity")},set:function(a){this._setAndNotifyLayer("opacity",a)},enumerable:!0,configurable:!0});f.prototype.readOpacity=function(a,c){a=c.layerDefinition;return 1-.01*(null!=a.transparency?a.transparency:a.drawingInfo.transparency)};f.prototype.writeOpacity=function(a,c,e,b){if(!b||b.writeAsDynamic)c.layerDefinition={drawingInfo:{transparency:100-100*a}}};f.prototype.writeParent=function(a,c,e,b){b&&b.writeOverridesOnly||(c.parentLayerId=this.parent&&this.parent!==
this.layer?this.parent.id:-1)};Object.defineProperty(f.prototype,"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(a){this._set("popupTemplate",a)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"renderer",{get:function(){return this._get("renderer")},set:function(a){if(a)for(var c=0,e=a.getSymbols();c<e.length;c++)if(e[c].isInstanceOf(l)){B.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",a)},enumerable:!0,configurable:!0});
f.prototype.readRenderer=function(a,c,b){if(a=c.layerDefinition.drawingInfo.renderer||void 0)(a=e.read(a,c,b)||void 0)||B.error("Failed to create renderer",{rendererDefinition:c.drawingInfo.renderer,layer:this,context:b});return a};f.prototype.writeRenderer=function(a,c,e,b){if(!b||b.writeAsDynamic)c.layerDefinition={drawingInfo:{renderer:a.toJSON()}}};Object.defineProperty(f.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,type:a.MAPLAYER}},set:function(a){this._setAndNotifyLayer("source",
a)},enumerable:!0,configurable:!0});f.prototype.writeSource=function(c,e,b,d){d&&!d.writeAsDynamic&&d.writeOverridesOnly||(e.layerDefinition={source:a.sourceToJSON(c)})};Object.defineProperty(f.prototype,"sublayers",{set:function(a){var c=this,e=this._get("sublayers");e&&(e.forEach(function(a){a.parent=null;a.layer=null}),this._sublayersHandles.forEach(function(a){return a.remove()}),this._sublayersHandles=null);a&&(a.forEach(function(a){a.parent=c;a.layer=c.layer}),this._sublayersHandles=[a.on("after-add",
function(a){a=a.item;a.parent=c;a.layer=c.layer}),a.on("after-remove",function(a){a=a.item;a.parent=null;a.layer=null})]);this._set("sublayers",a)},enumerable:!0,configurable:!0});f.prototype.castSublayers=function(a){return x.default(m.ofType(p),a)};f.prototype.writeSublayers=function(a,c,e,b){b&&b.writeOverridesOnly||(c[e]=this.get("sublayers.length")?this.sublayers.map(function(a){return a.id}).toArray().reverse():null)};Object.defineProperty(f.prototype,"title",{get:function(){return this._get("title")},
set:function(a){this._set("title",a)},enumerable:!0,configurable:!0});f.prototype.writeTitle=function(a,c,e,b){if(b&&b.writeOverridesOnly&&(b=b&&b.serviceSublayer)&&b.title===a)return;c[e]=a};Object.defineProperty(f.prototype,"url",{get:function(){var c=this.layer,b=this.source;if(!c)return null;if(a.isMapLayerSource(b))return c.parsedUrl.path+"/"+b.mapLayerId;b={layer:JSON.stringify({source:a.sourceToJSON(this.source)})};return c.parsedUrl.path+"/dynamicLayer?"+g.objectToQuery(b)},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"visible",{get:function(){return this._get("visible")},set:function(a){this._setAndNotifyLayer("visible",a)},enumerable:!0,configurable:!0});f.prototype.writeVisible=function(a,c,b,e){if(e&&e.writeOverridesOnly&&(e=e&&e.serviceSublayer)&&e.visible===a)return;c[b]=a};f.prototype.clone=function(){var a=new p;this.hasOwnProperty("definitionExpression")&&(a.definitionExpression=this.definitionExpression);this.hasOwnProperty("id")&&(a.id=this.id);this.hasOwnProperty("labelingInfo")&&
(a.labelingInfo=h.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&(a.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(a.legendEnabled=this.legendEnabled);this.hasOwnProperty("visible")&&(a.visible=this.visible);this.hasOwnProperty("layer")&&(a.layer=this.layer);this.hasOwnProperty("minScale")&&(a.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(a.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(a.opacity=this.opacity);this.hasOwnProperty("parent")&&
(a.parent=this.parent);this.hasOwnProperty("popupEnabled")&&(a.popupEnabled=this.popupEnabled);this.hasOwnProperty("popupTemplate")&&(a.popupTemplate=this.popupTemplate.clone());this.hasOwnProperty("renderer")&&(a.renderer=this.renderer.clone());this.hasOwnProperty("source")&&(a.source=h.clone(this.source));this.hasOwnProperty("sublayers")&&(a.sublayers=this.sublayers.clone());this.hasOwnProperty("title")&&(a.title=this.title);return a};f.prototype.createQuery=function(){return new A({returnGeometry:!0,
where:this.definitionExpression||"1\x3d1"})};f.prototype.createFeatureLayer=function(){if(this.hasOwnProperty("sublayers"))return null;var c=this.layer&&this.layer.parsedUrl,b=this.source,e=null;c&&(e=a.isMapLayerSource(b)?c.path+"/"+b.mapLayerId:c.path+"/dynamicLayer");c=new n({url:e});this.hasOwnProperty("definitionExpression")&&(c.definitionExpression=this.definitionExpression);this.hasOwnProperty("labelingInfo")&&(c.labelingInfo=h.clone(this.labelingInfo));this.hasOwnProperty("labelsVisible")&&
(c.labelsVisible=this.labelsVisible);this.hasOwnProperty("legendEnabled")&&(c.legendEnabled=this.legendEnabled);this.hasOwnProperty("visible")&&(c.visible=this.visible);this.hasOwnProperty("minScale")&&(c.minScale=this.minScale);this.hasOwnProperty("maxScale")&&(c.maxScale=this.maxScale);this.hasOwnProperty("opacity")&&(c.opacity=this.opacity);this.hasOwnProperty("popupTemplate")&&(c.popupTemplate=this.popupTemplate.clone());this.hasOwnProperty("renderer")&&(c.renderer=this.renderer.clone());this.hasOwnProperty("source")&&
a.isDataLayerSource(this.source)&&(c.dynamicDataSource=h.clone(this.source));this.hasOwnProperty("title")&&(c.title=this.title);return c};f.prototype.queryFeatures=function(a){var c=this;void 0===a&&(a=this.createQuery());return(new D({url:this.url})).execute(a).then(function(a){a&&a.features&&a.features.forEach(function(a){a.sourceLayer=c});return a})};f.prototype.toExportImageJSON=function(){var c={id:this.id,source:a.sourceToJSON(this.source)};this.definitionExpression&&(c.definitionExpression=
this.definitionExpression);if(this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var b=c.drawingInfo={};this.renderer&&(b.renderer=this.renderer.toJSON());null!=this.labelsVisible&&(b.showLabels=this.labelsVisible);!1!==this.labelsVisible&&this.labelingInfo&&(b.labelingInfo=this.labelingInfo.map(function(a){return a.write({},{origin:"service"})}),b.showLabels=!0);null!=this.opacity&&(b.transparency=100-100*this.opacity)}return c};f.prototype._setAndNotifyLayer=function(a,
c){var b=this.layer;this._get(a)!==c&&(this._set(a,c),b&&b.emit("sublayer-update",{propertyName:a}))};var p;b([d.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],f.prototype,"definitionExpression",null);b([d.property({type:Number,json:{write:{ignoreOrigin:!0}}})],f.prototype,"id",null);b([d.property({value:null,type:[c],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"}}})],f.prototype,
"labelingInfo",null);b([d.writer("labelingInfo")],f.prototype,"writeLabelingInfo",null);b([d.property({type:Boolean,json:{read:{source:"showLabels"}}})],f.prototype,"labelsVisible",null);b([d.writer("labelsVisible")],f.prototype,"writeLabelsVisible",null);b([d.property({type:Boolean,value:!0,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],f.prototype,"legendEnabled",null);b([d.property({value:null})],f.prototype,"layer",null);b([d.property({type:Number,value:0,json:{write:{overridePolicy:function(a,
c,b){if(t.willPropertyWrite(this,"maxScale",{},b))return{ignoreOrigin:!0}}}}})],f.prototype,"minScale",null);b([d.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],f.prototype,"readMinScale",null);b([d.writer("minScale")],f.prototype,"writeMinScale",null);b([d.property({type:Number,value:0,json:{write:{overridePolicy:function(a,c,b){if(t.willPropertyWrite(this,"minScale",{},b))return{ignoreOrigin:!0}}}}})],f.prototype,"maxScale",null);b([d.reader("portal-item","maxScale",["maxScale",
"layerDefinition.maxScale"])],f.prototype,"readMaxScale",null);b([d.writer("maxScale")],f.prototype,"writeMaxScale",null);b([d.property({type:Number})],f.prototype,"opacity",null);b([d.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],f.prototype,"readOpacity",null);b([d.writer("opacity")],f.prototype,"writeOpacity",null);b([d.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],f.prototype,"parent",void 0);b([d.writer("parent")],
f.prototype,"writeParent",null);b([d.property({type:Boolean})],f.prototype,"popupEnabled",void 0);b([d.property({value:null,type:u,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],f.prototype,"popupTemplate",null);b([d.property({types:C.types,value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],f.prototype,"renderer",null);b([d.reader("renderer",["layerDefinition.drawingInfo.renderer"])],f.prototype,"readRenderer",null);b([d.writer("renderer")],f.prototype,"writeRenderer",
null);b([d.property({cast:a.castSource,json:{read:{source:"layerDefinition.source",reader:a.sourceFromJSON},write:{target:"layerDefinition.source"}}})],f.prototype,"source",null);b([d.writer("source")],f.prototype,"writeSource",null);b([d.property({value:null,json:{type:[Number],write:{target:"subLayerIds",allowNull:!0}}})],f.prototype,"sublayers",null);b([d.cast("sublayers")],f.prototype,"castSublayers",null);b([d.writer("sublayers")],f.prototype,"writeSublayers",null);b([d.property({type:String,
value:null,json:{read:{source:"name"},write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],f.prototype,"title",null);b([d.writer("title")],f.prototype,"writeTitle",null);b([d.property({readOnly:!0,dependsOn:["layer","source"]})],f.prototype,"url",null);b([d.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility"}}})],f.prototype,"visible",null);b([d.writer("visible")],f.prototype,"writeVisible",null);b([q(0,d.cast(A))],f.prototype,"queryFeatures",
null);return f=p=b([d.subclass("esri.layers.support.Sublayer")],f)}(d.declared(k))})},"esri/support/actions/ActionSlider":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(w,v,r,b,q,g){return function(g){function m(b){b=g.call(this)||this;b.displayValueEnabled=!1;b.max=1;b.min=0;b.step=.1;b.type="slider";b.value=null;return b}r(m,g);k=m;m.prototype.clone=function(){return new k({active:this.active,
className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};var k;b([q.property()],m.prototype,"displayValueEnabled",void 0);b([q.property()],m.prototype,"max",void 0);b([q.property()],m.prototype,"min",void 0);b([q.property()],m.prototype,"step",void 0);b([q.property()],m.prototype,"value",void 0);return m=k=b([q.subclass("esri.support.Action.ActionSlider")],
m)}(q.declared(g))})},"esri/widgets/LayerList/ListItemPanel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Handles ../../core/Identifiable ../../core/requireUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../widgets/Widget ../support/widget".split(" "),function(w,v,r,b,q,g,u,m,k,h,p){return function(d){function g(b){b=d.call(this)||this;b._legend=null;b._handles=new q;b.content=null;b.image=null;b.listItem=
null;b.open=!1;b.visible=!0;return b}r(g,d);g.prototype.postInitialize=function(){var b=this;this.own([m.init(this,"content",function(d){return b._createLegend(d)})])};g.prototype.destroy=function(){var b=this._legend;b&&b.destroy();this._legend=null};Object.defineProperty(g.prototype,"className",{get:function(){var b=this.image,d=this._getFirstWidget();return this._get("className")||!b&&d?d.iconClass:""},set:function(b){void 0===b?this._clearOverride("className"):this._override("className",b)},enumerable:!0,
configurable:!0});Object.defineProperty(g.prototype,"title",{get:function(){var b=this._getFirstWidget();return this._get("title")||b?b.label:""},set:function(b){void 0===b?this._clearOverride("title"):this._override("title",b)},enumerable:!0,configurable:!0});g.prototype.render=function(){return p.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};g.prototype._renderContent=function(b,d){d=this._legend;var c=this.listItem;return b?"legend"===b&&c&&c.view&&c.layer?p.tsx("div",{class:this.classes("esri-layer-list-panel__content",
"esri-layer-list-panel__content--legend"),key:b},d&&d.render()):"string"===typeof b?p.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:b,innerHTML:b}):p.isWidget(b)?p.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:b},b.render()):b instanceof HTMLElement?p.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:b,bind:b,
afterCreate:this._attachToNode}):null:null};g.prototype._renderContents=function(){var b=this,d=this.content;return Array.isArray(d)?d.map(function(c,a){return b._renderContent(c,a)}):this._renderContent(d,0)};g.prototype._getLegendOptions=function(b){if(b){var d=b.layer;b=b.view;if(d&&b)return{view:b,layerInfos:[{layer:d,title:""}]}}};g.prototype._createLegend=function(b){var d=this;this._hasLegend(b)&&!this._legend&&u.when(w,"../Legend").then(function(c){var a=d._handles,b=new c(d._getLegendOptions(d.listItem));
d._legend=b;d.notifyChange("className");d.notifyChange("title");c=m.init(d,["listItem.view","listItem.layer"],function(){return d._updateLegend(b)});a.add(c,"legends");d.scheduleRender()})};g.prototype._hasLegend=function(b){return"legend"===b?!0:Array.isArray(b)?b.some(function(b){return"legend"===b}):!1};g.prototype._attachToNode=function(b){b.appendChild(this)};g.prototype._updateLegend=function(b){var d=this.listItem;if(d){var c=d.layer;b.view=d.view;b.layerInfos=[{layer:c,title:null}]}};g.prototype._getWidget=
function(b){return"legend"===b?this._legend:p.isWidget(b)?b:null};g.prototype._getFirstWidget=function(){var b=this,d=this.content;if(Array.isArray(d)){var c=null;d.some(function(a){(a=b._getWidget(a))&&(c=a);return!!a});return c}return this._getWidget(d)};b([k.property({dependsOn:["content","image"]})],g.prototype,"className",null);b([k.property(),p.renderable()],g.prototype,"content",void 0);b([k.property()],g.prototype,"image",void 0);b([k.property()],g.prototype,"listItem",void 0);b([k.property({dependsOn:["content"]})],
g.prototype,"title",null);b([k.property(),p.renderable()],g.prototype,"open",void 0);b([k.property()],g.prototype,"visible",void 0);return g=b([k.subclass("esri.widgets.LayerList.ListItemPanel")],g)}(k.declared(h,g))})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["require","exports"],function(w,v){function r(b){if(b)return b.hasOwnProperty("listMode")?b.listMode:void 0}function b(b){if(b)return b.hasOwnProperty("minScale")?b.minScale:void 0}function q(b){if(b)return b.hasOwnProperty("maxScale")?
b.maxScale:void 0}Object.defineProperty(v,"__esModule",{value:!0});v.findLayerListMode=r;v.findLayerMinScale=b;v.findLayerMaxScale=q;v.findLayerVisibilityMode=function(b){if(b){var g=b.get("layer.capabilities");return g&&g.exportMap&&g.exportMap.supportsSublayerVisibility?"inherited":b.hasOwnProperty("visibilityMode")?b.visibilityMode:void 0}};v.getNormalizedChildLayerProperty=function(b){if(b&&"hide-children"!==b.listMode&&"wmts"!==b.type)return"group"===b.type?"layers":"sublayers"};v.canDisplayLayer=
function(b){return"hide"!==r(b)};v.isLayerOutsideScaleRange=function(g,u){if(!g||isNaN(u))return!1;var m=b(g);g=q(g);m=!isNaN(m)&&0<m&&u>=m;u=!isNaN(g)&&0<g&&u<=g;return m||u}})},"*now":function(w){w(['dojo/i18n!*preload*esri/widgets/nls/LayerList*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!../nls/common dojo/i18n!./LayerList/nls/LayerList ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./LayerList/LayerListViewModel ./support/widget".split(" "),function(w,v,r,b,q,g,u,m,k,h,p,d){function x(b){var c=b.children;b.actionsOpen&&(b.actionsOpen=!1);c.forEach(function(a){return x(a)})}var t=w.toUrl("./LayerList/images/default-action.svg");return function(h){function c(){var a=
h.call(this)||this;a._handles=new u;a.iconClass="esri-icon-layers";a.statusIndicatorsVisible=!0;a.label=g.widgetLabel;a.listItemCreatedFunction=null;a.operationalItems=null;a.view=null;a.viewModel=new p;return a}r(c,h);c.prototype.postInitialize=function(){var a=this,b=this.operationalItems;this.own(m.on(this,"operationalItems","change",function(){return a._itemsChanged(b)}))};c.prototype.destroy=function(){this._handles.destroy();this._handles=null};c.prototype.triggerAction=function(a,b){};c.prototype.render=
function(){var a=this,b,c=this._getItems(),l=this.get("viewModel.state"),c=0===c.length?d.tsx("div",{class:"esri-layer-list__no-items"},g.noItemsToDisplay):d.tsx("ul",{class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},c.map(function(b,c){return a._renderItem(b,null)})),l=(b={},b["esri-hidden"]="loading"===l,b["esri-disabled"]="disabled"===l,b);return d.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",l)},c)};
c.prototype._getItems=function(){var a=this;return this.operationalItems.toArray().filter(function(b){return a.errorsVisible||!b.error})};c.prototype._renderItem=function(a,b){var c=this,e,k,h,m,n=this.id+"_"+a.uid,p=n+"_actions",f=n+"__list",n=n+"__title",u=!!a.children.length,t=!!a.error,v=t?g.layerError:"",r=a.visibilityMode,w=a.children&&a.children.toArray(),x=(e={},e["esri-layer-list__list--exclusive"]="exclusive"===r,e["esri-layer-list__list--inherited"]="inherited"===r,e["esri-layer-list__list--independent"]=
"inherited"!==r&&"exclusive"!==r,e);e=(k={},k["esri-layer-list__item--has-children"]=u,k["esri-layer-list__item--error"]=!!v,k["esri-layer-list__item--updating"]=a.updating&&!b&&this.statusIndicatorsVisible,k["esri-layer-list__item--invisible-at-scale"]=!a.visibleAtCurrentScale,k);var z=this._countActions(a.actionsSections),y=a.panel;k=y&&y.open?y.render():null;var y=y&&y.visible?this._renderPanelButton(y):null,F=(h={},h["esri-layer-list__item-actions-menu-item--active"]=a.actionsOpen,h);h=a.actionsOpen?
q.close:q.open;h=z?d.tsx("div",{key:"esri-layer-list__actions-menu-toggle","data-item":a,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",F),tabindex:"0",role:"button","aria-controls":p,"aria-label":h,title:h},d.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null;h=z||y?d.tsx("div",{key:"esri-layer-list__actions-menu",class:"esri-layer-list__item-actions-menu"},y,h):null;p=z?this._renderActionsSections(a,
a.actionsSections,p):null;r=u?d.tsx("ul",{key:"esri-layer-list__list-items",id:f,class:this.classes("esri-layer-list__list",x),"aria-expanded":a.open?"true":"false",role:"exclusive"===r?"radiogroup":"group",hidden:a.open?null:!0},w.map(function(b,e){return c._renderItem(b,a)})):null;w=(m={},m["esri-layer-list__child-toggle--open"]=a.open,m);m=a.open?q.collapse:q.expand;f=u?d.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":a,key:"esri-layer-list__toggle-children",
class:this.classes("esri-layer-list__child-toggle",w),tabindex:"0",role:"button","aria-controls":f,"aria-label":m,title:m},d.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),d.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),d.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):
null;b=this._createLabelNode(a,b,n);t=t?d.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},d.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),d.tsx("span",null,v)):null;return d.tsx("li",{key:a,class:this.classes("esri-layer-list__item",e),"aria-labelledby":n},d.tsx("div",{key:"esri-layer-list__list-item-container",class:"esri-layer-list__item-container"},f,b,h),t,p,k,r)};c.prototype._createLabelNode=function(a,b,c){var e;b=b&&b.visibilityMode;
var k=(e={},e["esri-icon-radio-checked"]="exclusive"===b&&a.visible,e["esri-icon-radio-unchecked"]="exclusive"===b&&!a.visible,e["esri-icon-visible"]="exclusive"!==b&&a.visible,e["esri-icon-non-visible"]="exclusive"!==b&&!a.visible,e);e="exclusive"===b?"radio":"checkbox";var h=a.title||g.untitledLayer,m=a.visibleAtCurrentScale?h:h+" ("+g.layerInvisibleAtScale+")",h=d.tsx("span",{id:c,title:m,"aria-label":m,class:"esri-layer-list__item-title"},h);return"inherited"===b?d.tsx("div",{key:a,class:"esri-layer-list__item-label"},
h):d.tsx("div",{key:a,onclick:this._labelClick,onkeydown:this._labelClick,"data-item":a,"data-parent-visibility":b,tabindex:"0","aria-checked":a.visible?"true":"false",role:e,"aria-labelledby":c,class:"esri-layer-list__item-label"},d.tsx("span",{class:"esri-layer-list__item-toggle"},d.tsx("span",{class:this.classes("esri-layer-list__item-toggle-icon",k),"aria-hidden":"true"})),h)};c.prototype._renderPanelButton=function(a){var b,c,l=a.className,g=a.open,h=a.title,k=this._getIconImageStyles(a),g=(b=
{},b["esri-layer-list__item-actions-menu-item--active"]=g,b);b=(c={},c[l]=!!l,c["esri-layer-list__item-action-image"]=!!k["background-image"],c);return d.tsx("div",{key:a,bind:this,"data-panel":a,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",g),role:"button",tabindex:"0",title:h,"aria-label":h},d.tsx("span",{class:this.classes(b),styles:k}))};c.prototype._watchActionSectionChanges=function(a,b){var c=this,e="action-section"+b;
this._handles.add(a.on("change",this.scheduleRender.bind(this)),e);a.forEach(function(a){return c._renderOnActionChanges(a,b)})};c.prototype._renderOnActionChanges=function(a,b){var c=this;b="actions"+b;"toggle"===a.type?this._handles.add([m.init(a,"className image id title visible value".split(" "),function(){return c.scheduleRender()})],b):"slider"===a.type?this._handles.add([m.init(a,"className id title visible value displayValueEnabled max min step".split(" "),function(){return c.scheduleRender()})],
b):this._handles.add([m.init(a,["className","image","id","title","visible"],function(){return c.scheduleRender()})],b)};c.prototype._renderOnItemChanges=function(a){var b=this,c=a.uid,d="items"+c;this._handles.add([m.init(a,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className".split(" "),function(){return b.scheduleRender()}),a.actionsSections.on("change",function(){return b.scheduleRender()}),a.children.on("change",function(){return b.scheduleRender()})],
d);a.children.forEach(function(a){return b._renderOnItemChanges(a)});a.actionsSections.forEach(function(a){return b._watchActionSectionChanges(a,c)})};c.prototype._itemsChanged=function(a){var b=this;this._handles.removeAll();a.forEach(function(a){return b._renderOnItemChanges(a)});this.scheduleRender()};c.prototype._renderActionsSections=function(a,b,c){var e=this;b=b.toArray().map(function(b){return d.tsx("ul",{key:b,class:"esri-layer-list__item-actions-list"},e._renderActionSection(a,b))});return d.tsx("div",
{role:"group","aria-expanded":a.actionsOpen?"true":"false",key:"esri-layer-list__actions-section",id:c,class:"esri-layer-list__item-actions",hidden:a.actionsOpen?null:!0},b)};c.prototype._renderActionSection=function(a,b){var c=this;return(b&&b.toArray()).map(function(b){return c._renderAction(a,b)})};c.prototype._renderAction=function(a,b){var c,e,g=this._getIconImageStyles(b),h=b.active,k=b.className,m=b.disabled,n=b.title,m=(c={},c["esri-layer-list__item-action"]="toggle"!==b.type,c["esri-layer-list__action-toggle"]=
"toggle"===b.type,c["esri-layer-list__action-toggle--on"]="toggle"===b.type&&b.value,c["esri-disabled-element"]=m,c);c=(e={},e["esri-layer-list__item-action-image"]=!h&&!!g["background-image"],e["esri-icon-loading-indicator"]=h,e["esri-rotating"]=h,e);k&&(c[k]=!0);return d.tsx("li",{bind:this,"data-item":a,"data-action":b,key:b,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:m,tabindex:"0",role:"button",title:n,"aria-label":n},d.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",
c),styles:g}),d.tsx("span",{class:"esri-layer-list__item-action-title"},n))};c.prototype._countActions=function(a){return a.reduce(function(a,b){return a+b.length},0)};c.prototype._getIconImageStyles=function(a){var b=a.declaredClass=a.image;a.className||b||(b=t);return{"background-image":b?'url("'+b+'")':null}};c.prototype._toggleActionsOpen=function(a){a=a.currentTarget["data-item"];var b=!a.actionsOpen;b&&this.operationalItems.forEach(function(a){return x(a)});a.actionsOpen=b};c.prototype._triggerPanel=
function(a){if(a=a.currentTarget["data-panel"])a.open=!a.open};c.prototype._triggerAction=function(a){var b=a.currentTarget;a=b["data-action"];b=b["data-item"];"toggle"===a.type&&(a.value=!a.value);this.triggerAction(a,b)};c.prototype._labelClick=function(a){var b=a.currentTarget;a=b.getAttribute("data-parent-visibility");b=b["data-item"];"exclusive"===a&&b.visible||(b.visible=!b.visible)};c.prototype._toggleChildrenClick=function(a){a=a.currentTarget["data-item"];a.open=!a.open};b([k.property()],
c.prototype,"iconClass",void 0);b([k.property(),d.renderable()],c.prototype,"statusIndicatorsVisible",void 0);b([k.property(),d.renderable()],c.prototype,"errorsVisible",void 0);b([k.property()],c.prototype,"label",void 0);b([k.aliasOf("viewModel.listItemCreatedFunction"),d.renderable()],c.prototype,"listItemCreatedFunction",void 0);b([k.aliasOf("viewModel.operationalItems"),d.renderable()],c.prototype,"operationalItems",void 0);b([k.aliasOf("viewModel.view"),d.renderable()],c.prototype,"view",void 0);
b([d.vmEvent("trigger-action"),k.property({type:p}),d.renderable("viewModel.state")],c.prototype,"viewModel",void 0);b([k.aliasOf("viewModel.triggerAction")],c.prototype,"triggerAction",null);b([d.accessibleHandler()],c.prototype,"_toggleActionsOpen",null);b([d.accessibleHandler()],c.prototype,"_triggerPanel",null);b([d.accessibleHandler()],c.prototype,"_triggerAction",null);b([d.accessibleHandler()],c.prototype,"_labelClick",null);b([d.accessibleHandler()],c.prototype,"_toggleChildrenClick",null);
return c=b([k.subclass("esri.widgets.LayerList")],c)}(k.declared(h))});