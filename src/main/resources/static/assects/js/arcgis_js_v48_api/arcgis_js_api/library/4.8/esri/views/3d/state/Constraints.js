// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Logger ../../../core/accessorSupport/decorators ../support/earthUtils ../support/mathUtils".split(" "),function(h,c,l,g,m,p,f,q,e){Object.defineProperty(c,"__esModule",{value:!0});var r=p.getLogger("esri.views.3d.state.Constraints");h=function(n){function a(b){b=n.call(this)||this;b.collision=new t;b.distance=Infinity;b.minimumPoiDistance=4;return b}l(a,
n);Object.defineProperty(a.prototype,"altitude",{get:function(){return"local"===this.mode?null:this._get("altitude")||null},set:function(b){"local"===this.mode?r.warn("Altitude constraint is ignored in local scenes"):this._set("altitude",b)},enumerable:!0,configurable:!0});a.prototype.clampAltitude=function(b){return this.altitude?e.clamp(b,this.altitude.min,this.altitude.max):b};a.prototype.clampTilt=function(b,a){if(!this.tilt)return a;b=this.tilt(b);return e.clamp(a,b.min,b.max)};a.prototype.clampDistance=
function(b){return Math.min(b,this.distance)};a.prototype.createDefaultTilt=function(){return"local"===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()};a.prototype.createConstantMaxTilt=function(b){return function(a,d){void 0===d&&(d=k);d.min=c.TiltDefault.min;d.max=b;return d}};a.prototype.createDefaultTiltLocal=function(){var a=this.collision.enabled?e.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[1E4,e.deg2rad(88)],[6E6,e.deg2rad(88)]]):function(){return c.TiltDefault.max};
return function(b,d){void 0===d&&(d=k);d.min=c.TiltDefault.min;d.max=a(b);return d}};a.prototype.createDefaultTiltGlobal=function(){var a=this.collision.enabled?e.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[5E4,e.deg2rad(88)],[6E6,e.deg2rad(88)],[2E7,c.TiltDefault.min]]):e.makePiecewiseLinearFunction([[3E5,c.TiltDefault.max],[3E6,e.deg2rad(88)],[6E6,e.deg2rad(88)],[2E7,c.TiltDefault.min]]);return function(b,d){void 0===d&&(d=k);d.min=c.TiltDefault.min;d.max=a(b);return d}};g([f.property()],
a.prototype,"altitude",null);g([f.property({readOnly:!0})],a.prototype,"collision",void 0);g([f.property()],a.prototype,"distance",void 0);g([f.property({readOnly:!0})],a.prototype,"minimumPoiDistance",void 0);g([f.property()],a.prototype,"tilt",void 0);g([f.property({constructOnly:!0})],a.prototype,"mode",void 0);return a=g([f.subclass("esri.views.3d.state.Constraints")],a)}(f.declared(m));c.Constraints=h;c.AltitudeDefault={min:-2E5,max:4*q.earthRadius};c.TiltDefault={min:e.deg2rad(.5),max:e.deg2rad(179.5)};
var k={min:0,max:0},t=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.elevationMargin=5;return a}l(a,c);g([f.property({type:Boolean})],a.prototype,"enabled",void 0);g([f.property({type:Number})],a.prototype,"elevationMargin",void 0);return a=g([f.subclass("esri.views.3d.state.Constraints.CollisionConstraint")],a)}(f.declared(m));c.default=h});